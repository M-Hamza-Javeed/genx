<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:92pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:24.79pt">Chapter 10. Con&#xfb01;guration</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:125pt;left:24pt"><b><i><span style="font-family:Helvetica,sans-serif;font-size:14.346pt">Starting on the Right Foot</span></i></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Let us watch well our beginnings, and results will manage themselves.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">--</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:176pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;AlexanderClark&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:198pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Under Unix, programs can communicate with their environment in a rich variety of ways. It&#x2019;s</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:210pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">convenient to divide these into (a) startup-environment queries and (b) interactive channels. In</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:222pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">this chapter, we&#x2019;ll focus primarily on startup-environment queries. The next chapter will discuss</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:234pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">interactive channels.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:256pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">What Should Be Con&#xfb01;gurable?</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Before plunging into the details of different kinds of program con&#xfb01;guration, we should ask a high-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">level question: What things should be con&#xfb01;gurable?</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:319pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The gut-level Unix answer is &#x201c;everything&#x201d;. The Rule of Separation that we discussed in Chapter 1</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">encourages Unix programmers to build mechanism and defer policy decisions outward toward the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:342pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">user wherever possible.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:342pt;left:179pt"><span style="font-family:Times,serif;font-size:9.963pt">While this tends to produce programs that are powerful and rewarding</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:354pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">for expert users, it also tends to produce interfaces that overwhelm novices and casual users with a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:366pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">surfeit of choices, and with con&#xfb01;guration &#xfb01;les sprouting like weeds.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:388pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix programmers aren&#x2019;t going to be cured of their tendency to design for their peers and the most</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:400pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">sophisticated users any time soon (we&#x2019;ll grapple a bit with the question of whether such a change</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:412pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">would actually be desirable in Chapter 20).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:412pt;left:253pt"><span style="font-family:Times,serif;font-size:9.963pt">So it&#x2019;s perhaps more useful to invert the question and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:424pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">ask &#x201c;What things should</span><i><span style="font-family:Times,serif;font-size:9.963pt"> not</span></i><span style="font-family:Times,serif;font-size:9.963pt"> be con&#xfb01;gurable?&#x201d; Unix practice does offer some guidelines on this.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:446pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">First,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> don&#x2019;t provide con&#xfb01;guration switches for what you can reliably detect automatically</span></i><span style="font-family:Times,serif;font-size:9.963pt">. This is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:458pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a surprisingly common mistake.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:458pt;left:215pt"><span style="font-family:Times,serif;font-size:9.963pt">Instead, look for ways to eliminate con&#xfb01;guration switches by</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:470pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">autodetection, or by trying alternative methods at runtime until one succeeds. If this strikes you as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:482pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">inelegant or too expensive, ask yourself if you haven&#x2019;t fallen into premature optimization.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:504pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">One of the nicest examples of autodetection I experienced was when Dennis</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">Ritchie and I were porting Unix to the Interdata 8/32. This was a big-endian</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:528pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">machine, and we had to generate data for that machine on a PDP-11, write a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">265</span></p>
</div>
