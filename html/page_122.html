<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">These conditions tend to be ful&#xfb01;lled most often in programs relatively close to the user and high</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in the software stack &#x2014; applications programming.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:286pt"><span style="font-family:Times,serif;font-size:9.963pt">But even there those preconditions often fail.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">You can&#x2019;t count on knowing what the &#x2018;right&#x2019; way for a word processor or a drawing program to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">behave is until the user interface has had end-user testing. Purely top-down programming often has</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the effect of overinvesting effort in code that has to be scrapped and rebuilt because the interface</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:160pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">doesn&#x2019;t pass a reality check.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In self-defense against this, programmers try to do both things &#x2014; express the abstract speci&#xfb01;cation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">as top-down application logic,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> and</span></i><span style="font-family:Times,serif;font-size:9.963pt"> capture a lot of low-level domain primitives in functions or</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">libraries, so they can be reused when the high-level design changes.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix programmers inherit a tradition that is centered in systems programming, where the low-level</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">primitives are hardware-level operations that are &#xfb01;xed in character and extremely important. They</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">therefore lean, by learned instinct, more toward bottom-up programming.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Whether you&#x2019;re a systems programmer or not, bottom-up can also look more attractive when you</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">are programming in an exploratory way, trying to get a grasp on hardware or software or real-world</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">phenomena you don&#x2019;t yet completely understand.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:285pt"><span style="font-family:Times,serif;font-size:9.963pt">Bottom-up programming gives you time and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">room to re&#xfb01;ne a vague speci&#xfb01;cation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:237pt"><span style="font-family:Times,serif;font-size:9.963pt">Bottom-up also appeals to programmers&#x2019; natural human</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">laziness &#x2014; when you have to scrap and rebuild code, you tend to have to throw away larger pieces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">if you&#x2019;re working top-down than you do if you&#x2019;re working bottom-up.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Real code, therefore tends to be programmed both top-down and bottom-up. Often, top-down and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">bottom-up code will be part of the same project. That&#x2019;s where &#x2018;glue&#x2019; enters the picture.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Glue Layers</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When the top-down and bottom-up drives collide, the result is often a mess.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:400pt"><span style="font-family:Times,serif;font-size:9.963pt">The top layer of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">application logic and the bottom layer of domain primitives have to be impedance-matched by a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">layer of glue logic.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:461pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">One of the lessons Unix programmers have learned over decades is that glue is nasty stuff and that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">it is vitally important to keep glue layers as thin as possible. Glue should stick things together, but</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:485pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">should not be used to hide cracks and unevenness in the layers.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:507pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In the Web-browser example, the glue would include the rendering code that maps a document</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:519pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">object parsed from incoming HTML into a &#xfb02;attened visual representation as a bitmap in a display</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:531pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">buffer, using GUI domain primitives to do the painting. This rendering code is notoriously the most</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">121</span></p>
</div>
