<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:218pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 8. Minilanguages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This kind of transparency and simplicity is the mark of a good minilanguage design. The mapping</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">between the notation and domain objects is very clear.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:312pt"><span style="font-family:Times,serif;font-size:9.963pt">The relationships between objects are</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">expressed directly, rather than through name references or some other sort of indirection that you</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">have to think to follow.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:157pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The ultimate functional test of a minilanguage like this one is simple: can I hack it without reading</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:169pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the manual?</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:169pt;left:134pt"><span style="font-family:Times,serif;font-size:9.963pt">For a signi&#xfb01;cant range of cases, the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Glade</span></i><span style="font-family:Times,serif;font-size:9.963pt"> answer is yes.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:169pt;left:385pt"><span style="font-family:Times,serif;font-size:9.963pt">For example, if you</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">know the C-level constants that GTK uses to describe window-positioning hints, you&#x2019;ll recognize</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">GTK_WIN_POS_NONE</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> as one and instantly be able to change the positioning hint associated with this</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">GUI.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The advantage of using</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Glade</span></i><span style="font-family:Times,serif;font-size:9.963pt"> should be clear. It specializes in code generation so you don&#x2019;t have</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">to. That&#x2019;s one less routine task you have to hand-code, and one fewer source of hand-coded bugs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:260pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">More information, including source code and documentation and links to sample applications, is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:272pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">available at the Glade project page [http://glade.gnome.org/].</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Glade</span></i><span style="font-family:Times,serif;font-size:9.963pt"> has been ported to Windows.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:294pt;left:71pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Case Study:</span></b><b><i><span style="font-family:Helvetica,sans-serif;font-size:13.948pt"> m4</span></i></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:320pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The m4(1) macro processor interprets a declarative minilanguage for describing transformations of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:332pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">text. An</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt"> program is a set of macros that speci&#xfb01;es ways to expand text strings into other strings.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:344pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Applying those declarations to an input text with</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt"> performs macro expansion and yields an output</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">text.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:98pt"><span style="font-family:Times,serif;font-size:9.963pt">(The C preprocessor performs similar services for C compilers, though in a rather different</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:368pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">style.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:390pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Example 8.2 shows an</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt"> macro that directs</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt"> to expand each occurrence of the string &quot;OS&quot; in its</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:402pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">input into the string &quot;operating system&quot; on output.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:402pt;left:283pt"><span style="font-family:Times,serif;font-size:9.963pt">This is a trivial example;</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt"> supports macros</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:414pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">with arguments that can be used to do more than transform one &#xfb01;xed string into another.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:414pt;left:440pt"><span style="font-family:Times,serif;font-size:9.963pt">Typing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:426pt;left:71pt"><b><span style="font-family:Times,serif;font-size:9.963pt">info m4</span></b><span style="font-family:Times,serif;font-size:9.963pt"> at your shell prompt will probably display on-line documentation for this language.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:447pt;left:71pt"><b><span style="font-family:Times,serif;font-size:11.955pt">Example 8.2. A sample</span></b><b><i><span style="font-family:Times,serif;font-size:11.955pt"> m4</span></i></b><b><span style="font-family:Times,serif;font-size:11.955pt"> macro.</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:482pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">define(&#x2018;OS&#x2019;, &#x2018;operating system&#x2019;)</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt"> macro language supports conditionals and recursion.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:335pt"><span style="font-family:Times,serif;font-size:9.963pt">The combination can be used to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:524pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">implement loops, and this was intended;</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is deliberately Turing-complete. But actually trying to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">use</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt"> as a general-purpose language would be deeply perverse.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">227</span></p>
</div>
