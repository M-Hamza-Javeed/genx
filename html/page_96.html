<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Collections</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 80 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">This time, the original collection holds its state and the new filtered collection </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">provides the necessary functionality. This process can become quite beneficial for </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">displaying a filtered set of data. The main disadvantage of this process is that you </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:153pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">need to create another new instance of the collection in order to filter it.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:183pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Self-filtering with full data pointers</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:206pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The disadvantage</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> of multiple filtering</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> can also be eliminated by keeping a reference </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:218pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">to the complete dataset before applying filters. If we can save the initial data in a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:231pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">property inside the collection itself and then apply a filter on it, the collection data </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:243pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">gets changed but the raw data is still available. Therefore, if we need to re-apply </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:256pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">another filter on the collection, we can first reset it with the total data and then apply </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:269pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the new filter. To understand the concept with an example, we will define a custom </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:281pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">FilterCollection</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> class:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:303pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var FilterCollection = Backbone.Collection.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:315pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  _totalData: [],</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:327pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  _isFiltered: false,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:352pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  initialize: function (data) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:364pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // The initial data sent to collection will be saved</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:376pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    if (data) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:388pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      this._setTotalData(data);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:400pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // If some data is added later, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // that should reflect in _totalData </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:449pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this.on(&apos;add&apos;, function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:462pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      this._setTotalData();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:474pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }, this);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:486pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:511pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  // Every time a new data has been added to the collection</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:523pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  _setTotalData: function (data) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:535pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this._totalData = data || this.toJSON();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:547pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:572pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  // Apply a new filter to the collection</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:584pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  applyFilter: function (criteria) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:596pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // Clear the previous filter</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:609pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this.clearFilter();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:633pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // Apply new filter </span></p>
</div>
