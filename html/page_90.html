<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Collections</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 74 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:113pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Basic usage of collections</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:137pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">We will start looking into different features of the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Backbone</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> collection with a simple </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:150pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">example. Let&apos;s assume we have a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">User</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> model and a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Users</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> collection.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:171pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Model definition</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:183pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var User = Backbone.Model.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:196pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  initialize: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:208pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this.on(&apos;change&apos;, function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:220pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      console.log(&apos;User model changed!&apos;);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:232pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    });</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:257pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:281pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Collection definition</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:294pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var Users = Backbone.Collection.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:306pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  model: User,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:318pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  url : &apos;/users&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:330pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  initialize: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this.on(&apos;change&apos;, function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      console.log(&apos;Users collection changed!&apos;);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    });</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:392pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:416pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var users = new Users(),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:428pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  newUser = new User({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:441pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    name: &apos;Jayashi De&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:453pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    age: 21</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:465pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  });</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:489pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">users.add([newUser]);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:514pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Change an attribute of the model</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:526pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">newUser.set(&apos;age&apos;, 22);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:545pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">In the preceding </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">code, simple model and collection definitions have been described. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:558pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Here, we tried to demonstrate, as we mentioned in the introduction of this chapter, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:571pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">that any event fired on a model will get fired on the collection too. When you run </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:583pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">this code, the model-change handler is run first, then followed by the collection </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:596pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">change-event handler.</span></p>
</div>
