<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 11. Interfaces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In a con&#xfb01;gurator/actor pair, the interface part controls the startup environment of a &#xfb01;lter or daemon-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">like program which then runs without requiring user commands.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:133pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The programs fetchmail(1) and fetchmailconf(1) (which we&#x2019;ve already used as case studies in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:145pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">discoverability and data-driven programming and will encounter again as language case studies in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:157pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 14) are a good example of a con&#xfb01;gurator/actor pair.</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmailconf</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is the interactive dot&#xfb01;le</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:169pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">con&#xfb01;gurator that ships with fetchmail.</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmailconf</span></i><span style="font-family:Times,serif;font-size:9.963pt"> can also serve as a GUI wrapper that runs</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">fetchmail in either foreground or background mode.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This design pattern enables both</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmailconf</span></i><span style="font-family:Times,serif;font-size:9.963pt"> to specialize in what they do well,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and indeed to be written in different languages appropriate to their task domains.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:425pt"><span style="font-family:Times,serif;font-size:9.963pt">Fetchmail,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">which usually runs in background as a daemon, need not be bloated with GUI code. Conversely,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">fetchmailconf</span></i><span style="font-family:Times,serif;font-size:9.963pt"> can specialize in elaborate GUIness without exacting size and complexity costs from</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">fetchmail. Finally, because the information channels between them are narrow and well-de&#xfb01;ned, it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">remains possible to drive</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> from the command line and from scripts other than</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmailconf</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:284pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The term &#x201c;con&#xfb01;gurator/actor&#x201d; is my invention.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:306pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt">Spooler/Daemon Pair</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:330pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A slight variant of the con&#xfb01;gurator/actor pair can be useful in situations that require serialized access</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:342pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to a shared resource in a batch mode; that is, when a well-de&#xfb01;ned job stream or sequence of requests</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:354pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">requires some shared resource, but no individual job requires user interaction.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:376pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In this spooler/daemon pattern, the spooler or front end simply drops job requests and data in a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:388pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">spool area. The job requests and data are simply &#xfb01;les; the spool area is typically just a directory.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:399pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The location of the directory and the format of the job requests are agreed on by the spooler and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">daemon.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:433pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The daemon runs forever in background, polling the spool directory, looking there for work to do.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:445pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When it &#xfb01;nds a job request, it tries to process the associated data. If it succeeds, the job request and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:457pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data are deleted out of the spool area.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:479pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The classic example of this pattern is the Unix print spooler system, lpr(1)/lpd(1). The front end is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:491pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">lpr(1); it simply drops &#xfb01;les to be printed in a spool area periodically scanned by</span><i><span style="font-family:Times,serif;font-size:9.963pt"> lpd</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span><i><span style="font-family:Times,serif;font-size:9.963pt"> lpd</span></i><span style="font-family:Times,serif;font-size:9.963pt">&#x2019;s job is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:503pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">simply to serialize access to the printer devices.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:524pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Another classic example is the pair at(1)/atd(1), which schedules commands for execution at</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">speci&#xfb01;ed times. A third example, historically important though no longer in wide use, was UUCP</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">312</span></p>
</div>
