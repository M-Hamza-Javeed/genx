<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:227pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 5. Textuality</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">have to be composed ahead of time, they can&#x2019;t just be streamed up after the send initiation) but</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">makes life easier for the client, which can tell in advance how much storage it will need to allocate</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to buffer the message for processing as a whole.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Also, notice that each response is tagged with a sequence label supplied by the request; in this</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">example they have the form A000n, but the client could have generated any token into that slot.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This feature makes it possible for IMAP commands to be streamed to the server without waiting for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the responses; a state machine in the client can then simply interpret the responses and payloads as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">they come back. This technique cuts down on latency.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">IMAP (which was designed to replace POP3) is an excellent example of a mature and powerful</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Internet application protocol design, one well worth study and emulation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:250pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Application Protocol Metaformats</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:278pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Just as data &#xfb01;le metaformats have evolved to simplify serialization for storage, application protocol</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:290pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">metaformats have evolved to simplify serialization for transactions across networks. The tradeoffs</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:302pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">are a little different in this case; because network bandwidth is more expensive than storage, there is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:314pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">more of a premium on transaction economy. Still, the transparency and interoperability bene&#xfb01;ts of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:326pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">textual formats are suf&#xfb01;ciently strong that most designers have resisted the temptation to optimize</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:338pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">for performance at the cost of readability.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:360pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Classical Internet Application Metaprotocol</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:383pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Marshall Rose&#x2019;s RFC 3117,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> On the Design of Application Protocols</span></i><span style="font-family:Times,serif;font-size:9.963pt">,</span><sup><span style="font-family:Times,serif;font-size:6.273pt">55</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">provides an excellent</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:399pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">overview of the design issues in Internet application protocols.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:399pt;left:341pt"><span style="font-family:Times,serif;font-size:9.963pt">It makes explicit several of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">tropes in classical Internet application protocols that we observed in our examination of SMTP, POP,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and IMAP, and provides an instructive taxonomy of such protocols. It is recommended reading.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:444pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The classical Internet metaprotocol is textual. It uses single-line requests and responses, except for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:456pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">payloads which may be multiline.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:456pt;left:220pt"><span style="font-family:Times,serif;font-size:9.963pt">Payloads are shipped either with a preceding length in octets</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:468pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">or with a terminator that is the line</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> &quot;.\r\n&quot;</span></tt><span style="font-family:Times,serif;font-size:9.963pt">. In the latter case the payload is</span><i><span style="font-family:Times,serif;font-size:9.963pt"> byte-stuffed</span></i><span style="font-family:Times,serif;font-size:9.963pt">; all lines</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:480pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that start with a period get another period prepended, and the receiver side is responsible for both</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:492pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">recognizing the termination and stripping away the stuf&#xfb01;ng. Response lines consist of a status code</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:504pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">followed by a human-readable message.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:524pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">55</span><span style="font-family:Times,serif;font-size:7.97pt">See RFC 3117 [ftp://ftp.rfc-editor.org/in-notes/rfc3117.txt].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">153</span></p>
</div>
