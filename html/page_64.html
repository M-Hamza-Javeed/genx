<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Views</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 48 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Let&apos;s define an </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Employees</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> collection for the employee list, as follows:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Employees collection</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var Employees = Backbone.Collection.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:161pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  model: Employee</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:173pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:192pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">For the composite view, we want to present each employee as a separate </span><span style="font-family:CourierStd,serif;font-size:9.5pt">ItemView</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">instance so that event delegation becomes easy:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:226pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Create an ItemView instance for the child items</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:238pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var EmployeeItemView = Marionette.ItemView.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  tagName: &apos;li&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  template: _.template(&apos;&lt;%= name %&gt;&apos;)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:294pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Now we can</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> define the composite view that will display the model data and the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:307pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">collection data together, as shown in the following code:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:328pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Create a collection view and pass the item view class</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:341pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var CompanyView = Marionette.CompositeView.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:353pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  template: _.template([&apos;&lt;h2&gt;&lt;%= name %&gt; &lt;/h2&gt;&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;&lt;span&gt;&lt;%= specialty %&gt; &lt;/span&gt;&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;&lt;ul class=&quot;employees&quot;&gt;&lt;/ul&gt;&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:390pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  ].join(&apos;&apos;)),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:402pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  itemView: EmployeeItemView,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:414pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  itemViewContainer: &apos;.employees&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  // Add a company details to this view&apos;s model and collection</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:451pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  addCompany: function (data) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:463pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    if (!data) return;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:488pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    if (data.employees) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:500pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      this.collection = new Employees(data.employees);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:537pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    delete data.employees;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:549pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this.model = new Company(data);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:561pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:573pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
</div>
