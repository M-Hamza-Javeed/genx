<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Routing Best Practices and Subrouting</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 92 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    if (!App.companyRouter) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      App.companyRouter = new App.CompanyRouter(&apos;/company&apos;);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:194pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:14pt">The Users module router</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:213pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The following is the code for the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Users</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> module router:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:234pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var App.UsersRouter = Backbone.SubRoute.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:246pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  routes: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:259pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;&apos;: &apos;showUsers&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:271pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;view/:id&apos;: &apos;showUserDetails&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:283pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;search&apos;: &apos;searchUsers&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:295pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:320pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  showUsers: function () {},</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:332pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  showUserDetails: function () {},</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:344pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  searchUsers: function () {}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:376pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Look at the base router. What we are doing here is pretty simple&#x2014;we use a wildcard </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:388pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">(or splat) to trigger a method that lazily instantiates a subrouter and passes the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">initial parameter of the hash. Now, because </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Backbone.Subroute</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> extends Backbone&apos;s </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:414pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">Router</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> class, we can expect that anything passed after /</span><span style="font-family:CourierStd,serif;font-size:9.5pt">users/</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> or </span><span style="font-family:CourierStd,serif;font-size:9.5pt">/company/</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:426pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">should be taken care of by the respective subrouter, that is, </span><span style="font-family:CourierStd,serif;font-size:9.5pt">App.UsersRouter</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> or </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">App.CompanyRouter</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">We can add as many subrouters as we want and the base router won&apos;t care about </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">it. Similarly, the subrouters do not know what prefix they have. Any changes in the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:485pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">module name or prefix should be done only in the base router without modifying the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:498pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">related subrouter.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:519pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">Backbone.Subroute</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> is a small yet excellent plugin that you should always include </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">in your application to keep your base router clean. The more modules get added to </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:544pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">your application, the more you will understand the benefit of subrouters.</span></p>
</div>
