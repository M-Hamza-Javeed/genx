<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:209pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 7. Multiprogramming</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">these details are hidden from the user, who simply sees PIC source go in one end and a bitmap ready</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">for inclusion in a Web page come out the other.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This is an interesting example because it illustrates how pipes and &#xfb01;ltering can adapt programs to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">unexpected uses. The program that interprets PIC, pic(1), was originally designed only to be used</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">for embedding diagrams in typeset documents. Most of the other programs in the toolchain it was</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">part of are now semiobsolescent. But PIC remains handy for new uses, such as describing diagrams</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to be embedded in HTML. It gets a renewed lease on life because tools like pic2graph(1) can bundle</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">together all the machinery needed to convert the output of pic(1) into a more modern format.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We&#x2019;ll examine pic(1) more closely, as a minilanguage design, in Chapter 8.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:237pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt">Case Study: bc(1) and dc(1)</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:262pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Part of the classic Unix toolkit dating back to Version 7 is a pair of calculator programs. The dc(1)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:274pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">program is a simple calculator that accepts text lines consisting of reverse-Polish notation (RPN) on</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">standard input and emits calculated answers to standard output. The bc(1) program accepts a more</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">elaborate in&#xfb01;x syntax resembling conventional algebraic notation; it includes as well the ability to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">set and read variables and de&#xfb01;ne functions for elaborate formulas.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">While the modern GNU implementation of bc(1) is standalone, the classic version passed commands</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to dc(1) over a pipe. In this division of labor, bc(1) does variable substitution and function expansion</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and translates in&#xfb01;x notation into reverse-Polish &#x2014; but doesn&#x2019;t actually do calculation itself, instead</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">passing RPN translations of input expressions to dc(1) for evaluation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">There are clear advantages to this separation of function. It means that users get to choose their</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">preferred notation, but the logic for arbitrary-precision numeric calculation (which is moderately</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">tricky) does not have to be duplicated. Each of the pair of programs can be less complex than one</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">calculator with a choice of notations would be. The two components can be debugged and mentally</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">modeled independently of each other.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:459pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In Chapter 8 we will reexamine these programs from a slightly different example, as examples of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:471pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">domain-speci&#xfb01;c minilanguages.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:493pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt">Anti-Case Study: Why Isn&#x2019;t</span></b><b><i><span style="font-family:Helvetica,sans-serif;font-size:11.955pt"> fetchmail</span></i></b><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt"> a Pipeline?</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In Unix terms,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is an uncomfortably large program that bristles with options.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:431pt"><span style="font-family:Times,serif;font-size:9.963pt">Thinking</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:529pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">about the way mail transport works, one might think it would be possible to decompose it into a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">196</span></p>
</div>
