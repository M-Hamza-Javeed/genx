<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 11. Interfaces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:82pt"><span style="font-family:Times,serif;font-size:9.963pt">2.</span><i><span style="font-family:Times,serif;font-size:9.963pt"> When &#xfb01;ltering, never throw away information you don&#x2019;t need to.</span></i><span style="font-family:Times,serif;font-size:9.963pt"> This, too, increases the odds</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">that your &#xfb01;lter will someday be useful as an input to other programs. Information you discard</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">is information that no later stage in a pipeline can use.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:82pt"><span style="font-family:Times,serif;font-size:9.963pt">3.</span><i><span style="font-family:Times,serif;font-size:9.963pt"> When &#xfb01;ltering, never add noise.</span></i><span style="font-family:Times,serif;font-size:9.963pt"> Avoid adding nonessential information, and avoid reformatting</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">in ways that might make the output more dif&#xfb01;cult for downstream programs to parse. The most</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">common offenders are cosmetic touches like headers, footers, blank/ruler lines, summaries and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">conversions like adding aligned columns, or writing a factor of &quot;1.5&quot; as &quot;150%&quot;.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:426pt"><span style="font-family:Times,serif;font-size:9.963pt">Times and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">dates are a particular bother because they&#x2019;re hard for downstream programs to parse. Any</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">such additions should be optional and controlled by switches. If your program emits dates, it&#x2019;s</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">good practice to have a switch that can force them into ISO8601 YYYY-MM-DD and hh:mm:ss</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">formats &#x2014; or, better yet, use those by default.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:253pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The term &#x201c;&#xfb01;lter&#x201d; for this pattern is long-established Unix jargon.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x201c;Filter&#x201d; is indeed long-established.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:257pt"><span style="font-family:Times,serif;font-size:9.963pt">It came into use on day one of pipes.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:416pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">term was a natural transferral from electrical-engineering usage: data &#xfb02;owed from</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">source through &#xfb01;lters to sink. Source or sink could be either process or &#xfb01;le. The</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">collective EE term, &#x201c;circuit&#x201d;, was never considered, since the plumbing metaphor</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">for data &#xfb02;ow was already well established.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:335pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:347pt;left:301pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;DougMcIlroy&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:369pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Some programs have interface design patterns like the &#xfb01;lter, but even simpler (and, importantly, even</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">easier to script). They are cantrips, sources, and sinks.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:71pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Cantrip Pattern</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:429pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The cantrip interface design pattern is the simplest of all. No input, no output, just an invocation and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:441pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">a numeric exit status. A cantrip&#x2019;s behavior is controlled only by startup conditions. Programs don&#x2019;t</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:453pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">get any more scriptable than this.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:475pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Thus, the cantrip design pattern is an excellent default when the program doesn&#x2019;t require any runtime</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:487pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">interaction with the user other than fairly simple setup of initial conditions or control information.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:509pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Indeed, because scriptability is important, Unix designers learn to resist the temptation to write</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:521pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">more interactive programs when cantrips will do. A collection of cantrips can always be driven from</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:533pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">an interactive wrapper or shell program, but interactive programs are harder to script. Good style</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">304</span></p>
</div>
