<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 11. Interfaces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Also note that programs may have modes that &#xfb01;t more than one interface pattern. A program that has</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a compiler-like interface, for example, may behave as a &#xfb01;lter when no &#xfb01;le arguments are speci&#xfb01;ed</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">on the command line (many format converters behave like this).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Filter Pattern</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:172pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The interface-design pattern most classically associated with Unix is the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> &#xfb01;lter</span></i><span style="font-family:Times,serif;font-size:9.963pt">. A &#xfb01;lter program</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:184pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">takes data on standard input, transforms it in some fashion, and sends the result to standard output.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:196pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Filters are not interactive; they may query their startup environment, and are typically controlled by</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:208pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">command-line options, but they do not require feedback or commands from the user in their input</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:220pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">stream.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:242pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Two classic examples of &#xfb01;lters are tr(1) and grep(1). The tr(1) program is a utility that translates</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:254pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data on standard input to results on standard output using a translation speci&#xfb01;cation given on</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:266pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the command line. The grep(1) program selects lines from standard input according to a match</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:278pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">expression speci&#xfb01;ed on the command line; the resulting selected lines go to standard output. A third</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:290pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is the sort(1) utility, which sorts lines in input according to criteria speci&#xfb01;ed on the command line</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:302pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and issues the sorted result to standard output.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:324pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Both grep(1) and sort(1) (but not tr(1)) can alternatively take data input from a &#xfb01;le (or &#xfb01;les) named</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:336pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">on the command line, in which case they do not read standard input but act instead as though that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:348pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">input were the catenation of the named &#xfb01;les read in the order they appear. (In this case it is also</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:360pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">expected that specifying &#x201c;-&#x201d; as a &#xfb01;lename on the command line will direct the program explicitly to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:372pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">read from standard input.) The archetype of such &#x2018;catlike&#x2019; &#xfb01;lters is cat(1), and &#xfb01;lters are expected to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:384pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">behave this way unless there are application-speci&#xfb01;c reasons to treat &#xfb01;les named on the command</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:395pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">line differently.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:417pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When designing &#xfb01;lters, it is well to bear in mind some additional rules, partly developed in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:429pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 1:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:463pt;left:82pt"><span style="font-family:Times,serif;font-size:9.963pt">1.</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Remember Postel&#x2019;s Prescription: Be generous in what you accept, rigorous in what you emit.</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:475pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">That is, try to accept as loose and sloppy an input format as you can and emit as well-structured</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:487pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">and tight an output format as you can.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:487pt;left:254pt"><span style="font-family:Times,serif;font-size:9.963pt">Doing the former reduces the odds that the &#xfb01;lter will</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:499pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">be brittle in the face of unexpected inputs, and break in someone&#x2019;s hand (or in the middle of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:511pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">someone&#x2019;s toolchain).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:511pt;left:192pt"><span style="font-family:Times,serif;font-size:9.963pt">Doing the latter increases the odds that your &#xfb01;lter will someday be</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:523pt;left:91pt"><span style="font-family:Times,serif;font-size:9.963pt">useful as an input to other programs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">303</span></p>
</div>
