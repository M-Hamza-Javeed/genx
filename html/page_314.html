<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 11. Interfaces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014; the Unix-to-Unix Copy Program commonly used as a mail transport over dial-up lines before the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Internet explosion of the early 1990s.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The spooler/daemon pattern remains important in mail-transport programs (which are batchy by</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">nature). The front ends of mail transports such as sendmail(1) and qmail(1) usually make one try at</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">delivering mail immediately, through SMTP over an outbound Internet connection. If that attempt</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">fails, the mail will fall into a spool area; a daemon version or mode of the mail transport will retry</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the delivery later.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Typically, a spooler/daemon system has four parts: a job launcher, a queue lister, a job-cancellation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">utility, and a spooling daemon, In fact, the presence of the &#xfb01;rst three parts is a sure clue that there is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a spooler daemon behind them somewhere.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The terms &#x201c;spooler&#x201d; and &#x201c;daemon&#x201d; are well-established Unix jargon. (&#x2018;Spooler&#x2019; actually dates back</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to early mainframe days.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:283pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt">Driver/Engine Pair</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:307pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In this pattern, unlike a con&#xfb01;gurator/actor or spooler/server pair, the interface part supplies com-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:319pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">mands to and interprets output from an engine after startup; the engine has a simpler interface</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">pattern. The IPC method used is an implementation detail; the engine may be a slave process of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">driver (in the sense we discussed in Chapter 7) or the engine and driver may communicate through</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">sockets, or shared memory, or any other IPC method. The key points are (a) the interactivity of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">pair, and (b) the ability of the engine to run standalone with its own interface.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Such pairs are trickier to write than con&#xfb01;gurator/actor pairs because they are more tightly and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">intricately coupled; the driver must have knowledge not merely about the engine&#x2019;s expected startup</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">environment but about its command set and response formats as well.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:435pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When the engine has been designed for scriptability, however, it is not uncommon for the driver part</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:447pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to be written by someone other than the engine author, or for more than one driver to front-end a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:459pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">given engine. An excellent example of both is provided by the programs gv(1) and ghostview(1),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:471pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">which are drivers for gs(1), the Ghostscript interpreter. GhostScript renders PostScript to various</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:483pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">graphics formats and lower-level printer-control languages. The gv and ghostview programs provide</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:495pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">GUI wrappers for GhostScript&#x2019;s rather idiosyncratic invocation switches and command syntax.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Another excellent example of this pattern is the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> xcdroast</span></i><span style="font-family:Times,serif;font-size:9.963pt">/</span><i><span style="font-family:Times,serif;font-size:9.963pt">cdrtools</span></i><span style="font-family:Times,serif;font-size:9.963pt"> combination.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:416pt"><span style="font-family:Times,serif;font-size:9.963pt">The cdrtools</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:529pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">distribution provides a program cdrecord(1) with a command-line interface.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:529pt;left:391pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span><i><span style="font-family:Times,serif;font-size:9.963pt"> cdrecord</span></i><span style="font-family:Times,serif;font-size:9.963pt"> code</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">313</span></p>
</div>
