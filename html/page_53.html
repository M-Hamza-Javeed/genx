<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 2</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 37 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:123pt;left:167pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">There are a few tools that will help you check whether your application </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:135pt;left:167pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">is leaking memory. You can track it with Chrome developer tools </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:167pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">(</span><span style="font-family:CourierStd,serif;font-size:9.5pt">https://developers.google.com/chrome-developer-tools/</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:157pt;left:167pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">docs/javascript-memory-profiling</span><span style="font-family:BookAntiqua,serif;font-size:9.5pt">), or you can use Backbone-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:169pt;left:167pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">Debugger (</span><span style="font-family:CourierStd,serif;font-size:9.5pt">https://github.com/Maluen/Backbone-Debugger</span><span style="font-family:BookAntiqua,serif;font-size:9.5pt">).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:206pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Working with templates</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:230pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Templates are an integral part of Backbone application development. With Backbone, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:242pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Underscore.js comes up with its inbuilt micro template engine, though we can use </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:255pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">other popular template engines such as Handlebars, Mustache, or Jade too. In the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:267pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">following section, we will cover some interesting patterns with templates that will help </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:280pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">you to manage the templates in large applications and enhance their performance.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Storing templates in an HTML file</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">In the simplest of cases, we store templates in two ways; we either directly add them </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:346pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">inline within the view as a view property or add them inside the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">script</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> tag in the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:358pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">index.html</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> file. We have already seen the former case in the previous example. Let&apos;s </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:371pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">see the second option:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:392pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;script type=&quot;text/template&quot; id=&quot;tpl_user_details&quot;&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:404pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &lt;h3&gt; &lt;%= name %&gt; &lt;/h3&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:417pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &lt;p&gt;&lt;%= about %&gt;&lt;/p&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:429pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;/script&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Here we just place the template string inside a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">script</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> tag and give it a type </span><span style="font-family:CourierStd,serif;font-size:9.5pt">text/</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:461pt;left:107pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">template</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> so that it doesn&apos;t get evaluated as JavaScript. You can always retrieve the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">template using the script ID:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:495pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var userDetailsTpl = $(&apos;#tpl_user_details&apos;).html();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:524pt;left:190pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">Default delimiters of the Underscore template are sometimes </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:535pt;left:190pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">annoying and look ugly. A Mustache style </span><span style="font-family:CourierStd,serif;font-size:9.5pt">{{}}</span><span style="font-family:BookAntiqua,serif;font-size:9.5pt"> looks cleaner </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:546pt;left:190pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">and is preferred by most developers. You can easily transform </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:558pt;left:190pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">your Underscore delimiters to the Mustache style with the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:569pt;left:190pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">_.templateSettings property</span><span style="font-family:BookAntiqua,serif;font-size:9.5pt">:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:585pt;left:204pt"><span style="font-family:CourierStd,serif;font-size:9pt">_.templateSettings = {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:598pt;left:204pt"><span style="font-family:CourierStd,serif;font-size:9pt">  interpolate: /\{\{(.+?)\}\}/g</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:610pt;left:204pt"><span style="font-family:CourierStd,serif;font-size:9pt">};</span></p>
</div>
