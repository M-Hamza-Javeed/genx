<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">To achieve enlightenment and surcease from suffering, Zen teaches detachment. The Unix tradition</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">teaches the value of detachment from the particular, accidental conditions under which a design</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">problem was posed.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:165pt"><span style="font-family:Times,serif;font-size:9.963pt">Abstract.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:214pt"><span style="font-family:Times,serif;font-size:9.963pt">Simplify.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:263pt"><span style="font-family:Times,serif;font-size:9.963pt">Generalize.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:322pt"><span style="font-family:Times,serif;font-size:9.963pt">Because we write software to solve</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">problems, we cannot completely detach from the problems &#x2014; but it is well worth the mental</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">effort to see how many preconceptions you can throw away, and whether the design becomes more</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:160pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">compact and orthogonal as you do that. Possibilities for code reuse often result.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Jokes about the relationship between Unix and Zen are a live part of the Unix tradition as well.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">45</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This is not an accident.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:216pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Software Is a Many-Layered Thing</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:244pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Broadly speaking, there are two directions one can go in designing a hierarchy of functions or</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:256pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">objects. Which direction you choose, and when, has a profound effect on the layering of your code.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:279pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Top-Down versus Bottom-Up</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:305pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">One direction is bottom-up, from concrete to abstract &#x2014; working up from the speci&#xfb01;c operations</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:317pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in the problem domain that you know you will need to perform.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:317pt;left:338pt"><span style="font-family:Times,serif;font-size:9.963pt">For example, if one is designing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:329pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;rmware for a disk drive, some of the bottom-level primitives might be &#x2018;seek head to physical block&#x2019;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:341pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2018;read physical block&#x2019;, &#x2018;write physical block&#x2019;, &#x2018;toggle drive LED&#x2019;, etc.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:363pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The other direction is top-down, abstract to concrete &#x2014; from the highest-level speci&#xfb01;cation describ-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:375pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">ing the project as a whole, or the application logic, downwards to individual operations. Thus, if one</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:387pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is designing software for a mass-storage controller that might drive several different sorts of media,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:399pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">one might start with abstract operations like &#x2018;seek logical block&#x2019;, &#x2018;read logical block&#x2019;, &#x2018;write logical</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">block&#x2019;, &#x2018;toggle activity indication&#x2019;.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:222pt"><span style="font-family:Times,serif;font-size:9.963pt">These would differ from the similarly named hardware-level</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">operations above in that they&#x2019;re intended to be generic across different kinds of physical devices.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:444pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">These two examples could be two ways of approaching design for the same collection of hardware.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:456pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Your choice, in cases like this, is one of these: either abstract the hardware (so the objects encap-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:468pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">sulate the real things out there and the program is merely a list of manipulations on those things),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:480pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">or organize around some behavioral model (and then embed the actual hardware manipulations that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:492pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">carry it out in the &#xfb02;ow of the behavioral logic).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">45</span><span style="font-family:Times,serif;font-size:7.97pt">For a recent example of Unix/Zen crossover, see Appendix D.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">119</span></p>
</div>
