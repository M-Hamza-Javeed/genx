<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:230pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 20. Futures</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">implementing per-process mount points, a long step toward Plan 9&#x2019;s private namespaces.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:452pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">various open-source Unixes are all moving toward systemwide support for UTF-8, an encoding</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">actually invented for Plan 9.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">155</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">It may well be that over time, much more of Plan 9 will work its way into Unix as various portions</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of Unix&#x2019;s architecture slide into senescence.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:259pt"><span style="font-family:Times,serif;font-size:9.963pt">This is one possible line of development for Unix&#x2019;s</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">future.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:192pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Problems in the Design of Unix</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:221pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Plan 9 cleans up Unix, but only really adds one new concept (private namespaces) to its basic set</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:232pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of design ideas.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:232pt;left:146pt"><span style="font-family:Times,serif;font-size:9.963pt">But are there serious problems with those basic design ideas? In Chapter 1 we</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:244pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">touched on several issues that Unix arguably got wrong. Now that the open-source movement has</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:256pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">put the design future of Unix back in the hands of programmers and technical people, these are no</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:268pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">longer decisions we have to live with forever. We&#x2019;ll reexamine them in order to get a better handle</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:280pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">on how Unix might evolve in the future.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:303pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">A Unix File Is Just a Big Bag of Bytes</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:329pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A Unix &#xfb01;le is just a big bag of bytes, with no other attributes.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:329pt;left:329pt"><span style="font-family:Times,serif;font-size:9.963pt">In particular, there is no capability</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:341pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to store information about the &#xfb01;le type or a pointer to an associated application program outside the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:353pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;le&#x2019;s actual data.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:375pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">More generally, everything is a byte stream; even hardware devices are byte streams. This metaphor</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:387pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">was a tremendous success of early Unix, and a real advance over a world in which (for example)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:399pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">compiled programs could not produce output that could be fed back to the compiler. Pipes and shell</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">programming sprang from this metaphor.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:433pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">But Unix&#x2019;s byte-stream metaphor is</span><i><span style="font-family:Times,serif;font-size:9.963pt"> so</span></i><span style="font-family:Times,serif;font-size:9.963pt"> central that Unix has trouble integrating software objects</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:444pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with operations that don&#x2019;t &#xfb01;t neatly into the byte stream or &#xfb01;le repertoire of operations (create, open,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:456pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">read, write, delete). This is especially a problem for GUI objects such as icons, windows, and &#x2018;live&#x2019;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:468pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">documents.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:468pt;left:128pt"><span style="font-family:Times,serif;font-size:9.963pt">Within a classical Unix model of the world, the only way to extend the everything-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:480pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is-a-byte-stream metaphor is through</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> ioctl</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> calls, a notoriously ugly collection of back doors into</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:492pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">kernel space.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">155</span><span style="font-family:Times,serif;font-size:7.97pt">The tale of how UTF-8 was born involves Ken Thompson, Rob Pike, a new Jersey diner, and a frenzied overnight hack</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:521pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">[http://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">509</span></p>
</div>
