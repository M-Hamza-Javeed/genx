<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Routing Best Practices and Subrouting</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 88 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:114pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Instantiating views in router methods</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">I have seen many developers who instantiate their application views inside router </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">methods. While there is no such restriction in instantiating views or modifying DOM </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:161pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">elements in router methods, it is a good practice to avoid such operations in routers. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:174pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">This is somewhat related to the first point that I mentioned in this section. In the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:186pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">following code, we have instantiated a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">UserView</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> class and rendered it in the DOM </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:199pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">inside the router method:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:220pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">Backbone.Router.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:232pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  routes: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &quot;users&quot;: &quot;showUsers&quot;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:257pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:281pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  showUsers: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:294pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    var usersView = new UsersView();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:306pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    usersView.render();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:318pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    $(&quot;#user_list&quot;).html(usersView.el);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:330pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:362pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">This looks simple and works perfectly. But will it not clutter the router if there are 20 </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:374pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">or more such methods? Why not create a controller or a high-level application object </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:387pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and add the method there? Then you can call this controller method from the router </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:400pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">method as follows:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:421pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">Backbone.Router.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:433pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  routes: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:446pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &quot;users&quot;: &quot;showUsers&quot;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:458pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:482pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  showUsers: function() {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:494pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    UserController.showUsers();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:507pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:519pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:543pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var UserController = {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:556pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  showUsers: function() {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:568pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    var usersView = new UsersView();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:580pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    usersView.render();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:592pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    $(&quot;#user_list&quot;).html(usersView.el);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:605pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:617pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
</div>
