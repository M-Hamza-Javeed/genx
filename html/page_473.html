<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:214pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 18. Documentation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">So, &#xfb01;rst, a stylesheet translates DocBook&#x2019;s structural markup into another dialect of XML &#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">FO (Formatting Objects).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:187pt"><span style="font-family:Times,serif;font-size:9.963pt">FO markup is very much presentation-level; you can think of it as a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">sort of XML functional equivalent of</span><i><span style="font-family:Times,serif;font-size:9.963pt"> troff</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:251pt"><span style="font-family:Times,serif;font-size:9.963pt">It has to be translated to PostScript for packaging in a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">PDF.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">In the toolchain shipped with Red Hat Linux, this job is handled by a</span><i><span style="font-family:Times,serif;font-size:9.963pt"> TeX</span></i><span style="font-family:Times,serif;font-size:9.963pt"> macro package called</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">PassiveTeX</span></i><span style="font-family:Times,serif;font-size:9.963pt">. It translates the formatting objects generated by</span><b><span style="font-family:Times,serif;font-size:9.963pt"> xsltproc</span></b><span style="font-family:Times,serif;font-size:9.963pt"> into Donald Knuth&#x2019;s</span><i><span style="font-family:Times,serif;font-size:9.963pt"> TeX</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">language.</span><i><span style="font-family:Times,serif;font-size:9.963pt"> TeX</span></i><span style="font-family:Times,serif;font-size:9.963pt">&#x2019;s output, known as DVI (DeVice Independent) format, is then massaged into PDF.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">If you think this bucket chain of XML to</span><i><span style="font-family:Times,serif;font-size:9.963pt"> TeX</span></i><span style="font-family:Times,serif;font-size:9.963pt"> macros to DVI to PDF sounds like an awkward</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">kludge, you&#x2019;re right.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:173pt"><span style="font-family:Times,serif;font-size:9.963pt">It clanks, it wheezes, and it has ugly warts.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:375pt"><span style="font-family:Times,serif;font-size:9.963pt">Fonts are a signi&#xfb01;cant</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">problem, since XML and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> TeX</span></i><span style="font-family:Times,serif;font-size:9.963pt"> and PDF have very different models of how fonts work; also, handling</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">internationalization and localization is a nightmare. About the only thing this code path has going</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">for it is that it works.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The elegant way will be FOP, a direct FO-to-PostScript translator being developed by the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Apache project.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:147pt"><span style="font-family:Times,serif;font-size:9.963pt">With FOP, the internationalization problem is, if not solved, at least well con-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;ned; XML tools handle Unicode all the way through to FOP. The mapping from Unicode glyphs</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to Postscript font is also strictly FOP&#x2019;s problem.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:282pt"><span style="font-family:Times,serif;font-size:9.963pt">The only trouble with this approach is that it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">doesn&#x2019;t work &#x2014; yet. As of mid-2003, FOP is in an un&#xfb01;nished alpha state &#x2014; usable, but with rough</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">edges and missing features.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Figure 18.3 illustrates what the FOP toolchain looks like.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">472</span></p>
</div>
