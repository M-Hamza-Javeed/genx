<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:209pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 7. Multiprogramming</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Windows COM and DCOM are perhaps the archetypal examples of how bad this can get, but there</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">are plenty of others. Apple abandoned OpenDoc, and both CORBA and the once wildly hyped Java</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">RMI have receded from view in the Unix world as people have gained &#xfb01;eld experience with them.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This may well be because these methods don&#x2019;t actually solve more problems than they cause.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Andrew S. Tanenbaum and Robbert van Renesse have given us a detailed analysis of the general</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">problem in</span><i><span style="font-family:Times,serif;font-size:9.963pt"> A Critique of the Remote Procedure Call Paradigm</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Tanenbaum-VanRenesse], a paper</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">which should serve as a strong cautionary note to anyone considering an architecture based on RPC.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">All these problems may predict long-term dif&#xfb01;culties for the relatively few Unix projects that use</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:212pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">RPC. Of these projects, perhaps the best known is the GNOME desktop effort.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">77</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">These problems</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">also contribute to the notorious security vulnerabilities of exposing NFS servers.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix tradition, on the other hand, strongly favors transparent and discoverable interfaces. This is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">one of the forces behind the Unix culture&#x2019;s continuing attachment to IPC through textual protocols.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">It is often argued that the parsing overhead of textual protocols is a performance problem relative</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to binary RPCs &#x2014; but RPC interfaces tend to have latency problems that are far worse, because (a)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">you can&#x2019;t readily anticipate how much data marshaling and unmarshaling a given call will involve,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and (b) the RPC model tends to encourage programmers to treat network transactions as cost-free.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Adding even one additional round trip to a transaction interface tends to add enough network latency</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to swamp any overhead from parsing or marshaling.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Even if text streams were less ef&#xfb01;cient than RPC, the performance loss would be marginal and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">linear, the kind better addressed by upgrading your hardware than by expending development time</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">or adding architectural complexity. Anything you might lose in performance by using text streams,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">you gain back in the ability to design systems that are simpler &#x2014; easier to monitor, to model, and to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">understand.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Today, RPC and the Unix attachment to text streams are converging in an interesting way, through</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">protocols like XML-RPC and SOAP. These, being textual and transparent, are more palatable to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix programmers than the ugly and heavyweight binary serialization formats they replace. While</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">they don&#x2019;t solve all the more general problems pointed out by Tanenbaum and van Renesse, they do</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:472pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in some ways combine the advantages of both text-stream and RPC worlds.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:495pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Threads &#x2014; Threat or Menace?</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">77</span><span style="font-family:Times,serif;font-size:7.97pt">GNOME&#x2019;s main competitor, KDE, started with CORBA but abandoned it in their 2.0 release. They have been on a quest</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:526pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">for lighter-weight IPC methods ever since.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">211</span></p>
</div>
