<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:209pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 7. Multiprogramming</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">among processes running on the same machine. These System V shared memory facilities evolved</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">into the POSIX shared-memory API, supported under Linux, the BSDs, MacOS X and Windows,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">but not classic MacOS.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">By using these shared-memory and semaphore facilities (shmget(2), semget(2), and friends) one</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">can avoid the overhead of copying data through the network stack.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:353pt"><span style="font-family:Times,serif;font-size:9.963pt">Large commercial databases</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">(including Oracle, DB2, Sybase, and Informix) use this technique heavily.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:192pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Problems and Methods to Avoid</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:221pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">While BSD-style sockets over TCP/IP have become the dominant IPC method under Unix, there are</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:232pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">still live controversies over the right way to partition by multiprogramming. Some obsolete methods</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:244pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">have not yet completely died, and some techniques of questionable utility have been imported from</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:256pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">other operating systems (often in association with graphics or GUI programming). We&#x2019;ll be touring</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:268pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">some dangerous swamps here; beware the crocodiles.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:291pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Obsolescent Unix IPC Methods</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:317pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix (born 1969) long predates TCP/IP (born 1980) and the ubiquitous networking of the 1990s and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:329pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">later. Anonymous pipes, redirection, and shellout have been in Unix since very early days, but the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:341pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">history of Unix is littered with the corpses of APIs tied to obsolescent IPC and networking models,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:353pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">beginning with the</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> mx()</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> facility that appeared in Version 6 (1976) and was dropped before Version</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">7 (1979).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:387pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Eventually BSD sockets won out as IPC was uni&#xfb01;ed with networking. But this didn&#x2019;t happen until</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:399pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">after &#xfb01;fteen years of experimentation that left a number of relics behind. It&#x2019;s useful to know about</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">these because there are likely to be references to them in your Unix documentation that might give</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the misleading impression that they&#x2019;re still in use. These obsolete methods are described in more</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:435pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">detail in</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Unix Network Programming</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Stevens90].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:456pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">The real explanation for all the dead IPC facilities in old AT&amp;T Unixes was</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:468pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">politics.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:468pt;left:151pt"><span style="font-family:Times,serif;font-size:9.963pt">The Unix Support Group was headed by a low-level manager, while</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:480pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">some projects that used Unix were headed by vice presidents.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:480pt;left:370pt"><span style="font-family:Times,serif;font-size:9.963pt">They had ways</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:492pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">to make irresistible requests, and would not brook the objection that most IPC</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:504pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">mechanisms are interchangeable.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:528pt;left:301pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;DougMcIlroy&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">208</span></p>
</div>
