<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:218pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 8. Minilanguages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Designing Minilanguages</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:123pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When is designing a minilanguage appropriate?</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:123pt;left:275pt"><span style="font-family:Times,serif;font-size:9.963pt">We&#x2019;ve observed that minilanguages offer a way</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:135pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to push problem speci&#xfb01;cations to a higher level, and seen how this operates in several case studies.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:147pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The &#xfb02;ip side of this observation is that a minilanguage is likely to be a good approach whenever the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:159pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">domain primitives in your application area are simple and stereotyped, but the ways in which users</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:171pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">are likely to want to apply them are &#xfb02;uid and varying.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">For</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:93pt"><span style="font-family:Times,serif;font-size:9.963pt">some</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:123pt"><span style="font-family:Times,serif;font-size:9.963pt">related</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:158pt"><span style="font-family:Times,serif;font-size:9.963pt">ideas,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:191pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;nd</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:214pt"><span style="font-family:Times,serif;font-size:9.963pt">a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:227pt"><span style="font-family:Times,serif;font-size:9.963pt">description</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:280pt"><span style="font-family:Times,serif;font-size:9.963pt">of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:296pt"><span style="font-family:Times,serif;font-size:9.963pt">the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:317pt"><span style="font-family:Times,serif;font-size:9.963pt">Alternate</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:362pt"><span style="font-family:Times,serif;font-size:9.963pt">Hard</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:390pt"><span style="font-family:Times,serif;font-size:9.963pt">And</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:416pt"><span style="font-family:Times,serif;font-size:9.963pt">Soft</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:440pt"><span style="font-family:Times,serif;font-size:9.963pt">Layers</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">[http://www.c2.com/cgi/wiki?AlternateHardAndSoftLayers]</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:331pt"><span style="font-family:Times,serif;font-size:9.963pt">and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:365pt"><span style="font-family:Times,serif;font-size:9.963pt">Scripted</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:417pt"><span style="font-family:Times,serif;font-size:9.963pt">Components</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">[http://www.doc.ic.ac.uk/~np2/patterns/scripting/scripting.html] design patterns.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">An interesting survey of design styles and techniques in minilanguages is</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Notable Design Patterns</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">for Domain-Speci&#xfb01;c Languages</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Spinellis].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Choosing the Right Complexity Level</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The &#xfb01;rst important thing to bear in mind when designing a minilanguage is, as usual, to keep it as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">simple as possible. The taxonomy diagram we used to organize the case studies implies a hierarchy</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of complexity; you want to keep your design as far toward the left-hand edge as possible.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:443pt"><span style="font-family:Times,serif;font-size:9.963pt">If you</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:335pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">can get away with designing a structured data &#xfb01;le rather than a minilanguage that is going to modify</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:347pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">external data when it&#x2019;s interpreted, by all means do so.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:369pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">One very pragmatic reason to stick with structured data rather than a minilanguage is that in a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">networked world, embedded minilanguage facilities are subject to abuses that can be inconvenient</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">or even dangerous.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:161pt"><span style="font-family:Times,serif;font-size:9.963pt">JavaScript is a prime example in the &#x2018;inconvenient&#x2019; category; its designers</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:405pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">didn&#x2019;t anticipate that it would be used for pop-up advertisements so obnoxious as to create a demand</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:417pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">for browser features that suppress JavaScript interpretation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Microsoft Word macro viruses show how this sort of thing can become actively dangerous, a security</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:451pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">hole that costs billions of dollars in downtime and lost productivity annually. It is instructive to note</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:459pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that despite the existence of at least twenty million Unix users worldwide</span><sup><span style="font-family:Times,serif;font-size:6.273pt">95</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">there has never been any</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:475pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix equivalent of Windows&#x2019;s frequent macro-virus outbreaks. There are a number of reasons for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:487pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">this, including the fundamentally better security design of Unix; but at least one is the fact that Unix</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:499pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">mail agents do</span><i><span style="font-family:Times,serif;font-size:9.963pt"> not</span></i><span style="font-family:Times,serif;font-size:9.963pt"> default to executing live content in any document that the user views.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">96</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:518pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">95</span><span style="font-family:Times,serif;font-size:7.97pt">20M is a conservative estimate based on mid-2003 &#xfb01;gures from the Linux Counter and elsewhere.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:528pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">96</span><i><span style="font-family:Times,serif;font-size:7.97pt">Kmail</span></i><span style="font-family:Times,serif;font-size:7.97pt">, which we looked at in Chapter 6, won&#x2019;t even chase off-site links in HTML for this reason.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">242</span></p>
</div>
