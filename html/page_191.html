<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:209pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 7. Multiprogramming</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Separating Complexity Control from Performance</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:114pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Tuning</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:142pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">First, though, we need to dispose of a few red herrings. Our discussion is</span><i><span style="font-family:Times,serif;font-size:9.963pt"> not</span></i><span style="font-family:Times,serif;font-size:9.963pt"> going to be about using</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:154pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">concurrency to improve performance. Putting that concern before developing a clean architecture</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:166pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that minimizes global complexity is premature optimization, the root of all evil (see Chapter 12 for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:178pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">further discussion).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:200pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A closely related red herring is threads (that is, multiple concurrent processes sharing the same</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:212pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">memory-address space). Threading is a performance hack.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:212pt;left:318pt"><span style="font-family:Times,serif;font-size:9.963pt">To avoid a long diversion here, we&#x2019;ll</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:224pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">examine threads in more detail at the end of this chapter; the summary is that they do not reduce</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:236pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">global complexity but rather</span><i><span style="font-family:Times,serif;font-size:9.963pt"> increase</span></i><span style="font-family:Times,serif;font-size:9.963pt"> it, and should therefore be avoided save under dire necessity.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:258pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Respecting the Rule of Modularity, on the other hand, is</span><i><span style="font-family:Times,serif;font-size:9.963pt"> not</span></i><span style="font-family:Times,serif;font-size:9.963pt"> a red herring; doing so can make your</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:270pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">programs &#x2014; and your life &#x2014; simpler. All the reasons for process partitioning are continuous with</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:282pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the reasons for module partitioning that we developed in Chapter 4.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:304pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Another important reason for breaking up programs into cooperating processes is for better security.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:316pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Under Unix, programs that must be run by ordinary users, but must have write access to security-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:324pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">critical system resources, get that access through a feature called the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> setuid bit</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">66</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">Executable &#xfb01;les</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:340pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">are the smallest unit of code that can hold a setuid bit; thus, every line of code in a setuid executable</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:352pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">must be trusted. (Well-written setuid programs, however, take all necessary privileged actions &#xfb01;rst</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:364pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and then drop their privileges back to user level for the remainder of their existence.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:386pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Usually a setuid program only needs its privileges for one or a small handful of operations.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:386pt;left:452pt"><span style="font-family:Times,serif;font-size:9.963pt">It is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:398pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">often possible to break up such a program into cooperating processes, a smaller one that needs setuid</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:409pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and a larger one that does not.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:409pt;left:202pt"><span style="font-family:Times,serif;font-size:9.963pt">When we can do this, only the code in the smaller program has to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:421pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">be trusted.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:421pt;left:122pt"><span style="font-family:Times,serif;font-size:9.963pt">It is in signi&#xfb01;cant part because this kind of partitioning and delegation is possible that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:430pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix has a better security track record</span><sup><span style="font-family:Times,serif;font-size:6.273pt">67</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">than its competitors.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:456pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Taxonomy of Unix IPC Methods</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:483pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">66</span><span style="font-family:Times,serif;font-size:7.97pt">A setuid program runs not with the privileges of the user calling it, but with the privileges of the owner of the executable.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:493pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">This feature can be used to give restricted, program-controlled access to things like the password &#xfb01;le that nonadministrators</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:502pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">should not be allowed to modify directly.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">67</span><span style="font-family:Times,serif;font-size:7.97pt">That is, a better record measured in security breaches per total machine hours of Internet exposure.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">190</span></p>
</div>
