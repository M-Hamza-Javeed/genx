<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Organizing Backbone Applications &#x2013; Structure, Optimize, and Deploy</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:293pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 116 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var PubSub = _.extend({}, Backbone.Events);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var Application = function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // Do useful stuff here</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">  _.extend(Application.prototype, {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:200pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">    pubsub: new PubSub(),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:213pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">    init: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:225pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">      Backbone.history.start();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:237pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">  });</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:274pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">  return Application;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:286pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:305pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">Application</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> is a simple class with an </span><span style="font-family:CourierStd,serif;font-size:9.5pt">init()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method and a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">PubSub</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> instance. The </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:318pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">init()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method acts as the starting point of the application and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">PubSub</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> works as the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">application-level event manager. You can add more functionality to the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Application</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">class, such as starting and stopping modules and adding a region manager for view </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">layout management. It is advisable to keep this class as short as you can.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:385pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:16pt">Using the module pattern</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:405pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">We often see that </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> intermediate-level developers find it a bit confusing to initially </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:417pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">use a module-based architecture. It can be a little difficult for them to make the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:430pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">transition from a simple MVC architecture to a modular MVC architecture. While  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:443pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the points we are discussing in this chapter are valid for both these architectures, we </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:455pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">should always prefer to use a modular concept in nontrivial applications for better </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:468pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">maintainability and organization.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:489pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">In the directory structure section, we saw how the module consists of a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">main.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:502pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">file, its views, models, and collections</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> all together. The </span><span style="font-family:CourierStd,serif;font-size:9.5pt">main.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> file will define the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:514pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">module and have different methods to manage the other components of that module. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:527pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">It works as the starting point of the module. A simple </span><span style="font-family:CourierStd,serif;font-size:9.5pt">main.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> file will look like the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:540pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">following code:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:561pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// File: main.js</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:585pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">define([</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:598pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &apos;app/modules/user/views/userlist&apos;,</span></p>
</div>
