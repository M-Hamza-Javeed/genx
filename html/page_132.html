<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:227pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 5. Textuality</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">But these na&#xef;ve methods are often unsatisfactory for various reasons, including both the machine-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">interoperability problems we mentioned above and the negative trait of being opaque to other tools.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When the application is a network protocol, economy may demand that an internal data structure</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">(such as, say, a message with source and destination addresses) be serialized not into a single blob of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data but into a series of attempted transactions or messages which the receiving machine may reject</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:160pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">(so that, for example, a large message can be rejected if the destination address is invalid).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Interoperability, transparency, extensibility, and storage or transaction economy: these are the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">important themes in designing &#xfb01;le formats and application protocols.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:386pt"><span style="font-family:Times,serif;font-size:9.963pt">Interoperability and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">transparency demand that we focus such designs on clean data representations, rather than putting</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">convenience of implementation or highest possible performance &#xfb01;rst.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:369pt"><span style="font-family:Times,serif;font-size:9.963pt">Extensibility also favors</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">textual protocols, since binary ones are often harder to extend or subset cleanly.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:421pt"><span style="font-family:Times,serif;font-size:9.963pt">Transaction</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:241pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">economy sometimes pushes in the opposite direction &#x2014; but we shall see that putting that criterion</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:253pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;rst is a form of premature optimization that it is often wise to resist.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Finally, we must note a difference between data &#xfb01;le formats and the run-control &#xfb01;les that are often</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">used to set the startup options of Unix programs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:276pt"><span style="font-family:Times,serif;font-size:9.963pt">The most basic difference is that (with sporadic</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">exceptions like GNU Emacs&#x2019;s con&#xfb01;guration interface) programs don&#x2019;t normally modify their own</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">run-control &#xfb01;les &#x2014; the information &#xfb02;ow is one-way, from &#xfb01;le read at startup time to application</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">settings.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:114pt"><span style="font-family:Times,serif;font-size:9.963pt">Data-&#xfb01;le formats, on the other hand, associate properties with named resources and are</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:335pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">both read and written by their applications. Con&#xfb01;guration &#xfb01;les are generally hand-edited and small,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:346pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">whereas data &#xfb01;les are program-generated and can become arbitrarily large.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:368pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Historically, Unix has related but different sets of conventions for these two kinds of representation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:380pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The conventions for run control &#xfb01;les are surveyed in Chapter 10; only conventions for data &#xfb01;les are</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:392pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">examined in this chapter.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:414pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">The Importance of Being Textual</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:443pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Pipes and sockets will pass binary data as well as text. But there are good reasons the examples we&#x2019;ll</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:455pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">see in Chapter 7 are textual: reasons that hark back to Doug McIlroy&#x2019;s advice quoted in Chapter 1.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:467pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Text streams are a valuable universal format because they&#x2019;re easy for human beings to read, write,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:479pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and edit without specialized tools. These formats are (or can be designed to be) transparent.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:500pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Also, the very limitations of text streams help enforce encapsulation. By discouraging elaborate</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">representations with rich, densely encoded structure, text streams also discourage programs from</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:524pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">being promiscuous with each other about their internal states and help enforce encapsulation. We&#x2019;ll</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">return to this point at the end of Chapter 7 when we discuss RPC.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">131</span></p>
</div>
