<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Models</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 62 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:113pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Validating the data</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:137pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">In Backbone, validation is taken care of by the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">model.validate()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method. By </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:150pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">default, the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Backbone.Model</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> class doesn&apos;t have a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">validate()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method on its own. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:162pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">However, the developers are encouraged to add a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">validate()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method that gets </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:175pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">called by the model every time an attribute is saved or set with </span><span style="font-family:CourierStd,serif;font-size:9.5pt">validate: true</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">passed. A copy of the attributes is sent to the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">validate()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method with all the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:200pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">changed values. Let&apos;s look at a simple data validation:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:222pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var User = Backbone.Model.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:234pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  validation: {    emailRegEx: /^\s*[\w\-\+_]+(\.[\w\- </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    \+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:257pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">},</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:281pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  defaults: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:294pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    name: &apos;&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:306pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    email: &apos;&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:318pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  validate: function (attr) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    if (attr.name.length === 0) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      return &apos;Name is required&apos;;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:404pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    if (attr.email.length === 0) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:416pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      return &apos;Email is required&apos;;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:428pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:453pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    if (!this.validation.emailRegEx.test(attr.email)) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:465pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      return &apos;Please provide a valid email&apos;;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:477pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:489pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:502pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:526pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Define the user view</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:538pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var UserView = Backbone.View.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:551pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  initialize: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:563pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this.model.on(&apos;invalid&apos;, this.handleError, this);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:575pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:600pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  handleError: function (model, error, options) {</span></p>
</div>
