<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:217pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 10. Con&#xfb01;guration</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">desktop. They will all see the same dot&#xfb01;les, but might have different values of</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> COLUMNS</span></tt><span style="font-family:Times,serif;font-size:9.963pt">,</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> LINES</span></tt><span style="font-family:Times,serif;font-size:9.963pt">,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">and</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> TERM</span></tt><span style="font-family:Times,serif;font-size:9.963pt">. (Old-school shell programming used this method extensively; make&#xfb01;les still do.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:71pt"><i><span style="font-family:Times,serif;font-size:9.963pt">A value varies too often for dot&#xfb01;les, but doesn&#x2019;t change on every startup.</span></i><span style="font-family:Times,serif;font-size:9.963pt"> A user-de&#xfb01;ned environment</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">variable may (for example) be used to pass a &#xfb01;le system or Internet location that is the root of a tree</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">of &#xfb01;les that the program should play with. The CVS version-control system interprets the variable</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">CVSROOT</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> this way, for example. Several newsreader clients that fetch news from servers using the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">NNTP protocol interpret the variable</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> NNTPSERVER</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> as the location of the server to query.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:204pt;left:71pt"><i><span style="font-family:Times,serif;font-size:9.963pt">A process-unique override needs to be expressed in a way that doesn&#x2019;t require the command-line</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:216pt;left:71pt"><i><span style="font-family:Times,serif;font-size:9.963pt">invocation to be changed.</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:187pt"><span style="font-family:Times,serif;font-size:9.963pt">A user-de&#xfb01;ned environment variable can be useful for situations in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">which, for whatever reason, it would be inconvenient to have to change an application dot&#xfb01;le or</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">supply command-line options (perhaps it is expected that the application will normally be used</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">inside a shell wrapper or within a make&#xfb01;le).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:260pt"><span style="font-family:Times,serif;font-size:9.963pt">A particularly important context for this sort of use</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">is debugging. Under Linux, for example, manipulating the variable</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> LD_LIBRARY_PATH</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> associated</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with the ld(1) linking loader enables you to change where libraries are loaded from &#x2014; perhaps to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">pick up versions that do buffer-over&#xfb02;ow checking or pro&#xfb01;ling.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In general, a user-de&#xfb01;ned environment variable can be an effective design choice when the value</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">changes often enough to make editing a dot&#xfb01;le each time inconvenient, but not necessarily every</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">time (so always setting the location with a command-line option would also be inconvenient). Such</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:345pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">variables should typically be evaluated</span><i><span style="font-family:Times,serif;font-size:9.963pt"> after</span></i><span style="font-family:Times,serif;font-size:9.963pt"> a local dot&#xfb01;le and be permitted to override settings in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">it.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">There is one traditional Unix design pattern that we do not recommend for new programs. Some-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">times, user-set environment variables are used as a lightweight substitute for expressing a program</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">preference in a run-control &#xfb01;le.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:215pt"><span style="font-family:Times,serif;font-size:9.963pt">The venerable nethack(1) dungeon-crawling game, for exam-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">ple, reads a</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> NETHACKOPTIONS</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> environment variable for user preferences.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:382pt"><span style="font-family:Times,serif;font-size:9.963pt">This is an old-school</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">technique; modern practice would lean toward parsing them from a</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .nethack</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> or</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .nethackrc</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">run-control &#xfb01;le.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The problem with the older style is that it makes tracking where your preference information lives</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:472pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">more dif&#xfb01;cult than it would be if you knew the program had a run-control &#xfb01;le under your home</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">directory. Environment variables can be set anywhere in several different shell run-control &#xfb01;les &#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:496pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">under Linux these are likely to include</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .profile</span></tt><span style="font-family:Times,serif;font-size:9.963pt">,</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .bash_profile</span></tt><span style="font-family:Times,serif;font-size:9.963pt">, and</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .bashrc</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> at least. These</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:508pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;les are cluttered and fragile things, so as the code overhead of having an option-parser has come to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:520pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">seem less signi&#xfb01;cant preference information has tended to migrate out of environment variables into</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">dot&#xfb01;les.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">275</span></p>
</div>
