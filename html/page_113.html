<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 6</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 97 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:126pt;left:177pt"><b><span style="font-family:BookAntiqua,serif;font-size:9.5pt">Avoid callbacks, use custom events</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">This heading doesn&apos;t imply that you should always use events </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:151pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">instead of callback methods. It depends on what the coder intends to </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:163pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">achieve, it&apos;s absolutely an architectural choice. We intend to discuss </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:174pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">this point to understand the cases in which events give much more </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:186pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">flexibility than callbacks. Whenever there is a scenario when you </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:197pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">need to notify others about a certain condition of any task, you will </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:208pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">find that a custom event is a better choice than a callback function. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:220pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">Beginner-level developers often fall into this trap and end up using </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:231pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">a callback method, which generally provides a more private and </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:243pt;left:177pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">isolated approach.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:270pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">In the following section, we will demonstrate the necessity of custom events with a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:283pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">simple example.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:313pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">A simple case study on custom events</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:335pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Assume we have a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Login</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> dialog box, and once the user inputs the username-password </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:348pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">combination and clicks on the </span><b><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Submit</span></b><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> button, a request is sent to the server to validate </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:361pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the login. On successful validation, the user closes the dialog box and does some other </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:373pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">tasks, such as storing cookies, changing the page title, and so on. In such a case, we </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:386pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">generally use a callback method and place all the post-login functionality in it. What </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:398pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">if there are 10 different functions each to be called on separate objects once the login is </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">successful? You may need all of these object references within that callback method to </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:424pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">call the methods one by one. While this can be achieved without any issue, why not just </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:436pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">fire a custom event </span><span style="font-family:CourierStd,serif;font-size:9.5pt">loggedin</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> once the user login is successful? The 10 objects that are </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:449pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">already listening to the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">loggedin</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> event can then call the related methods accordingly:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:470pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var Login = Backbone.View.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:483pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &apos;click #login-btn&apos;: &apos;doLogin&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:495pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  doLogin: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:507pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    var me = this;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // send a login request</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:544pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    $.ajax({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:556pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      url: &apos;/login&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:568pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      method: &apos;POST&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:580pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      data: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:593pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">        username: &apos;foo&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:605pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">        password: &apos;foo&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:617pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:629pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      success: function (response) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:642pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">        me.trigger(&apos;loggedin&apos;, response);</span></p>
</div>
