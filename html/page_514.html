<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:230pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 20. Futures</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">session, such as an</span><i><span style="font-family:Times,serif;font-size:9.963pt"> xterm</span></i><span style="font-family:Times,serif;font-size:9.963pt"> or</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Emacs</span></i><span style="font-family:Times,serif;font-size:9.963pt"> job, from one terminal and re-attach it to another (which could</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">be of a different type).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">As Unix usage has shifted to X displays and terminal emulators, job control has become relatively</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">less important, and this issue does not have quite the force it once did. It is still annoying that there</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">is no suspend/attach/detach, however; this feature could be useful for saving the state of terminal</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">sessions between logins.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">A common open-source program called screen(1) solves several of these problems.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">158</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">However,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">since it has to be called explicitly by the user, its facilities are not guaranteed to be present in every</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">terminal session; also, the kernel-level code that overlaps with it in function has not been removed.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:238pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Unix API Doesn&#x2019;t Use Exceptions</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:260pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">C lacks a facility for throwing named exceptions with attached data.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">159</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">Thus, the C functions in the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:276pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix API indicate errors by returning a distinguished value (usually -1 or a NULL character pointer)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:288pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and setting a global errno variable.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:310pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In retrospect, this is the source of many subtle errors. Programmers in a hurry often neglect to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:322pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">check return values.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:322pt;left:167pt"><span style="font-family:Times,serif;font-size:9.963pt">Because no exception is thrown, the Rule of Repair is violated; program</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:334pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb02;ow continues until the error condition manifests as some kind of failure or data corruption later in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:346pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">execution.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:368pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The absence of exceptions also means that some tasks which ought to be simple idioms &#x2014; like</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:380pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">aborting from a signal handler on a version with Berkeley-style signals &#x2014; have to be performed</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with code that is complex, subject to portability glitches, and bug-prone.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This problem can be (and normally is) hidden by bindings of the Unix API in languages such as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Python or Java that have exceptions.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:447pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The lack of exceptions is actually an indicator of a problem with larger immediate implications;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:459pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">C&#x2019;s weak type ontology makes communication between higher-level languages implemented in it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:471pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">problematic.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:471pt;left:136pt"><span style="font-family:Times,serif;font-size:9.963pt">Most of the more modern languages, for example, have lists and dictionaries as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:491pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">158</span><span style="font-family:Times,serif;font-size:7.97pt">There is a project site for screen(1) at http://www.math.fu-berlin.de/~guckes/screen/.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:500pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">159</span><span style="font-family:Times,serif;font-size:7.97pt">For nonprogrammers,</span><i><span style="font-family:Times,serif;font-size:7.97pt"> throwing an exception</span></i><span style="font-family:Times,serif;font-size:7.97pt"> is a way for a program to bail out in the middle of a procedure. It&#x2019;s not quite</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:510pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">an exit because the throw can be intercepted by catcher code in an enclosing procedure. Exceptions are normally used to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:519pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">signal errors or unexpected conditions that mean it would be pointless to try to continue normal processing.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">513</span></p>
</div>
