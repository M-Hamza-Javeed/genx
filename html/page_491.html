<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:219pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 19. Open Source</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Therefore: Use the GNU autotools to handle portability issues, do system-con&#xfb01;guration probes, and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">tailor your make&#xfb01;les.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:170pt"><span style="font-family:Times,serif;font-size:9.963pt">People building from sources today expect to be able to type</span><b><span style="font-family:Times,serif;font-size:9.963pt"> con&#xfb01;gure;</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><b><span style="font-family:Times,serif;font-size:9.963pt">make; make install</span></b><span style="font-family:Times,serif;font-size:9.963pt"> and get a clean build &#x2014; and rightly so. There is a good tutorial on these tools</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">[http://seul.org/docs/autotut/].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">autoconf</span></i><span style="font-family:Times,serif;font-size:9.963pt"> and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> autoheader</span></i><span style="font-family:Times,serif;font-size:9.963pt"> are mature.</span><i><span style="font-family:Times,serif;font-size:9.963pt"> automake</span></i><span style="font-family:Times,serif;font-size:9.963pt">, as we&#x2019;ve previously noted, is still buggy and brittle</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">as of mid-2003; you may have to maintain your own</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> Makefile.in</span></tt><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:368pt"><span style="font-family:Times,serif;font-size:9.963pt">Fortunately it&#x2019;s the least</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">important of the autotools.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Regardless of your approach to con&#xfb01;guration, do not ask the user for system information at compile-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">time. The user installing the package does not know the answers to your questions, and this approach</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is doomed from the start. The software must be able to determine for itself any information that it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">may need at compile- or install-time.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">But</span><i><span style="font-family:Times,serif;font-size:9.963pt"> autoconf</span></i><span style="font-family:Times,serif;font-size:9.963pt"> should not be regarded as a license for knob-ridden designs. If at all possible, program</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to standards like POSIX and refrain also from asking the system for con&#xfb01;guration information.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Keep ifdefs to a minimum &#x2014; or, better yet, have none at all.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:307pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt">Test your code before release.</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A good test suite allows the team to easily run regression tests before releases. Create a strong,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">usable test framework so that you can incrementally add tests to your software without having to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">train developers in the specialized intricacies of the test suite.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Distributing the test suite allows the community of users to test their ports before contributing them</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">back to the group.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Encourage your developers to use a wide variety of platforms as their desktop and test machines, so</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that code is continuously being tested for portability &#xfb02;aws as part of normal development.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:445pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">It is good practice, and encourages con&#xfb01;dence in your code, when it ships with the test suite you</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:457pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">use, and that test suite can be run with</span><b><span style="font-family:Times,serif;font-size:9.963pt"> make test</span></b><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:479pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt">Sanity-check your code before release.</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:503pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">By &#x201c;sanity check&#x201d; we mean: use every tool available that has a reasonable chance of catching errors</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:515pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a human would be prone to overlook. The more of these you catch with tools, the fewer your users</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:527pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and you will have to contend with.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">490</span></p>
</div>
