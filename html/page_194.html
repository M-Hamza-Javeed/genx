<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:209pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 7. Multiprogramming</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Normally these streams are connected to the user&#x2019;s keyboard and display, respectively. But Unix</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">shells universally support</span><i><span style="font-family:Times,serif;font-size:9.963pt"> redirection</span></i><span style="font-family:Times,serif;font-size:9.963pt"> operations which connect these standard input and output</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">streams to &#xfb01;les. Thus, typing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:157pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">ls &gt;foo</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">sends the output of the directory lister ls(1) to a &#xfb01;le named &#x2018;foo&#x2019;. On the other hand, typing:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:221pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">wc &lt;foo</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:252pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">causes the word-count utility wc(1) to take its standard input from the &#xfb01;le &#x2018;foo&#x2019;, and deliver a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:264pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">character/word/line count to standard output.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:286pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The pipe operation connects the standard output of one program to the standard input of another. A</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:298pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">chain of programs connected in this way is called a</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pipeline</span></i><span style="font-family:Times,serif;font-size:9.963pt">. If we write</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">ls | wc</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:362pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">we&#x2019;ll see a character/word/line count for the current directory listing. (In this case, only the line</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:374pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">count is really likely to be useful.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:396pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">One favorite pipeline was &#x201c;</span><b><span style="font-family:Times,serif;font-size:9.963pt">bc | speak</span></b><span style="font-family:Times,serif;font-size:9.963pt">&#x201d;&#x2014;a talking desk calculator.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:396pt;left:400pt"><span style="font-family:Times,serif;font-size:9.963pt">It knew</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:408pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">number names up to a vigintillion.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:420pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:432pt;left:301pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;DougMcIlroy&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:454pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">It&#x2019;s important to note that all the stages in a pipeline run concurrently. Each stage waits for input on</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:466pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the output of the previous one, but no stage has to exit before the next can run. This property will</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:478pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">be important later on when we look at interactive uses of pipelines, like sending the lengthy output</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:490pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of a command to more(1).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:511pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">It&#x2019;s easy to underestimate the power of combining pipes and redirection. As an instructive example,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:523pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">The Unix Shell As a 4GL</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Schaffer-Wolf] shows that with these facilities as a framework, a handful of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">193</span></p>
</div>
