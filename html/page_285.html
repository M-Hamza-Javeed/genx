<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:217pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 10. Con&#xfb01;guration</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">How to Choose among the Methods</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:123pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We&#x2019;ve looked in turn at system and user run-control &#xfb01;les, at environment variables, and at command-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:135pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">line arguments. Observe the progression from least easily changed to most easily changed. There is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:147pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a strong convention that well-behaved Unix programs that use more than one of these places should</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:159pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">look at them in the order given, allowing later settings to override earlier ones (there are speci&#xfb01;c</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:171pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">exceptions, such as command-line options that specify where a dot&#xfb01;le should be found).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In particular, environment settings usually override dot&#xfb01;le settings, but can be overridden by</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">command-line options. It is good practice to provide a command-line option like the</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> -e</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> of make(1)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that can override environment settings or declarations in run-control &#xfb01;les; that way the program</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">can be scripted with well-de&#xfb01;ned behavior regardless of the way the run-control &#xfb01;les look or</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:241pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">environment variables are set.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Which of these places you choose to look at depends on how much persistent con&#xfb01;guration state</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">your program needs to keep around between invocations. Programs designed mainly to be used in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a batch mode (as generators or &#xfb01;lters in pipelines, for example) are usually completely con&#xfb01;gured</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with command-line options. Good examples of this pattern include ls(1), grep(1) and sort(1). At</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the other extreme, large programs with complicated interactive behavior may rely entirely on run-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">control &#xfb01;les and environment variables, and normal use involves few command-line options or none</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:335pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">at all. Most X window managers are a good example of this pattern.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">(Unix has the capability for the same &#xfb01;le to have multiple names or &#x2018;links&#x2019;. At startup time, every</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:368pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">program has available to it the &#xfb01;lename through which it was called. One other way to signal to a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:380pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">program that has several modes of operation which one it should come up in is to give it a link for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:392pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">each mode, have it &#xfb01;nd out which link it was called through, and change its behavior accordingly.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:404pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">But this technique is generally considered unclean and seldom used.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:426pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Let&#x2019;s look at a couple of programs that gather con&#xfb01;guration data from all three places. It will be</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:438pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">instructive to consider why, for each given piece of con&#xfb01;guration data, it is collected as it is.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Case Study:</span></b><b><i><span style="font-family:Helvetica,sans-serif;font-size:13.948pt"> fetchmail</span></i></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:487pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> program uses only two environment variables,</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> USER</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> and</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> HOME</span></tt><span style="font-family:Times,serif;font-size:9.963pt">. These variables are in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:499pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the prede&#xfb01;ned set initialized by the system; many programs use them.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:521pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The value of</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> HOME</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> is used to &#xfb01;nd the dot&#xfb01;le</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .fetchmailrc</span></tt><span style="font-family:Times,serif;font-size:9.963pt">, which contains con&#xfb01;guration</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:533pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">information in a fairly elaborate syntax obeying the shell-like lexical rules described above. This</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">284</span></p>
</div>
