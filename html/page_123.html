<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">bug-prone part of a browser. It attracts into itself kluges to address problems that originate both in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the HTML parsing (because there is a lot of ill-formed markup out there) and the GUI toolkit (which</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">may not have quite the primitives that are really needed).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A Web browser&#x2019;s glue layer has to mediate not merely between speci&#xfb01;cation and domain primitives,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">but between several different external speci&#xfb01;cations: the network behavior standardized in HTTP,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">HTML document structure, and various graphics and multimedia formats as well as the users&#x2019;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">behavioral expectations from the GUI.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">And one single bug-prone glue layer is not the worst fate that can befall a design. A designer who</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is aware that the glue layer exists, and tries to organize it into a middle layer around its own set of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data structures or objects, can end up with</span><i><span style="font-family:Times,serif;font-size:9.963pt"> two</span></i><span style="font-family:Times,serif;font-size:9.963pt"> layers of glue &#x2014; one above the midlayer and one</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">below. Programmers who are bright but unseasoned are particularly apt to fall into this trap; they&#x2019;ll</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">get each fundamental set of classes (application logic, midlayer, and domain primitives) right and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">make them look like the textbook examples, only to &#xfb02;ounder as the multiple layers of glue needed</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to integrate all that pretty code get thicker and thicker.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The thin-glue principle can be viewed as a re&#xfb01;nement of the Rule of Separation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:423pt"><span style="font-family:Times,serif;font-size:9.963pt">Policy (the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">application logic) should be cleanly separated from mechanism (the domain primitives), but if there</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is a lot of code that is neither policy nor mechanism, chances are that it is accomplishing very little</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">besides adding global complexity to the system.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Case Study: C Considered as Thin Glue</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:382pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The C language itself is a good example of the effectiveness of thin glue.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In the late 1990s, Gerrit Blaauw and Fred Brooks observed in</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Computer Architecture: Concepts</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">and Evolution</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [BlaauwBrooks] that the architectures in every generation of computers, from early</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">mainframes through minicomputers through workstations through PCs, had tended to converge.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The later a design was in its technology generation, the more closely it approximated what Blaauw</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:451pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&amp; Brooks called the &#x201c;classical architecture&#x201d;: binary representation, &#xfb02;at address space, a distinction</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:463pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">between memory and working store (registers), general-purpose registers, address resolution to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:471pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;xed-length bytes, two-address instructions, big-endianness,</span><sup><span style="font-family:Times,serif;font-size:6.273pt">46</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">and data types a consistent set with</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:487pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">sizes a multiple of either 4 or 6 bits (the 6-bit families are now extinct).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:507pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">46</span><span style="font-family:Times,serif;font-size:7.97pt">The terms</span><i><span style="font-family:Times,serif;font-size:7.97pt"> big-endian</span></i><span style="font-family:Times,serif;font-size:7.97pt"> and</span><i><span style="font-family:Times,serif;font-size:7.97pt"> little-endian</span></i><span style="font-family:Times,serif;font-size:7.97pt"> refer to architectural choices about the order in which bits are interpreted within a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">machine word. Though it has no canonical location, a Web search for</span><i><span style="font-family:Times,serif;font-size:7.97pt"> On Holy Wars and a Plea for Peace</span></i><span style="font-family:Times,serif;font-size:7.97pt"> should turn up a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:526pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">classic and entertaining paper on this subject.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">122</span></p>
</div>
