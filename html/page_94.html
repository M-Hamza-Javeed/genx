<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Collections</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 78 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">A </span><span style="font-family:CourierStd,serif;font-size:9.5pt">sort</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> event is always fired when there is a comparator present in the collection </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and you add some data to it. It also gets fired when you specifically call the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">sort()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">method on the collection.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:174pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Filtering a collection</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:197pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Filtering a collection is a fairly simple concept; here we want to get a part of the data </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:210pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">based on a certain criteria. For example, if you have a list of items and you want to </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:223pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">filter the list to only show a subset of all the items, you filter the attached collection. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:235pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">By default, Backbone provides some built-in functions that take care of basic filtering. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:248pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The two methods </span><span style="font-family:CourierStd,serif;font-size:9.5pt">where()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">findWhere()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> produce similar functionality, though </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:260pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">findWhere()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> only returns the first model that matches the condition.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:291pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Performing basic filtering</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:313pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The </span><span style="font-family:CourierStd,serif;font-size:9.5pt">where()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method accepts a set of model attributes and returns an array of the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:326pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">matched models.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:347pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var users = new Backbone.Collection([</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:360pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  { name: &apos;John&apos;, company: &apos;A&apos; }, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:372pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  { name: &apos;Bill&apos;, company: &apos;B&apos; }, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:384pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  { name: &apos;Rick&apos;, company: &apos;A&apos; }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:396pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">]);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:421pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">users.where({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:433pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  company: &apos;A&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:445pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:465pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The result will be an array of two models that have </span><span style="font-family:CourierStd,serif;font-size:9.5pt">A</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> as their company. However, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:477pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">note that filtering the collection does not change the original collection data at all; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:490pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">instead, it just returns an array with the results. If there is a Backbone view that is </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:502pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">displaying the collection data as a list, filtering the collection will not have any effect </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:515pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">on the list.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">So, how are we going to resolve this? One simple task can be done&#x2014;let&apos;s reset the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:549pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">collection with the filtered data and re-render the list. The following code will work </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:561pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">fine and the collection will only have the filtered data with it:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:583pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var filteredData = users.where({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:595pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  company: &apos;A&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:607pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:632pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Reset the collection with array with filtered data</span></p>
</div>
