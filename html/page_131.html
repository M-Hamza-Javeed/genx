<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:92pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:24.79pt">Chapter 5. Textuality</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:125pt;left:24pt"><b><i><span style="font-family:Helvetica,sans-serif;font-size:14.346pt">Good Protocols Make Good Practice</span></i></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">It&#x2019;s a well-known fact that computing devices such as the abacus were invented thousands of years</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:163pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">ago. But it&#x2019;s not well known that the &#xfb01;rst use of a common computer protocol occurred in the Old</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:175pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Testament. This, of course, was when Moses aborted the Egyptians&#x2019; process with a control-sea.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:187pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">--</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:199pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;TomGalloway&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:212pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.966pt">rec.arts.comics</span></i></tt><i><span style="font-family:Times,serif;font-size:9.963pt">, February 1992</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:233pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In this chapter, we&#x2019;ll look at what the Unix tradition has to tell us about two different kinds of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">design that are closely related: the design of &#xfb01;le formats for retaining application data in permanent</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:257pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">storage, and the design of application protocols for passing data and commands between cooperating</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:269pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">programs, possibly over a network.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:290pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">What uni&#xfb01;es these two kinds of design is that they both involve the serialization of in-memory data</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:302pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">structures.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:302pt;left:124pt"><span style="font-family:Times,serif;font-size:9.963pt">For the internal operation of computer programs, the most convenient representation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:314pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of a complex data structure is one in which all &#xfb01;elds have the machine&#x2019;s native data format (e.g.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:326pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">two&#x2019;s-complement binary for integers) and all pointers are actual memory addresses (as opposed,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:338pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">say, to being named references).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:338pt;left:220pt"><span style="font-family:Times,serif;font-size:9.963pt">But these representations are not well suited to storage and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:350pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">transmission; memory addresses in the data structure lose their meaning outside memory, and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:362pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">emitting raw native data formats causes interoperability problems passing data between machines</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:374pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with different conventions (big- vs. little-endian, say, or 32-bit vs. 64-bit).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:395pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">For transmission and storage, the traversable, quasi-spatial layout of data structures like linked lists</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:407pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">needs to be &#xfb02;attened or serialized into a byte-stream representation from which the structure can</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:419pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">later be recovered.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:419pt;left:163pt"><span style="font-family:Times,serif;font-size:9.963pt">The serialization (save) operation is sometimes called</span><i><span style="font-family:Times,serif;font-size:9.963pt"> marshaling</span></i><span style="font-family:Times,serif;font-size:9.963pt"> and its</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:431pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">inverse (load) operation</span><i><span style="font-family:Times,serif;font-size:9.963pt"> unmarshaling</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:431pt;left:242pt"><span style="font-family:Times,serif;font-size:9.963pt">These terms are usually applied with respect to objects</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:443pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">in an OO language like C++ or Python or Java, but could be used with equal justice of operations</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:455pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">like loading a graphics &#xfb01;le into the internal storage of a graphics editor and saving it out after</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:467pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">modi&#xfb01;cations.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:488pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">A signi&#xfb01;cant percentage of what C and C++ programmers maintain is ad-hoc code for marshaling</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:500pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">and unmarshaling operations &#x2014; even when the serialized representation chosen is as simple as a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">binary structure dump (a common technique under non-Unix environments).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:393pt"><span style="font-family:Times,serif;font-size:9.963pt">Modern languages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:524pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">like Python and Java tend to have built-in unmarshal and marshal functions that can be applied to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">any object or byte-stream representing an object, and that reduce this labor substantially.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">130</span></p>
</div>
