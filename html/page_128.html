<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Organizing Backbone Applications &#x2013; Structure, Optimize, and Deploy</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:293pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 112 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // We assume the backbone file here is a non-AMD file</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">    backbone: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">      exports: &apos;Backbone&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">      deps: [&apos;underscore&apos;, &apos;jquery&apos;]</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:176pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:125pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:207pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">We call the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">require.config()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method in the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">data-main</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> entry file and pass a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:220pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">configuration object with a set of properties to it. There are quite a number of </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:233pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">properties that can go as config options, but we will discuss only those that are the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">most important at this point. You can find a complete list in the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">require.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> API </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:258pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">(</span><span style="font-family:CourierStd,serif;font-size:9.5pt">http://requirejs.org/docs/api.html</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">):</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:279pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:279pt;left:144pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">baseUrl</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">: This config defines the root path so you do not need to include it </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:292pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">every time in your file paths.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:126pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:144pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">paths</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">: This </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">config specifies the shortcut alias of each file and the paths to the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:144pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">files are given relative to </span><span style="font-family:CourierStd,serif;font-size:9.5pt">baseUrl</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:338pt;left:126pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:338pt;left:144pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">shim</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">: This </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">config should be used only for the non-AMD files, that is, the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:351pt;left:144pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">scripts that do not already call the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">define()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method. It will not work </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:363pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">properly for AMD files.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:380pt;left:126pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:380pt;left:144pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">exports</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">: This </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">config is the global variable name of that module.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:397pt;left:126pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:397pt;left:144pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">deps</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">: This</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> config is an array of dependencies that must be loaded first before </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:410pt;left:144pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the respective module loads.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:431pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">You need to </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">look for the AMD-enabled version of the library files if you want to use </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:444pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">them directly. Otherwise, you have to go via the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">shim</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> option.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:474pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Defining a module</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:497pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">RequireJS provides two important methods&#x2014;</span><span style="font-family:CourierStd,serif;font-size:9.5pt">define()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">require()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">, which </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:509pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">facilitate module definition and dependency loading respectively. The </span><span style="font-family:CourierStd,serif;font-size:9.5pt">define()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:522pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">method takes an optional module ID, an optional array that includes the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:534pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">dependencies that this module may require, and a function that gets executed in </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:547pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">order to instantiate the module. The most basic module definition of a Backbone </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:560pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">model will look like this:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// File: app/models/user.js </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:605pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">define([</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:618pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">     &apos;jquery&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:630pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">     &apos;underscore&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:642pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">     &apos;backbone&apos;</span></p>
</div>
