<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 7</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:294pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 111 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">AMD is a mechanism </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">used to define a module such that the module and its </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">dependencies can be asynchronously loaded. So, multiple AMD modules can be </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">loaded in parallel, and once the last dependent module is loaded, the main module </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:153pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">will execute. In addition, AMD omits the use of global variables by encapsulating the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:165pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">module definition, and provides a way to load multiple modules into one file and </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:178pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">obviates the need for explicit namespacing.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:199pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Presently, the most popular script loader that supports AMD is Require.js  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:212pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">(</span><span style="font-family:CourierStd,serif;font-size:9.5pt">http://requirejs.org</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">). It provides an implementation of the module patterns </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:224pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and allows us to create a centrally-managed dependency mapping using its map </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:237pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">configuration. Discussing Require.js in detail is beyond the scope of this chapter. </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">So, if you want to get a complete overview of the concept, we recommend you  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:262pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">visit their website first before proceeding to the following sections.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:293pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Adding Require.js to your project</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:315pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">While </span><span style="font-family:CourierStd,serif;font-size:9.5pt">require.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> loads all the modules of your </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">application, it is the only file that </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:328pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">you need to include in your </span><span style="font-family:CourierStd,serif;font-size:9.5pt">index.html</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> file. Add the following script tag within the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:340pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">HEAD</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> tag:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:362pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;script data-main=&quot;app/main&quot; src=&quot;libs/require.js&quot;&gt;&lt;/script&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The </span><span style="font-family:CourierStd,serif;font-size:9.5pt">data-main</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> attribute</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> specifies the JavaScript file that will act as the starting point </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">of the application. In this case, it is our </span><span style="font-family:CourierStd,serif;font-size:9.5pt">main.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> file. Once the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">require.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> file is </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:406pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">loaded, it looks into the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">data-main</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> attribute&apos;s entry point and loads that script. We </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:419pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">are going to add the entire </span><span style="font-family:CourierStd,serif;font-size:9.5pt">require.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> configuration to this file along with all of the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:431pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">libraries and their dependencies. You do not need to add a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> extension to any file </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:444pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">as RequireJS automatically appends that.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:475pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Configuring dependencies</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:497pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">We are </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">going to add all the library files in the RequireJS config option, along with </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:509pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">their paths and dependencies, to the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">main.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> file:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:531pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// File: app/main.js</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:555pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">require.config({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:568pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  baseUrl: &apos;libs&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:580pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  paths: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:592pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    jquery: &apos;jquery&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:604pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    underscore: &apos;underscore/underscore&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:616pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    backbone: &apos;backbone/backbone&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:629pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:641pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  shim: {</span></p>
</div>
