<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 11. Interfaces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Many programs that might appear at &#xfb01;rst glance to be sinks take control information as well as data</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">on standard input and are actually instances of something like the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> ed</span></i><span style="font-family:Times,serif;font-size:9.963pt"> pattern (see below).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The term</span><i><span style="font-family:Times,serif;font-size:9.963pt"> sponge</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is sometimes applied speci&#xfb01;cally to sink programs like sort(1) that must read their</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">entire input before they can process any of it.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:168pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The term &#x2018;sink&#x2019; is traditional and common.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:190pt;left:71pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Compiler Pattern</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:216pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Compiler-like programs use neither standard output nor standard input; they may issue error</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:228pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">messages to standard error, however. Instead, a compiler-like program takes &#xfb01;le or resource names</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:240pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">from the command line, transforms the names of those resources in some way, and emits output</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:252pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">under the transformed names. Like cantrips, compiler-like programs do not require user interaction</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:264pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">after startup time.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:286pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">This pattern is so named because its paradigm is the C compiler, cc(1) (or, under Linux and many</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:298pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">other modern Unixes, gcc(1)). But it is also widely used for programs that do (for example) graphics</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:310pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;le conversions or compression/decompression.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:332pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">A good example of the former is the gif2png(1) program used to convert GIF (Graphic Interchange</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:340pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Format) to PNG (Portable Network Graphics).</span><sup><span style="font-family:Times,serif;font-size:6.273pt">108</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">Good examples of the latter are the gzip(1) and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">gunzip(1) GNU compression utilities, almost certainly shipped with your Unix system.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:378pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In general, the compiler interface design pattern is a good model when your program often needs to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">operate on multiple named resources and can be written to have low interactivity (with its control</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">information supplied at startup time). Compiler-like programs are readily scriptable.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The term &#x201c;compiler-like interface&#x201d; for this pattern is well-understood in the Unix community.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:446pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The</span></b><b><i><span style="font-family:Helvetica,sans-serif;font-size:13.948pt"> ed</span></i></b><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt"> pattern</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:472pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">All the previous patterns have very low interactivity; they use only control information passed in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">at startup time, and separate from the data. Many programs, of course, need to be driven by a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:496pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">continuing dialog with the user after startup time.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">108</span><span style="font-family:Times,serif;font-size:7.97pt">Sources for this program,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:179pt"><span style="font-family:Times,serif;font-size:7.97pt">and other converters with similar interfaces,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:344pt"><span style="font-family:Times,serif;font-size:7.97pt">are available at the PNG website</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:525pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">[http://www.cdrom.com/pub/png/].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">306</span></p>
</div>
