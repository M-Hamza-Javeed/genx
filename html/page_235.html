<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:218pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 8. Minilanguages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">With these as clues and one eye on the actual diagram, the meaning of the remaining pieces of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the syntax (position references like</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> M.s</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> and constructions like</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> last arrow</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> or</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> at 0.25 between</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">M.e and I.e</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> or the addition of vector offsets to a location) should become rapidly apparent. As</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with Glade markup and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> m4</span></i><span style="font-family:Times,serif;font-size:9.963pt">, an example like this one can teach a good bit of the language without</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">any reference to a manual (a compactness property troff(1) markup, unfortunately, does</span><i><span style="font-family:Times,serif;font-size:9.963pt"> not</span></i><span style="font-family:Times,serif;font-size:9.963pt"> have).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The example of pic(1) re&#xfb02;ects a common design theme in minilanguages, which we also saw</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">re&#xfb02;ected in Glade &#x2014; the use of a minilanguage interpreter to encapsulate some form of constraint-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">based reasoning and turn it into actions. We could actually choose to view pic(1) as an imperative</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">language rather than a declarative one; it has elements of both, and the dispute would quickly grow</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">theological.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The combination of macros with constraint-based layout gives pic(1) the ability to express the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">structure of diagrams in a way that more modern vector-based markups like SVG cannot.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:451pt"><span style="font-family:Times,serif;font-size:9.963pt">It is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">therefore fortunate that one effect of the Documenter&#x2019;s Workbench design is to make it relatively</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">easy to keep pic(1) useful outside the DWB context. The</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pic2graph</span></i><span style="font-family:Times,serif;font-size:9.963pt"> script we used as a case study</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">in Chapter 7 was an ad-hoc way to accomplish this, using the retro&#xfb01;tted PostScript capability of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">groff(1) as a half-way step to a modern bitmap format.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">A cleaner solution is the pic2plot(1) utility distributed with the GNU plotutils package, which</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">exploited the internal modularity of the GNU pic(1) code.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:328pt"><span style="font-family:Times,serif;font-size:9.963pt">The code was split into a parsing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:345pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">front end and a back end that generated troff markup, the two communicating through a layer of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">drawing primitives. Because this design obeyed the Rule of Modularity,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pic2plot(1)</span></i><span style="font-family:Times,serif;font-size:9.963pt"> implementers</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:369pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">were able to split off the GNU</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pic</span></i><span style="font-family:Times,serif;font-size:9.963pt"> parsing stage and reimplement the drawing primitives using a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">modern plotting library.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:179pt"><span style="font-family:Times,serif;font-size:9.963pt">Their solution has the disadvantage, however, that text in the output is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">generated with fonts built into</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pic2plot</span></i><span style="font-family:Times,serif;font-size:9.963pt"> that won&#x2019;t match those of troff.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:71pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Case Study:</span></b><b><i><span style="font-family:Helvetica,sans-serif;font-size:13.948pt"> fetchmail</span></i></b><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt"> Run-Control Syntax</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:441pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">See Example 8.5 for an example.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:464pt;left:71pt"><b><span style="font-family:Times,serif;font-size:11.955pt">Example 8.5. Synthetic example of a</span></b><tt><b><span style="font-family:Courier,monospace;font-size:10.76pt"> fetchmailrc</span></b></tt><b><span style="font-family:Times,serif;font-size:11.955pt">.</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:499pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt"># Poll this site first each cycle.</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:510pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">poll pop.provider.net proto pop3</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:521pt;left:87pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">user &quot;jsmith&quot; with pass &quot;secret1&quot; is &quot;smith&quot; here</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:531pt;left:87pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">user jones with pass &quot;secret2&quot; is &quot;jjones&quot; here with options keep</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">234</span></p>
</div>
