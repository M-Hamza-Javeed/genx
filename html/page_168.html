<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:221pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 6. Transparency</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">knowledgeable people on the fetchmail mailing list &#x2014; in fact, because most bugs are easy to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">diagnose, I seldom have to handle them myself.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Over the years,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> has acquired a reputation as a rather bulletproof program.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:431pt"><span style="font-family:Times,serif;font-size:9.963pt">It can be</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">miscon&#xfb01;gured, but it very seldom outright breaks. Betting that this has nothing to do with the fact</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">that the exact circumstances of eight out of ten bugs are rapidly discoverable would not be smart.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:179pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">We can learn from this example.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:179pt;left:219pt"><span style="font-family:Times,serif;font-size:9.963pt">The lesson is this:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:179pt;left:304pt"><span style="font-family:Times,serif;font-size:9.963pt">Don&#x2019;t let your debugging tools be mere</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:191pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">afterthoughts or treat them as throwaways. They are your windows into the code; don&#x2019;t just knock</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">crude holes in the walls, &#xfb01;nish and glaze them.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:274pt"><span style="font-family:Times,serif;font-size:9.963pt">If you plan to keep the code maintained, you&#x2019;re</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">always going to need to let light into it.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:238pt;left:71pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Case Study: GCC</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:264pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">GCC, the GNU C compiler used on most modern Unixes, is perhaps an even better example of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:276pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">engineering for transparency. GCC is organized as a sequence of processing stages knit together by</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:288pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">a driver program. The stages are: preprocessor, parser, code generator, assembler, and linker.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:310pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">Each of the &#xfb01;rst three stages takes in a readable textual format and emits a readable textual format</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:322pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">(the assembler has to emit and the linker to accept binary formats, pretty much by de&#xfb01;nition).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:334pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">With various command-line options of the gcc(1) driver, you can see not just the results after C</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:346pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">preprocessing, after assembly generation, and after object code generation &#x2014; but you can also</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:358pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">monitor the results of many intermediate steps in parsing and code generation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:380pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">This is exactly the structure of cc, the &#xfb01;rst (PDP-11) C compiler.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:296pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;KenThompson&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">There are many bene&#xfb01;ts of this organization.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:276pt"><span style="font-family:Times,serif;font-size:9.963pt">One that is particularly important for GCC is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">regression testing.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">60</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:162pt"><span style="font-family:Times,serif;font-size:9.963pt">Because most of the various intermediate formats are textual, deviations</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:449pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">from expected results in a regression test are easily spotted and analyzed using simple textual diff</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:461pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">operations on the intermediate results; there is no need for specialist dump-analysis tools that may</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">well harbor their own bugs, and in any case would represent an additional maintenance burden.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:493pt;left:71pt"><span style="font-family:Times,serif;font-size:5.018pt">60</span><span style="font-family:Times,serif;font-size:7.97pt">Regression testing is a method for detecting bugs introduced as software is modi&#xfb01;ed. It consists of periodically checking</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:502pt;left:71pt"><span style="font-family:Times,serif;font-size:7.97pt">the output of the changing software for some &#xfb01;xed test input against a snapshot of output captured at an earlier stage of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:71pt"><span style="font-family:Times,serif;font-size:7.97pt">process and known (or assumed) to be correct.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">167</span></p>
</div>
