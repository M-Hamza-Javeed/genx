<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 8</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:293pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 135 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">We use the same </span><span style="font-family:CourierStd,serif;font-size:9.5pt">User</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> model here and create a mock with a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">User</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> instance. Then we </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">set the expectation on the mock to see whether the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">getNameAsArray()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method is </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">called only once on that </span><span style="font-family:CourierStd,serif;font-size:9.5pt">User</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> instance. All these expectations are set beforehand and </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:153pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">we verify them all together at the end.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:16pt">Difference between mocks and stubs</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:202pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Now, because stubs and mocks are similar in functionality, you may wonder why </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:214pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and when you should use a mock instead of a stub. As given by the website, you </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">would use a mock only when you want to provide both alternate functionality and </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">an expectation in your test. The main difference you can see is as follows:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Mock objects are used to define expectations, that is, in a particular scenario, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">we expect the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Foo()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method to be called with a set of parameters. Mock </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:286pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">records and verifies such expectations that whether the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">foo()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:144pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">actually got called with those parameters or not.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:315pt;left:126pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:315pt;left:144pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Stubs, on the other hand, have a different purpose&#x2014;they do not record or </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:328pt;left:144pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">verify expectations, but rather allow us to &quot;replace&quot; the behavior and the state </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:341pt;left:144pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">of the &quot;fake&quot; object in order to utilize a test scenario.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:362pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">To test the life cycle with stubs, proceed with the following steps:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:383pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">1. Set up data: Prepare the object that is being tested and its stubs collaborators.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:400pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">2. Exercise: Test the functionality.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:417pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">3. Verify state: Use asserts to check the object&apos;s state.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:434pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">4. Teardown: Clean up the resources.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:455pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">To test the life cycle with mocks, proceed with the following steps:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:476pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">1. Set up data: Prepare object that is being tested.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:493pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">2. Set up expectations: Prepare expectations in a mock that is being used by the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:506pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">primary object.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:523pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">3. Exercise: Test the functionality.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:540pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">4. Verify expectations: Verify that correct methods have been invoked  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:552pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">in the mock.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:569pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">5. Verify state: Use asserts to check the object&apos;s state.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:586pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">6. Teardown: Clean up the resources.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:607pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">As you can see, there are pre and post states for a mock. We set the expectation </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:620pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">before the test and verify it afterwards. Anyway, the purpose of both stub and mock </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:633pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">is to eliminate testing all the dependencies of a class or function so that your tests are </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:645pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">more focused and simple in what they are trying to prove.</span></p>
</div>
