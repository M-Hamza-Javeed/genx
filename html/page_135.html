<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:227pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 5. Textuality</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:102pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">ftp:*:14:50:FTP User:/home/ftp:</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:113pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">esr:0SmFuPnH5JlNs:23:23:Eric S. Raymond:/home/esr:</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:123pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">nobody:*:99:99:Nobody:/:</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:154pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Without even knowing anything about the semantics of the &#xfb01;elds, we can notice that it would be</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:166pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">hard to pack the data much tighter in a binary format. The colon sentinel characters would have to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:178pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">have functional equivalents taking at least as much space (usually either count bytes or NULs). The</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:190pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">per-user records would either have to have terminators (which could hardly be shorter than a single</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:202pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">newline) or else be wastefully padded out to a &#xfb01;xed length.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:224pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Actually the prospects for saving space through binary encoding pretty much vanish if you know</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:236pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the actual semantics of the data. The numeric user ID (3rd) and group ID (4th) &#xfb01;elds are integers,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:248pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">thus on most machines a binary representation would be at least 4 bytes, and longer than the text for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:260pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">values up to 999. But let&#x2019;s agree to ignore this for now and suppose the best case that the numeric</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:272pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;elds have a 0-255 range.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:293pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We could tighten up the numeric &#xfb01;elds (3rd and 4th) by collapsing the numerics to single bytes, and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:305pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the password strings (2nd) to an 8-bit encoding. On this example, that would give about an 8% size</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:317pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">decrease.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:339pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">That 8% of putative inef&#xfb01;ciency buys us a lot. It avoids putting an arbitrary limit on the range of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:351pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the numeric &#xfb01;elds. It gives us the ability to modify the password &#xfb01;le with any old text editor of our</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:363pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">choice, rather than having to build a specialized tool to edit a binary format (though in the case of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:375pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">password &#xfb01;le itself, we have to be extra careful about concurrent edits). And it gives us the ability</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:387pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to do ad-hoc searches and &#xfb01;lters and reports on the user account information with text-stream tools</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:399pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">such as grep(1).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:421pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We do have to be a bit careful about not embedding a colon in any of the textual &#xfb01;elds.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:421pt;left:445pt"><span style="font-family:Times,serif;font-size:9.963pt">Good</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:433pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">practice is to tell the &#xfb01;le write code to precede embedded colons with an escape character, and then</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:445pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to tell the &#xfb01;le read code to interpret it. Unix tradition favors backslash for this use.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:467pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The fact that structural information is conveyed by &#xfb01;eld position rather than an explicit tag makes</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:479pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">this format faster to read and write, but a bit rigid. If the set of properties associated with a key is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:491pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">expected to change with any frequency, one of the tagged formats described below might be a better</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:503pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">choice.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">134</span></p>
</div>
