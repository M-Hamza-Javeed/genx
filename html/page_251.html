<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 9. Generation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">densities tend to be nearly constant across programming languages; all these practices mean that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">whatever malign forces generate our bugs will get fewer lines to wreak their havoc on.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In Chapter 8 we discussed the uses of domain-speci&#xfb01;c minilanguages. In Chapter 14 we&#x2019;ll make</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the argument for very-high-level languages.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:259pt"><span style="font-family:Times,serif;font-size:9.963pt">In this chapter we&#x2019;ll look at some design studies in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data-driven programming and a few examples of ad-hoc code generation; we&#x2019;ll look at some code-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">generation tools in Chapter 15. As with minilanguages, these methods can enable you to drastically</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">cut the line count of your programs, and correspondingly lower debugging time and maintenance</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">costs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:216pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Data-Driven Programming</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:244pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When doing</span><i><span style="font-family:Times,serif;font-size:9.963pt"> data-driven programming</span></i><span style="font-family:Times,serif;font-size:9.963pt">, one clearly distinguishes code from the data structures on</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:256pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">which it acts, and designs both so that one can make changes to the logic of the program by editing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:268pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">not the code but the data structure.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:290pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Data-driven programming is sometimes confused with object orientation, another style in which</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:302pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data organization is supposed to be central. There are at least two differences. One is that in data-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:314pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">driven programming, the data is not merely the state of some object, but actually de&#xfb01;nes the control</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:326pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb02;ow of the program.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:326pt;left:164pt"><span style="font-family:Times,serif;font-size:9.963pt">Where the primary concern in OO is encapsulation, the primary concern in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:338pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data-driven programming is writing as little &#xfb01;xed code as possible. Unix has a stronger tradition of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:350pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data-driven programming than of OO.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:372pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Programming data-driven style is also sometimes confused with writing state machines.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:372pt;left:440pt"><span style="font-family:Times,serif;font-size:9.963pt">It is in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:384pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">fact possible to express the logic of a state machine as a table or data structure, but hand-coded state</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:396pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">machines are usually rigid blocks of code that are far harder to modify than a table.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:418pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">An important rule when doing any kind of code generation or data-driven programming is this:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:430pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">always push problems upstream. Don&#x2019;t hack the generated code or any intermediate representations</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:442pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">by hand &#x2014; instead, think of a way to improve or replace your translation tool.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:442pt;left:398pt"><span style="font-family:Times,serif;font-size:9.963pt">Otherwise you&#x2019;re</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:454pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">likely to &#xfb01;nd that hand-patching bits which should have been generated correctly by machine will</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:466pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">have turned into an in&#xfb01;nite time sink.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:488pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">At the upper end of its complexity scale, data-driven programming merges into writing interpreters</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:499pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">for p-code or simple minilanguages of the kind we surveyed in Chapter 8.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:499pt;left:395pt"><span style="font-family:Times,serif;font-size:9.963pt">At other edges, it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:511pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">merges into code generation and state-machine programming. The distinctions are not actually that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:523pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">important; the important part is moving program logic away from hardwired control structures and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:535pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">into data.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">250</span></p>
</div>
