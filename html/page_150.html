<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:227pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 5. Textuality</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A CLI server with a command set that is designed for simplicity has the valuable property that a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">human tester will be able to type commands direct to the server process to probe the software&#x2019;s</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">behavior.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Another issue to bear in mind is the end-to-end design principle.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:341pt"><span style="font-family:Times,serif;font-size:9.963pt">Every protocol designer should</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">read the classic</span><i><span style="font-family:Times,serif;font-size:9.963pt"> End-to-End Arguments in System Design</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Saltzer]. There are often serious questions</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">about which level of the protocol stack should handle features like security and authentication; this</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">paper provides some good conceptual tools for thinking about them. Yet a third issue is designing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">application protocols for good performance. We&#x2019;ll cover that issue in more detail in Chapter 12.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The traditions of Internet application protocol design evolved separately from Unix before 1980.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">54</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">But since the 1980s these traditions have become thoroughly naturalized into Unix practice.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We&#x2019;ll illustrate the Internet style by looking at three application protocols that are both among the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">most heavily used, and are widely regarded among Internet hackers as paradigmatic: SMTP, POP3,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and IMAP. All three address different aspects of mail transport (one of the net&#x2019;s two most important</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">applications, along with the World Wide Web), but the problems they address (passing messages,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">setting remote state, indicating error conditions) are generic to non-email application protocols as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">well and are normally addressed using similar techniques.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Case Study: SMTP, a Simple Socket Protocol</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:358pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Example 5.7 is an example transaction in SMTP (Simple Mail Transfer Protocol), which is described</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:370pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">by RFC 2821. In the example,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> C:</span></i><span style="font-family:Times,serif;font-size:9.963pt"> lines are sent by a mail transport agent (MTA) sending mail, and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:382pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">S:</span></i><span style="font-family:Times,serif;font-size:9.963pt"> lines are returned by the MTA receiving it. Text</span><i><span style="font-family:Times,serif;font-size:9.963pt"> emphasized like this</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is comments, not part of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">actual transaction.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:416pt;left:72pt"><b><span style="font-family:Times,serif;font-size:11.955pt">Example 5.7. An SMTP session example.</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:452pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C: &lt;client connects to service port 25&gt;</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:462pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> HELO snark.thyrsus.com</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:463pt;left:259pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">sending host identifies self</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> 250 OK Hello snark, glad to meet you</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:474pt;left:275pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">receiver acknowledges</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> MAIL FROM: &lt;esr@thyrsus.com&gt;</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:485pt;left:267pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">identify sending user</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:494pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> 250 &lt;esr@thyrsus.com&gt;... Sender ok</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:495pt;left:275pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">receiver acknowledges</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:505pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> RCPT TO: cor@cpmy.com</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:506pt;left:256pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">identify target user</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:522pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">54</span><span style="font-family:Times,serif;font-size:7.97pt">One relic of this pre-Unix history is that Internet protocols normally use CR-LF as a line terminator rather than Unix&#x2019;s bare</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">LF.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">149</span></p>
</div>
