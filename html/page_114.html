<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Events, Sync, and Storage</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 98 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    });</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:176pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var loginView = new Login();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">login.doLogin();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:207pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The other components that need to do those post-login tasks should already be </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:220pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">listening to the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">loggedin</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> event of that </span><span style="font-family:CourierStd,serif;font-size:9.5pt">loginView</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">, and the callback function will </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:233pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">execute as soon as the event is fired:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:254pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// in some other component</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:266pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">loginView.on(&apos;loggedin&apos;, function(response){</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:279pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  // Do something</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:291pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:310pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">You can pass some parameters while triggering the event too; this data will be </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">available in the event callback method as arguments:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:344pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Pass multiple data</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">me.trigger(&apos;loggedin&apos;, response, &apos;foo&apos;, &apos;bar&apos;);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// All the passed params will be available as function arguments</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">loginView.on(&apos;loggedin&apos;, function(response, foo, bar){</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:405pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  console.log(response, foo, bar);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:418pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:449pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Using an event dispatcher</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Notice one thing in the previous scenario: to listen to the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">loggedin</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> event, all the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:486pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">other components of the application should have a reference to that </span><span style="font-family:CourierStd,serif;font-size:9.5pt">loginView</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">. Is </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:498pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">this really required? It may seem to a few components that keeping a reference to </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:511pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">loginView</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> is irrelevant, but they have to do so because they need to listen to the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:523pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">loggedin</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> event on this </span><span style="font-family:CourierStd,serif;font-size:9.5pt">loginView</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> object. Dependency injection in such a way can </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">be painful even when you are developing a simple application. Sometimes we may </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:549pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">need a common object that will play the role of a central event manager and can be </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:561pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">used throughout the application to trigger and listen to events. The simplest event </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:574pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">dispatcher can be defined in the following way:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:595pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var vent = _.extend({}, Backbone.Events);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:620pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Listen to a custom event</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:632pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">vent.on(&apos;customevent&apos;, function(){</span></p>
</div>
