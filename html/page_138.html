<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:227pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 5. Textuality</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A PNG &#xfb01;le consists of a sequence of chunks, each in a self-describing format beginning with the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">chunk type name and the chunk length. Because of this organization, PNG does not need a release</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">number.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:113pt"><span style="font-family:Times,serif;font-size:9.963pt">New chunk types can be added at any time; the case of the &#xfb01;rst letter in the chunk type</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">name informs PNG-using software whether or not each chunk can be safely ignored.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The PNG &#xfb01;le header also repays study.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:243pt"><span style="font-family:Times,serif;font-size:9.963pt">It has been cleverly designed to make various common</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">kinds of &#xfb01;le corruption (e.g., by 7-bit transmission links, or mangling of CR and LF characters) easy</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to detect.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The PNG standard is precise, comprehensive, and well written. It could serve as a model for how to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">write &#xfb01;le format standards.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:238pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Data File Metaformats</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:266pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A data &#xfb01;le metaformat is a set of syntactic and lexical conventions that is either formally standardized</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:278pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">or suf&#xfb01;ciently well established by practice that there are standard service libraries to handle</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:290pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">marshaling and unmarshaling it.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:312pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix has evolved or adopted metaformats suitable for a wide range of applications. It is good</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:324pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">practice to use one of these (rather than an idiosyncratic custom format) wherever possible.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:324pt;left:452pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:336pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">bene&#xfb01;ts begin with the amount of custom parsing and generation code that you may be able to avoid</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:348pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">writing by using a service library.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:348pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">But the most important bene&#xfb01;t is that developers and even</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:360pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">many users will instantly recognize these formats and feel comfortable with them, which reduces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:372pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the friction costs of learning new programs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:394pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In the following discussion, when we refer to &#x201c;traditional Unix tools&#x201d; we are intending the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:406pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">combination of grep(1), sed(1), awk(1), tr(1), and cut(1) for doing text searches and transformations.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:418pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Perl and other scripting languages tend to have good native support for parsing the line-oriented</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:430pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">formats that these tools encourage.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:452pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Here, then, are the standard formats that can serve you as models.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:474pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">DSV Style</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:500pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">DSV stands for</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Delimiter-Separated Values</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:500pt;left:261pt"><span style="font-family:Times,serif;font-size:9.963pt">Our &#xfb01;rst case study in textual metaformats was the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">/etc/passwd</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> &#xfb01;le, which is a DSV format with colon as the value separator. Under Unix, colon is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:524pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the default separator for DSV formats in which the &#xfb01;eld values may contain whitespace.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">137</span></p>
</div>
