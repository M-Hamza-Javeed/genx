<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 2</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 31 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var usersView = new UsersView({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  // add the collection instance</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  collection: users</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:176pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:200pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Display the view</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:213pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">$(document.body).append(usersView.render().el);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:232pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">In the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">render()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method, we iterate over all of the collection data and create an </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">HTML list item that gets appended to an element of the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">UsersView</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> class. This  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:257pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">works perfectly and shows you a list of names.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:278pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The preceding implementation is absolutely fine, unless you want to receive a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:291pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">user&apos;s data by clicking on a user&apos;s name. In that case, we have to add the user ID </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:304pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">somewhere in the HTML markup of the list item so that you can access it from the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:316pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">browser&apos;s </span><span style="font-family:CourierStd,serif;font-size:9.5pt">event</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> object:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:338pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">html += &apos;&lt;li data-id=&quot;&apos; + model.</span><span style="font-family:CourierStd,serif;font-size:9.5pt">get(&apos;id)</span><span style="font-family:CourierStd,serif;font-size:9pt"> + &apos;&quot;&gt;&apos; +  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:349pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">model.get(&apos;name&apos;) + &apos;&lt;/li&gt;&apos;;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:368pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">On a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">click</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> event, we call the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">showUserName()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method that displays the name of  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">user</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> model:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:402pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">...</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">events: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &apos;click li&apos;: &apos;showUserName&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">},</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:464pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">showUserName: function (e) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:476pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var userId = $(e.target).attr(&apos;data-id&apos;),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:488pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    user = this.collection.get(userId);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  if (!user) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:525pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    return;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:537pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:561pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  console.log(&apos;Clicked user\&apos;s name =&apos;, user.get(&apos;name&apos;));</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:574pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:586pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">...</span></p>
</div>
