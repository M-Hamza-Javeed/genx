<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 11. Interfaces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In the Unix tradition, the simplest interactive design pattern is exempli&#xfb01;ed by ed(1), the Unix line</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">editor. Other classic examples of this pattern include ftp(1) and sh(1), the Unix shell.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:428pt"><span style="font-family:Times,serif;font-size:9.963pt">The ed(1)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">program takes a &#xfb01;lename argument; it modi&#xfb01;es that &#xfb01;le.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:309pt"><span style="font-family:Times,serif;font-size:9.963pt">On its input, it accepts command lines.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Some of the commands result in output to standard output, which is intended to be seen immediately</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">by the user as part of the dialog with the program.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">An actual sample ed(1) session will be included in Chapter 13.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:191pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Many browserlike and editorlike programs under Unix obey this pattern, even when the named</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">resource they edit is something other than a text &#xfb01;le. Consider gdb(1), the GNU symbolic debugger,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">as an example.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:237pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Programs obeying the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> ed</span></i><span style="font-family:Times,serif;font-size:9.963pt"> interface design pattern are not quite so scriptable as would be the simpler</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">interface types resembling &#xfb01;lters. You can feed them commands on standard input, but it is trickier</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to generate sequences of commands (and interpret any output they might ship back) than it is to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">just set environment variables and command-line options. If the action of the commands is not so</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">predictable that they can be run blind (e.g., with a here-document as input and ignoring output),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">driving</span><i><span style="font-family:Times,serif;font-size:9.963pt"> ed</span></i><span style="font-family:Times,serif;font-size:9.963pt">-like programs requires a protocol, and a corresponding state machine in the calling</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">process.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:115pt"><span style="font-family:Times,serif;font-size:9.963pt">This raises the problems we noted in Chapter 7 during the discussion of slave process</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">control.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Nevertheless, this is the simplest and most scriptable pattern that supports fully interactive programs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Accordingly, it is still quite useful as a component of the &#x201c;separated engine and interface&#x201d; pattern</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">we&#x2019;ll describe below.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Roguelike Pattern</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The roguelike pattern is so named because its &#xfb01;rst example was the dungeon-crawling game rogue(1)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">(see Figure 11.2) under BSD; the adjective &#x201c;roguelike&#x201d; for this pattern is widely recognized in Unix</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">tradition. Roguelike programs are designed to be run on a system console, an X terminal emulator,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:451pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">or a video display terminal. They use the full screen and support a visual interface style, but with</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:463pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">character-cell display rather than graphics and a mouse.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:486pt;left:72pt"><b><span style="font-family:Times,serif;font-size:11.955pt">Figure 11.2. Screen shot of the original Rogue game.</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:521pt;left:255pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">a) some food</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:255pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">b) +1 ring mail [4] being worn</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">307</span></p>
</div>
