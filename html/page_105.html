<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 5</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 89 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Now any change in the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">showUsers()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method functionality will not force you to </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">touch the router. There&apos;s really not much of a visible difference&#x2014;but personally, as </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">I have used the second pattern several times and benefited from it, I can guarantee </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:153pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">you that the separation of concern will produce a much cleaner router along with a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:165pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">maintainable code base.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:186pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Also, in this context, we recommend you check out </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Marionette.AppRouter</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:199pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">(</span><span style="font-family:CourierStd,serif;font-size:9.5pt">https://github.com/marionettejs/backbone.marionette/blob/master/</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:212pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">docs/marionette.approuter.md</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">) and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Marionette.Controller</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> (</span><span style="font-family:CourierStd,serif;font-size:9.5pt">https://</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:225pt;left:107pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">github.com/marionettejs/backbone.marionette/blob/master/docs/</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:236pt;left:107pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">marionette.controller.md</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">). Marionette </span><span style="font-family:CourierStd,serif;font-size:9.5pt">AppRouter</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Controller</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> work in </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:248pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the same way as our </span><span style="font-family:CourierStd,serif;font-size:9.5pt">UserController</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and the base router. The controller actually </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">does the work (such as assembling the data, instantiating the view, displaying them </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">in regions) and can update the URL to reflect the application&apos;s state (for example, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:286pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">displayed content). The router simply triggers the controller action based on the URL </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">that has been entered in the address bar. Both these classes are quite useful, and you </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">can go for either of them if needed.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:342pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Using regular expressions for selective </span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:364pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">routing</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:386pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">If you </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">want to trigger a router method only when a specific condition is matched, a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:398pt;left:108pt"><b><span style="font-family:BookAntiqua,serif;font-size:10.5pt">regular expression</span></b><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> comes to the rescue. Regular expressions are flexible with routes </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and Backbone supports them completely. In fact, all of the routes are first converted </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:424pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">into </span><span style="font-family:CourierStd,serif;font-size:9.5pt">RegExp</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> objects when they are added to the routing table.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:445pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">However, JavaScript will not allow you to add a regular expression as a property of </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:457pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">routes</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> object, unlike the other string URL fragments:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:479pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// This will give error</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:491pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">routes : {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:503pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  /^user\/(\d+)/ : &apos;showUserDetails&apos; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:535pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The solution is that you can add the regular expression in the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">routes</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> object in the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:547pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">initialize()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method of the router:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:569pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">initialize: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  this.route(/^user\/(\d+)/, &apos;showUserDetails&apos;);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:593pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">},</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:618pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">showUserDetails: function (id) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:630pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  console.log(id);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:642pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
</div>
