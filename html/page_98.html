<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Collections</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 82 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Filter with name</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">filteredCollection.applyFilter({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  name: &apos;John&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:176pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:200pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">console.log(filteredCollection); </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:213pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Shows two data both with name : &apos;John&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:232pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Earlier, after</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> second-time filtering, you received only one set of data because the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">collection had been filtered twice and the returned model had the name </span><span style="font-family:CourierStd,serif;font-size:9.5pt">John</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:257pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">company </span><span style="font-family:CourierStd,serif;font-size:9.5pt">A</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">. But now, because the collection is refreshed before every filtering, you </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:270pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">will get a proper result.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:291pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The preceding code is not ready for production, and you need to make it more </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:304pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">sophisticated so that </span><span style="font-family:CourierStd,serif;font-size:9.5pt">_totalData</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> should always have the latest data. Anyhow, the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:316pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">pattern comes useful in certain cases, and keeping a filterable collection extension or </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:329pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Filterable</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> mixin ready can get you an immediate solution.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:362pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Understanding the collection of multiple </span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:386pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">model types</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:410pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">There are cases when we have a mixed set of data coming from the server and we </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">need to put the complete data in a single collection. For example, assume that the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:435pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">server is sending the complete employee details of a company. Now, there are </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">different types of employees&#x2014;developers, managers, designers, and so on, and  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:461pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">you want to have different model types for each of these. How is the collection </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">supposed to hold all types of models together? Here is an example with which </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:486pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">you can get the desired functionality:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:507pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var Employee = Backbone.Model.extend();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:520pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var Developer = Employee.extend();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var Manager = Employee.extend();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:556pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var Employees = Backbone.Collection.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:569pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  url: &apos;employees.json&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  model: function (attrs, options) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:593pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // For each data, check the attribute type</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:605pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    switch (attrs.type) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:617pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      case &quot;Developer&quot;:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:630pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">        return new Developer(attrs, options);</span></p>
</div>
