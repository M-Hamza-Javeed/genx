<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 11. Interfaces</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">therefore demands that you try to &#xfb01;nd a cantrip design for your tool before giving in to the temptation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to write an interactive interface that will be harder to script. And when interactivity seems necessary,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">remember the characteristic Unix design pattern of separating the engine from the interface; often,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the right thing is an interactive wrapper written in some scripting language that calls a cantrip to do</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the real work.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The console utility clear(1), which simply clears your screen, is the purest possible cantrip; it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">doesn&#x2019;t even take command-line options. Other classic simple examples are rm(1) and touch(1).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The startx(1) program used to launch X is a complex example, typical of a whole class of daemon-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">summoning cantrips.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This interface design pattern, though fairly common, has not traditionally been named; the term</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x201c;cantrip&#x201d; is my invention. (In origin, it&#x2019;s a Scots-dialect word for a magic spell, which has been</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">picked up by a popular fantasy-role-playing game to tag a spell that can be cast instantly, with</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">minimal or no preparation.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Source Pattern</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:312pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A</span><i><span style="font-family:Times,serif;font-size:9.963pt"> source</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is a &#xfb01;lter-like program that requires no input; its output is controlled only by startup</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:324pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">conditions. The paradigmatic example would be ls(1), the Unix directory lister.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:324pt;left:415pt"><span style="font-family:Times,serif;font-size:9.963pt">Other classic</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:336pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">examples include who(1) and ps(1).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:358pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Under Unix, report generators like ls(1), ps(1), and who(1) tend strongly to obey the source pattern,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:370pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">so their output can be &#xfb01;ltered with standard tools.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The term &#x2018;source&#x2019; is, as Doug McIlroy noted, very traditional. It is less common than it might be</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">because &#x2018;source&#x2019; has other important meanings.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:426pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Sink Pattern</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:452pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">A</span><i><span style="font-family:Times,serif;font-size:9.963pt"> sink</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is a &#xfb01;lter-like program that consumes standard input but emits nothing to standard output.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:464pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Again, its actions on the input data are controlled only by startup conditions.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:486pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This interface pattern is unusual, and there are few well-known examples. One is lpr(1), the Unix</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:498pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">print spooler. It will queue text passed to it on standard input for printing. Like many sink programs,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:510pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">it will also process &#xfb01;les named to it on the command line.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:510pt;left:329pt"><span style="font-family:Times,serif;font-size:9.963pt">Another example is mail(1) in its</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:522pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">mail-sending mode.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">305</span></p>
</div>
