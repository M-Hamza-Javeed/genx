<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022; Is the size of your individual modules in Hatton&#x2019;s sweet spot? If your answer is &#x201c;No, many are</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">larger&#x201d;, you may have a long-term maintenance problem.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:324pt"><span style="font-family:Times,serif;font-size:9.963pt">Do you know what your own sweet</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">spot is? Do you know what it is for other programmers you are cooperating with? If not, best</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">be conservative and stick to sizes near the low end of Hatton&#x2019;s range.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022; Are the individual functions in your modules too large?</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:322pt"><span style="font-family:Times,serif;font-size:9.963pt">This is not so much a matter of line</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">count as it is of internal complexity. If you can&#x2019;t informally describe a function&#x2019;s contract with</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">its callers in one line, the function is probably too large.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">49</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">Personally I tend to break up a subprogram when there are too many local variables.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:435pt"><span style="font-family:Times,serif;font-size:9.963pt">Another</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">clue is [too many] levels of indentation. I rarely look at length.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;KenThompson&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022; Does your code have internal APIs &#x2014; that is, collections of function calls and data structures that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">you can describe to others as units, each sealing off some layer of function from the rest of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">code?</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:118pt"><span style="font-family:Times,serif;font-size:9.963pt">A good API makes sense and is understandable without looking at the implementation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">behind it. The classic test is this: Try to describe it to another programmer over the phone. If</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">you fail, it is very probably too complex, and poorly designed.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022; Do any of your APIs have more than seven entry points? Do any of your classes have more than</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">seven methods each? Do your data structures have more than seven members?</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:361pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022; What is the distribution of the number of entry points per module across the project?</span><sup><span style="font-family:Times,serif;font-size:6.273pt">50</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">Does</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">it seem uneven?</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:165pt"><span style="font-family:Times,serif;font-size:9.963pt">Do the modules with lots of entry points really need that many? Module</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">complexity tends to rise as the square of the number of entry points, too &#x2014; yet another reason</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">simple APIs are better than complicated ones.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">You might &#xfb01;nd it instructive to compare these with our checklist of questions about transparency,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and discoverability in Chapter 6.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">49</span><span style="font-family:Times,serif;font-size:7.97pt">Many years ago, I learned from Kernighan &amp; Plauger&#x2019;s</span><i><span style="font-family:Times,serif;font-size:7.97pt"> The Elements of Programming Style</span></i><span style="font-family:Times,serif;font-size:7.97pt"> a useful rule. Write that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:526pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">one-line comment immediately after the prototype of your function. For</span><i><span style="font-family:Times,serif;font-size:7.97pt"> every</span></i><span style="font-family:Times,serif;font-size:7.97pt"> function, without exception.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">50</span><span style="font-family:Times,serif;font-size:7.97pt">A cheap way to collect this information is to analyze the tags &#xfb01;les generated by a utility like etags(1) or ctags(1).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">129</span></p>
</div>
