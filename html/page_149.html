<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:227pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 5. Textuality</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Also, by separating the representation design from the particular compression method used, you</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">leave open the possibility of using different compression methods in the future with no more than</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">minimal changes to the actual &#xfb01;le parsing &#x2014; perhaps, with no changes at all.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">On the other hand, compression does some damage to transparency. While a human being can</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">estimate from context whether uncompressing the &#xfb01;le is likely to show him anything useful, tools</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">such as &#xfb01;le(1) cannot as of mid-2003 see through the wrapping.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:191pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Some would advocate a less structured compression format &#x2014; straight gzip(1)-compressed XML</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">data, say, without the internal structure and self-identifying header chunk provided by zip(1). While</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">using a format similar to that of zip(1) solves the identi&#xfb01;cation problem, it means that decoding such</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;les will be tricky for programs written in the simpler scripting languages.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Any of these solutions (straight text, straight binary, or compressed text) may be optimal depending</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">on the relative weight you give to storage economy, discoverability, or making browsing tools as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">simple as possible to write.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:193pt"><span style="font-family:Times,serif;font-size:9.963pt">The point of the preceding discussion is not to advocate any one of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">these approaches over the others, but rather to suggest how you can think about the options and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">design tradeoffs clearly.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:319pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This having been said, the truly Unixy solution would probably be to &#xfb01;x &#xfb01;le(1) to see &#xfb01;le pre&#xfb01;xes</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">through the compression &#x2014; and, failing that, to write a shellscript wrapper around &#xfb01;le(1) that would</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">interpret compression as a direction to apply gunzip(1) and take a second look.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Application Protocol Design</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:394pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In Chapter 7, we&#x2019;ll discuss the advantages of breaking complicated applications up into cooperating</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:406pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">processes speaking an application-speci&#xfb01;c command set or protocol with each other. All the good</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:418pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">reasons for data &#xfb01;le formats to be textual apply to these application-speci&#xfb01;c protocols as well.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:440pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When your application protocol is textual and easily parsed by eyeball, many good things become</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:452pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">easier. Transaction dumps become much easier to interpret. Test loads become easier to write.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:474pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Server processes are often invoked by harness programs such as inetd(8) in such a way that the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:486pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">server sees commands on standard input and ships responses to standard output. We describe this</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:497pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x201c;CLI server&#x201d; pattern in more detail in Chapter 11.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">148</span></p>
</div>
