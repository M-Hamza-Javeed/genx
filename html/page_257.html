<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 9. Generation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:102pt;left:148pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&#x2019;fetchall&#x2019;:FALSE,</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:113pt;left:148pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&#x2019;keep&#x2019;:FALSE,</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:123pt;left:148pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&#x2019;flush&#x2019;:FALSE,</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:148pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&quot;mda&quot;:None,</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:145pt;left:148pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&#x2019;limit&#x2019;:0,</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:156pt;left:148pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&#x2019;warnings&#x2019;:3600,</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:166pt;left:133pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">}</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:177pt;left:133pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">,</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:177pt;left:184pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">]</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:102pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">}</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:199pt;left:102pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">,</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:210pt;left:87pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">]</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:220pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">}</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">The major hurdle had been leapt.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:230pt"><span style="font-family:Times,serif;font-size:9.963pt">The Python interpreter could then evaluate the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">--configdump</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> output and read the con&#xfb01;guration available to</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmailconf</span></i><span style="font-family:Times,serif;font-size:9.963pt"> as the value of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">variable &#x2018;fetchmail&#x2019;.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">But this wasn&#x2019;t quite the last obstacle in the race.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:301pt"><span style="font-family:Times,serif;font-size:9.963pt">What was really needed wasn&#x2019;t just for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">fetchmailconf</span></i><span style="font-family:Times,serif;font-size:9.963pt"> to have the existing con&#xfb01;guration, but to turn it into a linked tree of live objects. There</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">would be three kinds of objects in this tree:</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> Configuration</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> (the top-level object representing the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:332pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">entire con&#xfb01;guration),</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> Site</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> (representing one of the servers to be polled), and</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> User</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> (representing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:344pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">user data attached to a site). The example &#xfb01;le describes three site objects, each with one user object</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">attached to it.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:378pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The three object classes already existed in</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmailconf</span></i><span style="font-family:Times,serif;font-size:9.963pt">. Each had a method that caused it to pop</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:390pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">up a GUI edit panel to modify its instance data.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:390pt;left:282pt"><span style="font-family:Times,serif;font-size:9.963pt">The last remaining problem was to somehow</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:402pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">transform the static data in this Python initializer into live objects.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:424pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">I considered writing a glue layer that would explicitly know about the structure of all three classes</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:436pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and use that knowledge to grovel through the initializer creating matching objects, but rejected that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">idea because new class members were likely to be added over time as the con&#xfb01;guration language</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">grew new features. If the object-creation code were written in the obvious way, it would once again</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:472pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">be fragile and tend to fall out of synchronization when either the class de&#xfb01;nitions or the initializer</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">structure dumped by the</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> --configdump</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> report generator changed.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:357pt"><span style="font-family:Times,serif;font-size:9.963pt">Again, a recipe for endless</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:496pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">bugs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">256</span></p>
</div>
