<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 3</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 63 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    alert(error);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var user = new User();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var userView = new UserView({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:200pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  model: user</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:213pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:237pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Set new attributes </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">user.set({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:262pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  name: &apos;&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:274pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  email: &apos;johndoe#www.com&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:286pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}, {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:298pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  validate: true</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:330pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Here we created a model with the two attributes </span><span style="font-family:CourierStd,serif;font-size:9.5pt">name</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">email</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">, added a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:342pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">validate()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method to</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> test the values of these attributes, and defined a view </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">that will handle the validation errors, if any.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:376pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">As we are setting both the values in a single </span><span style="font-family:CourierStd,serif;font-size:9.5pt">set()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method, the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">validate()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">will be called only once. However, it will return an error as soon as it finds an invalid </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:402pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">attribute. What if we want to display all the errors together on our form? In that case, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:414pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">we must return an array or an object with all the error messages as shown in the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">following code snippet:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">validate: function (attr) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var errors = {};</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:485pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  if (attr.name.length === 0) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:497pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    errors[&apos;name&apos;] = &apos;Name is required&apos;;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:509pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:534pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  if (attr.email.length === 0) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:546pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    errors[&apos;email&apos;] = &apos;Email is required&apos;;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:558pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:583pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  if (!this.validation.emailRegEx.test(attr.email)) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:595pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // If already there is an error for email, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:607pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // then skip other errors for email</span></p>
</div>
