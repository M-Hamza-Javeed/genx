<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">basically it was because the OS was too complicated to write.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:367pt"><span style="font-family:Times,serif;font-size:9.963pt">We needed both</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">re&#xfb01;nements in tools (like C structures) and good practice in using them (like Rob</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">Pike&#x2019;s rules for programming) before we could tame that complexity.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:296pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;KenThompson&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Early Unix hackers struggled with this in many ways. In the languages of 1970 function calls were</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">expensive, either because call semantics were complicated (PL/1.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:343pt"><span style="font-family:Times,serif;font-size:9.963pt">Algol) or because the compiler</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">was optimizing for other things like fast inner loops at the expense of call time. Thus, code tended</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to be written in big lumps. Ken and several of the other early Unix developers knew modularity was</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a good idea, but they remembered PL/1 and were reluctant to write small functions lest performance</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">go to hell.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">Dennis Ritchie encouraged modularity by telling all and sundry that function calls</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">were really, really cheap in C. Everybody started writing small functions and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">modularizing.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:173pt"><span style="font-family:Times,serif;font-size:9.963pt">Years later we found out that function calls were still expensive</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">on the PDP-11, and VAX code was often spending 50% of its time in the CALLS</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">instruction. Dennis had lied to us! But it was too late; we were all hooked...</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:301pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;SteveJohnson&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:345pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">All programmers today, Unix natives or not, are taught to modularize at the subroutine level within</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">programs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:121pt"><span style="font-family:Times,serif;font-size:9.963pt">Some learn the art of doing this at the module or abstract-data-type level and call that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:369pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2018;good design&#x2019;. The design-patterns movement is making a noble effort to push up a level from there</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and discover successful design abstractions that can be applied to organize the large-scale structure</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of programs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Getting better at all these kinds of problem partitioning is a worthy goal, and many excellent</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">treatments of them are available elsewhere. We shall not attempt to cover all the issues relating to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">modularity within programs in too much detail: &#xfb01;rst, because that is a subject for an entire volume</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:450pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">(or several volumes) in itself; and second, because this is a book about the art of</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Unix</span></i><span style="font-family:Times,serif;font-size:9.963pt"> programming.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:472pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">What we will do here is examine more speci&#xfb01;cally what the Unix tradition teaches us about</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">how to follow the Rule of Modularity.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:246pt"><span style="font-family:Times,serif;font-size:9.963pt">In this chapter, our examples will live within process</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:496pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">units. Later, in Chapter 7, we&#x2019;ll examine the circumstances under which partitioning programs into</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:508pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">multiple cooperating processes is a good idea, and discuss more speci&#xfb01;c techniques for doing that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:520pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">partitioning.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">108</span></p>
</div>
