<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:234pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 15. Tools</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the sources are newer than the target. You don&#x2019;t actually have to write down all dependencies, as the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">make</span></i><span style="font-family:Times,serif;font-size:9.963pt"> program can deduce a lot of the obvious ones from &#xfb01;lenames and extensions.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">For example: You might put in a make&#xfb01;le that the binary</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> myprog</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> depends on three object</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;les</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> myprog.o</span></tt><span style="font-family:Times,serif;font-size:9.963pt">,</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> helper.o</span></tt><span style="font-family:Times,serif;font-size:9.963pt">, and</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> stuff.o</span></tt><span style="font-family:Times,serif;font-size:9.963pt">. If you have source &#xfb01;les</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> myprog.c</span></tt><span style="font-family:Times,serif;font-size:9.963pt">,</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> helper.c</span></tt><span style="font-family:Times,serif;font-size:9.963pt">, and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">stuff.c</span></tt><span style="font-family:Times,serif;font-size:9.963pt">,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> make</span></i><span style="font-family:Times,serif;font-size:9.963pt"> will know without being told that each</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .o</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> &#xfb01;le depends on the corresponding</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .c</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;le, and supply its own standard recipe for building a</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .o</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> &#xfb01;le from a</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> .c</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> &#xfb01;le.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:191pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">Make originated with a visit from Steve Johnson (author of</span><i><span style="font-family:Times,serif;font-size:9.963pt"> yacc</span></i><span style="font-family:Times,serif;font-size:9.963pt">, etc.), storming</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">into my of&#xfb01;ce, cursing the Fates that had caused him to waste a morning debug-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">ging a correct program (bug had been &#xfb01;xed, &#xfb01;le hadn&#x2019;t been compiled,</span><b><span style="font-family:Times,serif;font-size:9.963pt"> cc *.o</span></b><span style="font-family:Times,serif;font-size:9.963pt"> was</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">therefore unaffected). As I had spent a part of the previous evening coping with</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">the same disaster on a project I was working on, the idea of a tool to solve it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">came up. It began with an elaborate idea of a dependency analyzer, boiled down</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">to something much simpler, and turned into Make that weekend.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:382pt"><span style="font-family:Times,serif;font-size:9.963pt">Use of tools</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">that were still wet was part of the culture. Make&#xfb01;les were text &#xfb01;les, not magi-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">cally encoded binaries, because that was the Unix ethos: printable, debuggable,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:107pt"><span style="font-family:Times,serif;font-size:9.963pt">understandable stuff.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:297pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;StuartFeldman&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:345pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">When you run</span><b><span style="font-family:Times,serif;font-size:9.963pt"> make</span></b><span style="font-family:Times,serif;font-size:9.963pt"> in a project directory, the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> make</span></i><span style="font-family:Times,serif;font-size:9.963pt"> program looks at all productions and timestamps</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and does the minimum amount of work necessary to make sure derived &#xfb01;les are up to date.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">You can read a good example of a moderately complex make&#xfb01;le in the sources for</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt">. In the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">subsections below we&#x2019;ll refer to it again.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Very complex make&#xfb01;les, especially when they call subsidiary make&#xfb01;les, can become a source of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">complications rather than simplifying the build process.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:321pt"><span style="font-family:Times,serif;font-size:9.963pt">A now-classic warning is issued in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:433pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">Recursive Make Considered Harmful</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">136</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">The argument in this paper has become widely accepted</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">since it was written in 1997, and has come near to reversing previous community practice.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:470pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">No discussion of make(1) would be complete without an acknowledgement that it includes one of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:482pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the worst design botches in the history of Unix. The use of tab characters as a required leader for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:494pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">command lines associated with a production means that the interpretation of a make&#xfb01;le can change</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:506pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">drastically on the basis of invisible differences in whitespace.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:526pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">136</span><span style="font-family:Times,serif;font-size:7.97pt">Available on the Web [http://www.tip.net.au/~millerp/rmch/recu-make-cons-harm.html].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">397</span></p>
</div>
