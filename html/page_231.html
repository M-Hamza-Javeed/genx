<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:218pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 8. Minilanguages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">DWB), all of which are domain-speci&#xfb01;c minilanguages of various kinds.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:374pt"><span style="font-family:Times,serif;font-size:9.963pt">Most are either prepro-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">cessors or postprocessors for troff markup. Open-source Unixes host an enhanced implementation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of Documenter&#x2019;s Workbench called groff(1), from the Free Software Foundation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We&#x2019;ll examine</span><i><span style="font-family:Times,serif;font-size:9.963pt"> troff</span></i><span style="font-family:Times,serif;font-size:9.963pt"> in more detail in Chapter 18; for now, it&#x2019;s suf&#xfb01;cient to note that it is a good</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">example of an imperative minilanguage that borders on being a full-&#xfb02;edged interpreter (it has</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">conditionals and recursion but not loops; it is accidentally Turing-complete).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:191pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The postprocessors (&#x2018;drivers&#x2019; in DWB terminology) are normally not visible to</span><i><span style="font-family:Times,serif;font-size:9.963pt"> troff</span></i><span style="font-family:Times,serif;font-size:9.963pt"> users. The</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">original troff emitted codes for the particular typesetter the Unix development group had available</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in 1970; later in the 1970s these were cleaned up into a device-independent minilanguage for placing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">text and simple graphics on a page. The postprocessors translate this language (called &#x201c;ditroff&#x201d; for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x201c;device-independent troff&#x201d;) into something modern imaging printers can actually accept &#x2014; the most</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">important of these (and the modern default) is PostScript.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The preprocessors are more interesting, because they actually add capabilities to the troff language.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">There are three common ones: tbl(1) for making tables, eqn(1) for typesetting mathematical</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">equations, and pic(1) for drawing diagrams.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:258pt"><span style="font-family:Times,serif;font-size:9.963pt">Less used, but still live, are grn(1) for graphics, and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">refer(1) and bib(1) for formatting bibliographies. Open-source equivalents of all of these ship with</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">groff</span></i><span style="font-family:Times,serif;font-size:9.963pt">. The grap(1) preprocessor provided a rather versatile plotting facility; there is an open-source</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">implementation separate from</span><i><span style="font-family:Times,serif;font-size:9.963pt"> groff</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Some other preprocessors have no open-source implementation and are no longer in common use.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Best known of these was ideal(1), for graphics.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:272pt"><span style="font-family:Times,serif;font-size:9.963pt">A younger sibling of the family, chem(1), draws</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">chemical structural formulas; it is available as part of Bell Labs&#x2019;s netlib code.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">86</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Each of these preprocessors is a little program that accepts a minilanguage and compiles it into troff</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">requests.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:115pt"><span style="font-family:Times,serif;font-size:9.963pt">Each one recognizes the markup it is supposed to interpret by looking for a unique start</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and end request, and passes through unaltered any markup outside those (</span><i><span style="font-family:Times,serif;font-size:9.963pt">tbl</span></i><span style="font-family:Times,serif;font-size:9.963pt"> looks for .TS/.TE,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pic</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">looks for .PS/.PE, etc.). Thus, most of the preprocessors can normally be run in any order without</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">stepping on each other.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:177pt"><span style="font-family:Times,serif;font-size:9.963pt">There are some exceptions: in particular,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> chem</span></i><span style="font-family:Times,serif;font-size:9.963pt"> and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> grap</span></i><span style="font-family:Times,serif;font-size:9.963pt"> both issue</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pic</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">commands, and so must come before it in the pipeline.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:494pt;left:72pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">cat thesis.ms | chem | tbl | refer | grap | pic | eqn \</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:505pt;left:243pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">| groff -Tps &gt;thesis.ps</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:531pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">86</span><span style="font-family:Times,serif;font-size:7.97pt">http://www.netlib.org/</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">230</span></p>
</div>
