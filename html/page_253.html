<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 9. Generation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">than any</span><i><span style="font-family:Times,serif;font-size:9.963pt"> three</span></i><span style="font-family:Times,serif;font-size:9.963pt"> of the functions in the program). The code merely navigates the table and does low-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">level tasks like radix conversions. The initializer actually lives in the &#xfb01;le</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> nametable.h</span></tt><span style="font-family:Times,serif;font-size:9.963pt">, which is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">generated in a way we&#x2019;ll describe later in this chapter.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This organization makes it easy to add new character names, change existing ones, or delete old</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">names by simply editing the table, without disturbing the code.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:179pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">(The way the program is built is good Unix style, but the output format is questionable. It&#x2019;s hard to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:191pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">see how the output could usefully become the input of any other program, so it does not play well</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with others.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:226pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Case Study: Statistical Spam Filtering</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:252pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">One interesting case of data-driven programming is statistical learning algorithms for detecting</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:264pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">spam (unsolicited bulk email). A whole class of mail &#xfb01;lter programs (those easily &#xfb01;ndable by Web</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:276pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">search include</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pop&#xfb01;le</span></i><span style="font-family:Times,serif;font-size:9.963pt">,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> spambayes</span></i><span style="font-family:Times,serif;font-size:9.963pt">, and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> bogo&#xfb01;lter</span></i><span style="font-family:Times,serif;font-size:9.963pt">) use a database of word correlations to replace the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:288pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">elaborate pattern-matching conditional logic of pattern-matching spam &#xfb01;lters.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:310pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Programs like these became common on the Internet very rapidly following Paul Graham&#x2019;s landmark</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:322pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">paper</span><i><span style="font-family:Times,serif;font-size:9.963pt"> A Plan for Spam</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Graham] in 2002. While the explosion was triggered by the increasing cost</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:334pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of the pattern-matching arms race, the statistical-&#xfb01;ltering idea was adopted &#xfb01;rst and fastest by Unix</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:346pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">shops.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:346pt;left:106pt"><span style="font-family:Times,serif;font-size:9.963pt">In part, this was certainly because almost all the Internet service providers (who are most</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:358pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">burdened by spam, and thus had most incentive to adopt effective new techniques) are Unix shops</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:370pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014; but undoubtedly the harmony with some traditional themes in Unix software design helped as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:382pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">well.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Conventional spam &#xfb01;lters require that a system administrator, or some other responsible party,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">maintain information on patterns of text found in spam &#x2014; names of sites that emit nothing but</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">spam, come-on phrases often used by pornography sites or Internet scam artists, and the like.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:459pt"><span style="font-family:Times,serif;font-size:9.963pt">In</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">his paper, Graham noted accurately that computer programmers like the idea of pattern-matching</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:451pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;lters, and sometimes have dif&#xfb01;culty seeing past that approach, because it offers them so many</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:463pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">opportunities to be clever.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:485pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Statistical spam &#xfb01;lters, on the other hand, work by collecting feedback about what the user judges</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:497pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to be spam versus nonspam.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:497pt;left:198pt"><span style="font-family:Times,serif;font-size:9.963pt">That feedback is processed into databases of statistical correlation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:509pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">coef&#xfb01;cients or</span><i><span style="font-family:Times,serif;font-size:9.963pt"> weights</span></i><span style="font-family:Times,serif;font-size:9.963pt"> connecting words or phrases to the user&#x2019;s spam/nonspam classi&#xfb01;cation. The</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:521pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">most popular algorithms use minor variants of Bayes&#x2019;s Theorem on conditional probabilities, but</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:533pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">other techniques (including various sorts of polynomial hashing) are also employed.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">252</span></p>
</div>
