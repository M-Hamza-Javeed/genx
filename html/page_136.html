<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Organizing Backbone Applications &#x2013; Structure, Optimize, and Deploy</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:293pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 120 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The mediator pattern is somewhat similar to the observer pattern, but it doesn&apos;t </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">work as a broadcasting system. It includes a set of methods that are accessible to all </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">modules that share this mediator. A mediator can be a simple object with a number </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:153pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">of required methods:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:174pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var Mediator = {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:185pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  method1: function(){},</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:196pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  method2: function(){}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:206pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">};</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:226pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Any module can access any method of this mediator.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:247pt;left:129pt"><i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">A mediator is best applied when two or more objects have an indirect working </span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:260pt;left:129pt"><i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">relationship, and business logic or workflow needs to dictate the interactions and </span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:272pt;left:129pt"><i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">coordination of these objects.</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:294pt;left:422pt"><i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Addy Osmani</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:316pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The concept of a mediator will get more clear once we look at a simple example. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:328pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Assume that we have two modules: </span><span style="font-family:CourierStd,serif;font-size:9.5pt">User</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Event</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">. The </span><span style="font-family:CourierStd,serif;font-size:9.5pt">User</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> module has a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:341pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">getUserDetails()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method to retrieve a user&apos;s details based on the user ID. The </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:353pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">Event</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> module has a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">loadEvents()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method whose job it is to load all the events near </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:366pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the user&apos;s current location. Now, getting the currently logged-in user&apos;s ID or current </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">location is a functionality that isn&apos;t particularly module-specific, and it is better to </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">keep it in a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Mediator</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> instance. Look at the following example:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Mediator</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">define([&apos;util&apos;], function (Util) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var Mediator = {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:449pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    getLoggedinUser: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:462pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      return Util.getCookie(&apos;userid&apos;);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:474pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:496pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    getUserCurrentLocation: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:508pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      // returns user&apos;s current location</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:520pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:533pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  };</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:555pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  return Mediator;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:567pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:591pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// User module</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:604pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">define([&apos;app/mediator&apos;],</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:616pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  function (Mediator) {</span></p>
</div>
