<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:218pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 8. Minilanguages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">All the preprocessor languages (though not troff markup itself) have relatively clean, shell-like</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">syntaxes that follow many of the conventions we described in Chapter 5 for the design of data-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;le formats. There are a few embarrassing exceptions; notably, tbl(1) defaults to using a tab as a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;eld separator between table columns, replicating an infamous botch in the design of make(1) and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">causing annoying bugs when editors or other tools invisibly change the composition of whitespace.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">While troff itself is a specialized imperative language, one theme that runs through at least</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">three of the Documenter&#x2019;s Workbench minilanguages is declarative semantics: doing layout from</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">constraints. This is an idea that shows up in modern GUI toolkits as well &#x2014; that, instead of giving</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">pixel coordinates for graphical objects, what you really want to do is declare spatial relationships</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">among them (&#x201c;widget A is above widget B, which is to the left of widget C&#x201d;) and have your software</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">compute a best-&#xfb01;t layout for A, B, and C according to those constraints.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The pic(1) program uses this approach to lay out elements for diagrams.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:371pt"><span style="font-family:Times,serif;font-size:9.963pt">The language taxonomy</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:259pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">diagram at Figure 8.1 was produced with the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> pic</span></i><span style="font-family:Times,serif;font-size:9.963pt"> source code in Example 8.4</span><sup><span style="font-family:Times,serif;font-size:6.273pt">87</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">run through</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">pic2graph</span></i><span style="font-family:Times,serif;font-size:9.963pt">, one of our case studies in Chapter 7.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><b><span style="font-family:Times,serif;font-size:11.955pt">Example 8.4. Taxonomy of languages &#x2014; the</span></b><b><i><span style="font-family:Times,serif;font-size:11.955pt"> pic</span></i></b><b><span style="font-family:Times,serif;font-size:11.955pt"> source.</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt"># Minilanguage taxonomy</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:344pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">#</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt"># Base ellipses</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">define smallellipse {ellipse width 3.0 height 1.5}</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:376pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">M: ellipse width 3.0 height 1.8 fill 0.2</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:387pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">line from M.n to M.s dashed</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:398pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">D: smallellipse() with .e at M.w + (0.8, 0)</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:408pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">line from D.n to D.s dashed</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:419pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">I: smallellipse() with .w at M.e - (0.8, 0)</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:430pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">#</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:441pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt"># Captions</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:451pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&quot;&quot; &quot;Data formats&quot; at D.s</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:462pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&quot;&quot; &quot;Minilanguages&quot; at M.s</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&quot;&quot; &quot;Interpreters&quot; at I.s</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">#</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:494pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt"># Heads</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:505pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">arrow from D.w + (0.4, 0.8) to D.e + (-0.4, 0.8)</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:71pt"><tt><span style="font-family:Courier,monospace;font-size:8.966pt">&quot;flat to structured&quot; &quot;&quot; at last arrow.c</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:531pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">87</span><span style="font-family:Times,serif;font-size:7.97pt">It is also quite traditional for Unix books that describe pic(1) to include their own illustrations as coding examples.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">232</span></p>
</div>
