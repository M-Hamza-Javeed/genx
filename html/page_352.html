<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:222pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 13. Complexity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Without a thorough code audit it&#x2019;s dif&#xfb01;cult to be sure, but at the design level it&#x2019;s hard to identify</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">any accidental complexity in Sam.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">The interface is at least semi-compact and arguably strictly</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">compact. This editor lives up to the very highest standards of Unix design &#x2014; unsurprisingly, given</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">its provenance.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">By contrast, vi looks rather bloated and &#xfb02;abby.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:270pt"><span style="font-family:Times,serif;font-size:9.963pt">There are hundreds of commands, many of them</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">duplicative. These are at best optional complexity, and perhaps accidental. At a guess, most users</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">don&#x2019;t know more than 5% of the command set.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:276pt"><span style="font-family:Times,serif;font-size:9.963pt">With the example of Sam before us, it&#x2019;s fair to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">wonder why the interface complexity of vi is so high.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In Chapter 11 we described the effect of the absence of standard arrow keys on early roguelike</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">programs; vi was one of these.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:205pt"><span style="font-family:Times,serif;font-size:9.963pt">When vi was built, its author knew that many of his users would</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">need to be able to use the cursor motion keys traditional on Unix glass teletypes.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:417pt"><span style="font-family:Times,serif;font-size:9.963pt">This made a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">modal interface inevitable.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:187pt"><span style="font-family:Times,serif;font-size:9.963pt">Once the hjkl keys had mode-dependent meanings in an edit buffer, it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">was all too easy to fall into the habit of adding new commands in an ad-hoc way.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Sam, designed as it is to depend on a bitmapped display with both arrow keys and a mouse, can be</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">much cleaner. And it is.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:319pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">But the clutter of vi commands is a relatively super&#xfb01;cial problem.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:319pt;left:348pt"><span style="font-family:Times,serif;font-size:9.963pt">It&#x2019;s interface complexity, yes,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">but of a kind most users can and do ignore (the interface is semi-compact in the sense we developed</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in Chapter 4).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:138pt"><span style="font-family:Times,serif;font-size:9.963pt">The deeper problem is an adhocity trap. Over the years, vi has had progressively</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">more and more special-purpose C code bolted onto it to perform tasks that Sam refuses to do and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that Emacs would attack with Lisp code modules and subprocess control. The extensions are not,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">as in Emacs, libraries loaded as needed; users pay the overhead for the resulting code bloat all the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">time. As a result, the size difference between a modern vi and a modern Emacs is not nearly as great</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">as one might expect; in mid-2003 on an Intel-architecture machine, it&#x2019;s 1500KB for GNU Emacs</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">versus 900KB for vim.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:177pt"><span style="font-family:Times,serif;font-size:9.963pt">There is a whole lot of both optional and accidental complexity in that</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">900KB.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">For vi partisans, not having an embedded scripting language &#x2014; not being Emacs &#x2014; has become</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">an identity issue, a central part of the shared myth that vi is a lightweight editor.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:412pt"><span style="font-family:Times,serif;font-size:9.963pt">While vi fans</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:472pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">like to talk about &#xfb01;ltering buffers with external programs and scripts to do what Emacs&#x2019;s embedded</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">scripting does, the reality is that vi&#x2019;s &#x201c;!&#x201d; command cannot &#xfb01;lter regions of an edit buffer selected</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:496pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">at &#xfb01;ner granularity than a range of lines (Sam and Wily, though they have no more subprocess</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:508pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">management than vi does, can at least &#xfb01;lter arbitrary text ranges, not just line ranges).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:508pt;left:455pt"><span style="font-family:Times,serif;font-size:9.963pt">All</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:520pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">knowledge of &#xfb01;le formats and syntaxes that vary at a &#xfb01;ner granularity (and most do) has to be</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">built in to C code if vi is going to have it available at all.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:321pt"><span style="font-family:Times,serif;font-size:9.963pt">There is thus little prospect that the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">351</span></p>
</div>
