<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 3</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 69 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &quot;email&quot;: &quot;swarnendu@email.com&quot;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:159pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">However, this process has a downside. In most cases, we use the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">toJSON()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:171pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">to get the model attributes hash directly. As we are overriding this method here, the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:184pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">data returned will differ from the expected data. So, you need to decide whether you </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:196pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">will follow this approach to serialize the model or implement server-side interaction </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:209pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">separately. If you go for this process, remember to apply the model data accordingly </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:222pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">in your views when using the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">toJSON()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method. Or alternatively, you can clone the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:234pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">model.attributes</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> property to get the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">hash</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> attribute:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:256pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var jsonData = _.clone(this.attributes);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:284pt;left:179pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">It is better not to use the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">model.attributes</span><span style="font-family:BookAntiqua,serif;font-size:9.5pt"> property directly. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:295pt;left:179pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">Manipulating the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">hash</span><span style="font-family:BookAntiqua,serif;font-size:9.5pt"> attribute directly can potentially cause some </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:306pt;left:179pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">unexpected consequences, as the object will be passed by reference.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:344pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Understanding the relational data model</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:368pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">All the examples we have gone through so far have used simple models to  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">represent data. However, in any nontrivial application, the data structure is much </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">more complex, and the relationships among entities are multi-relational. For any </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:406pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">medium- or large-level application, there will be lots of one-to-one, one-to-many, and </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:418pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">many-to-one relations. Keeping these relations synced with the server often becomes </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:431pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">a tedious job, especially while saving or fetching data with multiple requests.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:452pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">While researching for this book, I found that most Backbone developers,  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:465pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">at some point of their learning phase, have faced issues with nested models  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:477pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and collections. Fortunately, there is a great plugin known as Backbone-relational </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:490pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">(</span><span style="font-family:CourierStd,serif;font-size:9.5pt">http://backbonerelational.org/</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">), developed by Paul Uithol, which minimizes </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:503pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the Backbone model hand-holding by syncing the model and all its related models </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:515pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">with a single </span><span style="font-family:CourierStd,serif;font-size:9.5pt">save()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> or </span><span style="font-family:CourierStd,serif;font-size:9.5pt">fetch()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method. It provides some great features that </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:528pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">include the following:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:549pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:549pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Bidirectional relations that notify related models of changes through events</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:566pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:566pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Control over how relations are serialized</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:583pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:583pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Automatic conversion of nested objects in a model&apos;s attributes into  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:596pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">model instances</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:612pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:612pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Easy retrieval of a set of related models</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:629pt;left:125pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">&#x2022; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:629pt;left:143pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Determining the type of </span><span style="font-family:CourierStd,serif;font-size:9.5pt">HasMany</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> collections</span></p>
</div>
