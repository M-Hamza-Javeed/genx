<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:221pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 6. Transparency</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Whenever you face a design problem that involves editing some kind of complex binary object, the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix tradition encourages asking &#xfb01;rst off whether you can write a tool analogous to sng(1) or the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">tic(1)/infocmp(1) pair that can do a lossless mapping to an editable textual format and back. There</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is no established term for programs of this kind, but we&#x2019;ll call them</span><i><span style="font-family:Times,serif;font-size:9.963pt"> textualizers</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">If the binary object is dynamically generated or very large, then it may not be practical or possible</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to capture all the state with a textualizer.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:249pt"><span style="font-family:Times,serif;font-size:9.963pt">In that case, the equivalent task is to write a browser.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The paradigm example is fsdb(1), the &#xfb01;le-system debugger supported under various Unixes; there</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is a Linux equivalent called debugfs(1). The psql(1) used to browse PostgreSQL databases, and the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">smbclient(1) program that can be used to query Windows &#xfb01;le shares on a SAMBA-equipped Linux</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">machine, are two more.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:175pt"><span style="font-family:Times,serif;font-size:9.963pt">All &#xfb01;ve are simple CLI programs that could be driven by scripts and test</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">harnesses.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Writing a textualizer or browser is a valuable exercise for at least four reasons:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022;</span><i><span style="font-family:Times,serif;font-size:9.963pt"> You gain an excellent learning experience.</span></i><span style="font-family:Times,serif;font-size:9.963pt"> There may be other ways that are as good to learn</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">about the structure of the object, but none that are obviously better.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:319pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022;</span><i><span style="font-family:Times,serif;font-size:9.963pt"> You gain the ability to dump the contents of the structure for inspection and debugging.</span></i><span style="font-family:Times,serif;font-size:9.963pt"> Because</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">such a tool makes dumping easy, you&#x2019;ll do it more. You&#x2019;ll get more information, probably</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">leading to more insight.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022;</span><i><span style="font-family:Times,serif;font-size:9.963pt"> You gain the ability to easily generate test loads and unusual cases.</span></i><span style="font-family:Times,serif;font-size:9.963pt"> This means you are more</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">likely to probe the odd corners of the object&#x2019;s state space &#x2014; and to break the associated software,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">so you can &#xfb01;x it before your users break it.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022;</span><i><span style="font-family:Times,serif;font-size:9.963pt"> You gain code you may be able to reuse.</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:411pt;left:283pt"><span style="font-family:Times,serif;font-size:9.963pt">If you&#x2019;re careful about how you write the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">browser/textualizer and keep the CLI interpreter properly separated from the marshal-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:435pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">ing/unmarshaling library, you may &#xfb01;nd you have code that can be reused for your actual</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:446pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">application.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">184</span></p>
</div>
