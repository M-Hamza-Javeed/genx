<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:227pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 5. Textuality</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">To complete our triptych of Internet application protocol examples, we&#x2019;ll look at IMAP, another post</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of&#xfb01;ce protocol designed in a slightly different style. See Example 5.9; as before,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> C:</span></i><span style="font-family:Times,serif;font-size:9.963pt"> lines are sent</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">by the client, and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> S:</span></i><span style="font-family:Times,serif;font-size:9.963pt"> lines by the mail server. Text</span><i><span style="font-family:Times,serif;font-size:9.963pt"> emphasized like this</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is comments, not part of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">actual transaction.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><b><span style="font-family:Times,serif;font-size:11.955pt">Example 5.9. An IMAP session example.</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:194pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C: &lt;client connects to service port 143&gt;</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:204pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * OK example.com IMAP4rev1 v12.264 server ready</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0001 USER &quot;frobozz&quot; &quot;xyzzy&quot;</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:226pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * OK User frobozz authenticated</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:237pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0002 SELECT INBOX</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:247pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * 1 EXISTS</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:258pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * 1 RECENT</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:269pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * FLAGS (\Answered \Flagged \Deleted \Draft \Seen)</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:280pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * OK [UNSEEN 1] first unseen message in /var/spool/mail/esr</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:290pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0002 OK [READ-WRITE] SELECT completed</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:301pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0003 FETCH 1 RFC822.SIZE</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:302pt;left:291pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">Get message sizes</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:312pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * 1 FETCH (RFC822.SIZE 2545)</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0003 OK FETCH completed</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0004 FETCH 1 BODY[HEADER]</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:334pt;left:293pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">Get first message header</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:344pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * 1 FETCH (RFC822.HEADER {1425}</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">&lt;server sends 1425 octets of message payload&gt;</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:366pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> )</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:376pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0004 OK FETCH completed</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:387pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0005 FETCH 1 BODY[TEXT]</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:388pt;left:290pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">Get first message body</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:398pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * 1 FETCH (BODY[TEXT] {1120}</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:410pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">&lt;server sends 1120 octets of message payload&gt;</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:420pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> )</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:430pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * 1 FETCH (FLAGS (\Recent \Seen))</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:441pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0005 OK FETCH completed</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:452pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0006 LOGOUT</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:463pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> * BYE example.com IMAP4rev1 server terminating connection</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:473pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">S:</span></i></tt><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> A0006 OK LOGOUT completed</span></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:485pt;left:72pt"><tt><i><span style="font-family:Courier,monospace;font-size:8.07pt">C: &lt;client hangs up&gt;</span></i></tt></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:515pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">IMAP delimits payloads in a slightly different way.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:515pt;left:287pt"><span style="font-family:Times,serif;font-size:9.963pt">Instead of ending the payload with a dot, the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:527pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">payload length is sent just before it.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:527pt;left:224pt"><span style="font-family:Times,serif;font-size:9.963pt">This increases the burden on the server a little bit (messages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">152</span></p>
</div>
