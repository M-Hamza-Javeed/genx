<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:222pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 13. Complexity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:96pt;left:72pt"><b><i><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Sam</span></i></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:118pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Sam</span></i><span style="font-family:Times,serif;font-size:9.963pt"> editor</span><sup><span style="font-family:Times,serif;font-size:6.273pt">118</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">was written by Rob Pike at Bell Labs in the mid-1980s.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:122pt;left:379pt"><span style="font-family:Times,serif;font-size:9.963pt">Sam was designed for</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the Plan 9 operating system, which we&#x2019;ll survey in Chapter 20. While the Sam editor is not widely</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">known outside the Labs, it&#x2019;s favored by many of the original Unix developers who went on to work</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">on Plan 9, including Ken Thompson himself.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:180pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Sam is a fairly straightforward descendant of ed, remaining much closer to its parent than vi. Sam</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:192pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">incorporates only two new concepts: a curses-style text display and text selection with the mouse.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:213pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Each Sam session has exactly one command window, and one or more text windows. Text windows</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:225pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">edit text, and command windows accept ed-style editing commands.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:225pt;left:357pt"><span style="font-family:Times,serif;font-size:9.963pt">The mouse is used to move</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:237pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">between windows, and to select text regions within text windows.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:237pt;left:355pt"><span style="font-family:Times,serif;font-size:9.963pt">This is a clean, orthogonal,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">modeless design that discards most of the interface complexity of vi.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:271pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Most commands operate by default on a select region that can be painted with a mouse drag</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:283pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">operation. The select region for a command can also be set by specifying a line range in the fashion</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:295pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of ed, but Sam gains considerable power from the fact that the user can select at &#xfb01;ner granularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:307pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">than a line range. Because the mouse is available to do selections and rapidly change focus between</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:319pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">buffers (including the command buffer), Sam needs no equivalent of the default (command) mode of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">vi. The hundreds of extended vi commands are unnecessary and, therefore, omitted. Overall, Sam</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">adds only about a dozen commands to the seventeen or so in the ed set, for a total of about thirty.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Four of the new commands in Sam join two inherited from ed(1) and vi(1), as ways to apply regular</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">expressions to the task of selecting &#xfb01;les and &#xfb01;le regions to operate on.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:364pt"><span style="font-family:Times,serif;font-size:9.963pt">These provide limited but</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">effective loop and conditional facilities to the command language.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:349pt"><span style="font-family:Times,serif;font-size:9.963pt">There is, however, no way to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">name or parameterize command-language procedures. Nor can the language do interactive control</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of a subprocess.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:434pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">An interesting feature of Sam is that it&#x2019;s split into two parts. separating a back end that manipulates</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:446pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;les and does searches from a front end that handles the screen interface.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:446pt;left:400pt"><span style="font-family:Times,serif;font-size:9.963pt">This instance of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:458pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the &#x201c;separated engine and interface&#x201d; chapter has the immediate practical bene&#xfb01;t that, though the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:470pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">program has a GUI, it can run easily over a low-bandwidth connection to edit &#xfb01;les on a remote</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:482pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">server. Also, the front and back ends can be retargeted relatively easily.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:504pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Sam, like recent versions of vi, has in&#xfb01;nite undo.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:504pt;left:279pt"><span style="font-family:Times,serif;font-size:9.963pt">By design, it supports neither rich-text editing,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:516pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">nor output parsing, nor subprocess interaction.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">118</span><span style="font-family:Times,serif;font-size:7.97pt">http://plan9.bell-labs.com/sys/doc/sam/sam.html</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">347</span></p>
</div>
