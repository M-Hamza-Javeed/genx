<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Ritchie and Thompson lived by this maxim.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:265pt"><span style="font-family:Times,serif;font-size:9.963pt">Long after the resource constraints on early Unix</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">software had eased, they worked at keeping C as thin a layer over the hardware as possible.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">Dennis used to say to me, when I would ask for some particularly extravagant</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">feature in C, &#x201c;If you want PL/1, you know where to get it&#x201d;.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:361pt"><span style="font-family:Times,serif;font-size:9.963pt">He didn&#x2019;t have to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">deal with some marketer saying &#x201c;But we need a check in the box on the sales</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">viewgraph!&#x201d;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:315pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;MikeLesk&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The history of C is also a lesson in the value of having a working reference implementation</span><i><span style="font-family:Times,serif;font-size:9.963pt"> before</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">you standardize.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:146pt"><span style="font-family:Times,serif;font-size:9.963pt">We&#x2019;ll return to this point in Chapter 17 when we discuss the evolution of C and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix standards.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:262pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Libraries</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:290pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">One consequence of the emphasis that the Unix programming style put on modularity and well-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:302pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">de&#xfb01;ned APIs is a strong tendency to factor programs into bits of glue connecting collections of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:314pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">libraries, especially shared libraries (the equivalents of what are called dynamically-linked libraries</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:326pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">or DLLs under Windows and other operating systems).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:348pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">If you are careful and clever about design, it is often possible to partition a program so that it consists</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:360pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">of a user-interface-handling main section (policy) and a collection of service routines (mechanism)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:372pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with effectively no glue at all. This approach is especially appropriate when the program has to do a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:384pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">lot of very speci&#xfb01;c manipulations of data structures like graphic images, network-protocol packets,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:396pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">or control blocks for a hardware interface. Some good general architectural advice from within the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:408pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix tradition, particularly applicable to the resource-management challenges of this sort of library</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:420pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is collected in</span><i><span style="font-family:Times,serif;font-size:9.963pt"> The Discipline and Method Architecture for Reusable Libraries</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Vo].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:442pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Under Unix, it is normal practice to make this layering explicit, with the service routines collected</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:454pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in a library that is separately documented.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:454pt;left:254pt"><span style="font-family:Times,serif;font-size:9.963pt">In such programs, the front end gets to specialize in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:466pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">user-interface considerations and high-level protocol. With a little more care in design, it may be</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:478pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">possible to detach the original front end and replace it with others adapted for different purposes.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:490pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Some other advantages should become evident from our case study.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:511pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">There is a &#xfb02;ip side to this. In the Unix world, libraries which are delivered</span><i><span style="font-family:Times,serif;font-size:9.963pt"> as libraries</span></i><span style="font-family:Times,serif;font-size:9.963pt"> should come</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:523pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with exerciser programs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">124</span></p>
</div>
