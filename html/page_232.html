<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:218pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 8. Minilanguages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The preceding is a full-Monty example of a Documenter&#x2019;s Workbench processing pipeline, for a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">hypothetical thesis incorporating chemical formulas, mathematical equations, tables, bibliographies,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">plots, and diagrams. (The cat(1) command simply copies its input or a &#xfb01;le argument to its output;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">we use it here to emphasize the order of operations.)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:300pt"><span style="font-family:Times,serif;font-size:9.963pt">In practice modern troff implementations</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">tend to support command-line options that can invoke at least tbl(1), eqn(1) and pic(1), so it isn&#x2019;t</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:160pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">necessary to write such an elaborate pipeline.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:160pt;left:272pt"><span style="font-family:Times,serif;font-size:9.963pt">Even if it were, these sorts of build recipes are</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:172pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">normally composed just once and stashed away in a make&#xfb01;le or shellscript wrapper for repeated</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:183pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">use.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The document markup of Documenter&#x2019;s Workbench is in some ways obsolete, but the range of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">problems these preprocessors address gives some indication of the power of the minilanguage model</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014; it would be extremely dif&#xfb01;cult to embed equivalent knowledge into a WYSIWYG word processor.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:241pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">There are some ways in which modern XML-based document markups and toolchains are still, in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:253pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">2003, playing catch-up with capabilities that Documenter&#x2019;s Workbench had in 1979. We&#x2019;ll discuss</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:265pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">these issues in more detail in Chapter 18.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The design themes that gave Documenter&#x2019;s Workbench so much power should by now be familiar</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">ones; all the tools share a common text-stream representation of documents, and the formatting</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">system is broken up into independent components that can be debugged and improved separately.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The pipeline architecture supports plugging in new, experimental preprocessors and postprocessors</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:335pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">without disturbing old ones. It is modular and extensible.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The architecture of Documenter&#x2019;s Workbench as a whole teaches us some things about how to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:369pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;t multiple specialist minilanguages into a cooperating system. One preprocessor can build on</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">another. Indeed, the Documenter&#x2019;s Workbench tools were an early exemplar of the power of pipes,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#xfb01;ltering, and minilanguages that in&#xfb02;uenced a lot of later Unix design by example.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:412pt"><span style="font-family:Times,serif;font-size:9.963pt">The design of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:405pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the individual preprocessors has more lessons to teach about what effective minilanguage designs</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:417pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">look like.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">One of these lessons is negative. Sometimes users writing descriptions in the minilanguages do</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:450pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">unclean things with low-level troff markup inserted by hand.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:450pt;left:330pt"><span style="font-family:Times,serif;font-size:9.963pt">This can produce interactions and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:462pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">bugs that are hard to diagnose, because the generated troff coming out of the pipeline is not visible</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:474pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014; and would not be readable if it were. This is analogous to the sorts of bugs that happen in code</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:486pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that mixes C with snippets of in-line assembler. It might have been better to separate the language</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:498pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">layers more completely, if that were possible. Minilanguage designers should take note of this.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">231</span></p>
</div>
