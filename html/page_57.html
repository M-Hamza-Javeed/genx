<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 2</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 41 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      &lt;%= employee.name %&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &lt;/li&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &lt;% }); %&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;/ul&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:171pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">While displaying a list of employees, we need to iterate through the list and display </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:183pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the employee names. Underscore.js doesn&apos;t provide any inbuilt mechanism for this, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:196pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">but we can use a subtemplate here that excludes the evaluation part from this code. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:209pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The subtemplate will be simple, such as this:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:230pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;li&gt; &lt;%= name %&gt; &lt;/li&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:249pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">You will iterate through the list in your JavaScript code, use this subtemplate to </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:262pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">render only this </span><span style="font-family:CourierStd,serif;font-size:9.5pt">li</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> element, and then append the element to the main element. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:274pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Though it might take a little more effort this way, it will help you avoid JavaScript </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">evaluation in your template.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:308pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">On the other hand, there are template engines such as HandleBars.js that provide </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">inbuilt logic (for instance, looping, passing contexts, if-unless block helpers, and so </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">on). So, if you feel that subtemplating involves more work, you can go for a better </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:346pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">template library that may not be as lightweight as Underscore but provides more </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:359pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">inbuilt helper functions.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:380pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Another idea to avoid evaluation in your template is to use helper functions. Let&apos;s </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:393pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">take a look at them in the following section.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Using template helper functions</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:445pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">It is quite easy to use template helper functions. Imagine a situation where you are </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:458pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">displaying a user&apos;s profile in your application. In the place of user&apos;s avatar, either you </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:471pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">need to show a photo of the user or you must show a default avatar image. This is </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:483pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">how you will write that condition in your template:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:505pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;% if(typeof(avatar) === &apos;undefined&apos;) %&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &lt;img src=&quot;&lt;%= avatar %&gt;&quot; /&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:529pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;% } else { %&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:541pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &lt;img src=&quot;images/default_avatar.png&quot; /&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:554pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;% } %&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:573pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">This is an option, but we already decided not to evaluate JavaScript inside our </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:585pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">templates. The helper function may come handy here. Try this function:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:607pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// A cleaner template</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:619pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var tplString = &apos;&lt;img src=&quot;&lt;%= getAvatar(avatar) %&gt;&quot; /&gt;&apos;; </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:631pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var data = this.model.getJSON();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:644pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var html = _.template(tplString, _.extend(data, {</span></p>
</div>
