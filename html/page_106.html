<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Routing Best Practices and Subrouting</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 90 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">This is an example where only numbers are allowed in the URL fragment after </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">#user</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">. If you try to open a URL ending with </span><span style="font-family:CourierStd,serif;font-size:9.5pt">#user/abc</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">, the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">showUserDetails()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">method will not be called, but with the URL fragment </span><span style="font-family:CourierStd,serif;font-size:9.5pt">#user/123</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">, the same method </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:153pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">will be triggered. So, this is a very generic example of using a regular expression as a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:165pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">route. Regular expressions are very useful for more complex levels of URL fragments </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:178pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">in order to provide a level of restriction.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:211pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Subrouting &#x2013; a key to organizing complex </span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:235pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">apps</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:259pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Subrouting is the idea of dividing an application&apos;s router into a number of  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:272pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">module-specific routers. In a small- or medium-level application, you may never </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:284pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">need something like this. However, for an application with multiple modules, a single </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">router that handles all of the routes soon turns into a huge, unmanageable class. So, it </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:310pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">is always preferable to split the main router into a set of module-specific routers.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">Backbone.Subroute</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> (</span><span style="font-family:CourierStd,serif;font-size:9.5pt">https://github.com/ModelN/backbone.subroute</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">), a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:344pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">wonderful extension developed by Dave Cadwallader, provides the functionality </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:356pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">that we are talking about. It lets the base router delegate all of the module-specific </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:369pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">routes to the subrouter associated with that module. Let&apos;s understand the difference </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:381pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">between a router and subrouter with the two examples that follow.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:405pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:14pt">The all-in-one router</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:424pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The following is the code for a single router that handles the routes of all the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:436pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">modules of an application:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:458pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var App = {};</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:482pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var App.BaseRouter = Backbone.Router.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:494pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  routes: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:507pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // Generic routes</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:519pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;&apos;: &apos;showHome&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:531pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;logout&apos;: &apos;doLogout&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:556pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // User specific routes</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:568pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;users/view/:id&apos;: &apos;showUserDetails&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:580pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &apos;users/search&apos;: &apos;searchUsers&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:605pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    // Company specific routes</span></p>
</div>
