<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 7</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:293pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 113 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">   ],</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">   function ($, _, Backbone) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">     var User = Backbone.Model.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">       defaults: [&apos;name&apos;, &apos;age&apos;]</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">     });</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:176pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">     return User;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">   });</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:207pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Now, this model can be used in another file just as the other dependencies. The </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:220pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">interesting thing is that RequireJS makes sure that a particular file is loaded only </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:233pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">once, irrespective of how many times you include it in several files. Now, let&apos;s create </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">a </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Users</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> collection and use our </span><span style="font-family:CourierStd,serif;font-size:9.5pt">User</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> model there:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:267pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// File: app/collections/users.js</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:291pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">define(function (require) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:303pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var $ = require(&apos;jquery&apos;),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:316pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    _ = require(&apos;underscore&apos;),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:328pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    Backbone = require(&apos;backbone&apos;),</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:340pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    UserModel = require(&apos;app/models/user&apos;);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var Users = Backbone.Collection.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    model: UserModel</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  });</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:414pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  return Users;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:426pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:445pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">It is pretty simple, right? Also, </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">notice that we loaded the dependencies in a pattern </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:458pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">other than what we used for our model definition. This pattern is called the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Sugar</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:470pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">syntax and it utilizes the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">require()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method to load the dependencies. You can </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:483pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">use either of the syntaxes with your module definitions. When there are lots of </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:495pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">dependencies, using the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Sugar</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> syntax makes it easier to organize the dependency </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:508pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">variables rather than just putting them as arguments of a function.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:529pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">So, with AMD, you can define all of your files in the same way. The script </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:542pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">dependencies are loaded as we saw previously, and the text dependencies can be </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:555pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">loaded using the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">text</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> plugin (</span><span style="font-family:CourierStd,serif;font-size:9.5pt">https://github.com/requirejs/text</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">) of RequireJS. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:567pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">We already discussed this thoroughly in </span><i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Appendix C</span></i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">, </span><i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Organizing Templates with AMD </span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:580pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and Require.js</span></i><span style="font-family:BookAntiqua,serif;font-size:10.5pt">, when we loaded the external template files using this plugin. In the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:592pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">following section, we are going to see how we can initiate a complete application </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:605pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">architecture using these concepts.</span></p>
</div>
