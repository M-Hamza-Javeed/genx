<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">projects; that would be premature optimization. But it is reason to think twice before transforming</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">non-OO code into a class hierarchy.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:134pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Unix programmers tend to share an instinctive sense of these problems. This tendency appears to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">be one of the reasons that, under Unix, OO languages have failed to displace non-OO workhorses</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">like C, Perl (which actually has OO facilities, but they&#x2019;re not heavily used), and shell. There is more</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">vocal criticism of OO in the Unix world than orthodoxy permits elsewhere; Unix programmers know</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">when</span><i><span style="font-family:Times,serif;font-size:9.963pt"> not</span></i><span style="font-family:Times,serif;font-size:9.963pt"> to use OO; and when they do use OO languages, they spend more effort on trying to keep</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">their object designs uncluttered. As the author of</span><i><span style="font-family:Times,serif;font-size:9.963pt"> The Elements of Networking Style</span></i><span style="font-family:Times,serif;font-size:9.963pt"> once observed</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in a slightly different context [Padlipsky]: &#x201c;If you know what you&#x2019;re doing, three layers is enough;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">if you don&#x2019;t, even seventeen levels won&#x2019;t help&#x201d;.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">One reason that OO has succeeded most where it has (GUIs, simulation, graphics) may be because</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">it&#x2019;s relatively dif&#xfb01;cult to get the ontology of types wrong in those domains. In GUIs and graphics,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:263pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">for example, there is generally a rather natural mapping between manipulable visual objects and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">classes. If you &#xfb01;nd yourself proliferating classes that have no obvious mapping to what goes on in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the display, it is correspondingly easy to notice that the glue has gotten too thick.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">One of the central challenges of design in the Unix style is how to combine the virtue of detachment</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:321pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">(simplifying and generalizing problems from their original context) with the virtue of thin glue and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:333pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">shallow, &#xfb02;at, transparent hierarchies of code and design.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We&#x2019;ll return to some of these points and apply them when we discuss object-oriented languages in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 14.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:15.94pt">Coding for Modularity</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:418pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Modularity is expressed in good code, but it primarily comes from good design.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:418pt;left:409pt"><span style="font-family:Times,serif;font-size:9.963pt">Here are some</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:430pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">questions to ask about any code you work on that might help you improve its modularity:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:464pt;left:81pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2022; How many global variables does it have? Global variables are modularity poison, an easy way</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:476pt;left:86pt"><span style="font-family:Times,serif;font-size:9.963pt">for components to leak information to each other in careless and promiscuous ways.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">48</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:505pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">48</span><span style="font-family:Times,serif;font-size:7.97pt">Globals also mean your code cannot be reentrant; that is, multiple instances in the same process are likely to step on each</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:515pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">other.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">128</span></p>
</div>
