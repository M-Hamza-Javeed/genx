<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:468pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Chapter 3</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 67 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Instead of sending the preceding data, the server returns the following data:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">{</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &quot;user&quot;: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:161pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &quot;name&quot;: &quot;John Doe&quot;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:173pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &quot;email&quot;: &quot;johndoe@example.com&quot;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:185pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:197pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">This data cannot be applied directly to a model with the attributes </span><span style="font-family:CourierStd,serif;font-size:9.5pt">name</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">email</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">If we call the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">fetch()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method on the model now, it will just add another attribute </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:242pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">named </span><span style="font-family:CourierStd,serif;font-size:9.5pt">user</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> to the model. The method that can help us overcome this issue is called </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:254pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">parse()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">. By default, this method just passes the server response and the model </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:267pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">applies whatever it receives from the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">parse()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method. Here is how it is defined </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:280pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">in </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Backbone.js</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:301pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">parse: function (resp, options) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:313pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  return resp;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:326pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:345pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">However, we can override the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">parse()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method to modify the raw server response </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and send back only the attribute </span><span style="font-family:CourierStd,serif;font-size:9.5pt">hash</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">. For this case, an object with the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">name</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> and </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:370pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">email</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> attributes should be returned from the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">parse()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method, as shown in the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:383pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">following code snippet:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:404pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt"> var User = Backbone.Model.extend({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:416pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  url: &apos;server.json&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:429pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  defaults: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:441pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    name: &apos;&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:453pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    email: &apos;&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:465pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:490pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  // Returns the attribute hash </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:502pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  parse: function (response) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:514pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    return response.user;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:526pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:539pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:563pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var user = new User();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:575pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">user.fetch({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:588pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  success: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:600pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    console.log(user.get(&apos;name&apos;)); // John Doe</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:612pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:624pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
</div>
