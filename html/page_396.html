<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:234pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 15. Tools</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">make corrections).</span><i><span style="font-family:Times,serif;font-size:9.963pt"> yacc</span></i><span style="font-family:Times,serif;font-size:9.963pt"> and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> lex</span></i><span style="font-family:Times,serif;font-size:9.963pt"> address this by generating the same</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> #line</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> constructs that the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">C preprocessor does; these set the current line number for error reporting so the numbers will come</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">out right. Any program that generates C or C++ should do likewise.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">More generally, well-designed procedural-code generators should never require the user to hand-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">alter or even look at the generated parts. Getting those right is the code generator&#x2019;s job.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:180pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt">Case Study: The</span></b><tt><b><span style="font-family:Courier,monospace;font-size:10.76pt"> fetchmailrc</span></b></tt><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt"> Grammar</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:204pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The canonical demonstration example that seems to have appeared in every</span><i><span style="font-family:Times,serif;font-size:9.963pt"> lex</span></i><span style="font-family:Times,serif;font-size:9.963pt"> and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> yacc</span></i><span style="font-family:Times,serif;font-size:9.963pt"> tutorial</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:216pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">ever written is a toy interactive calculator program that parses and evaluates arithmetic expressions</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:228pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">entered by the user.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:228pt;left:160pt"><span style="font-family:Times,serif;font-size:9.963pt">We will spare you yet another repetition of this cliche; if you are interested,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:240pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">consult the source code of the bc(1) and dc(1) calculator implementations from the GNU project, or</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:248pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the paradigm example &#x2018;hoc&#x2019;</span><sup><span style="font-family:Times,serif;font-size:6.273pt">135</span></sup><sup><span style="font-family:Times,serif;font-size:9.963pt"> </span></sup><span style="font-family:Times,serif;font-size:9.963pt">from [Kernighan-Pike84].</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:274pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Instead, the grammar of</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt">&#x2019;s run-control-&#xfb01;le parser provides a good medium-sized case study</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in</span><i><span style="font-family:Times,serif;font-size:9.963pt"> lex</span></i><span style="font-family:Times,serif;font-size:9.963pt"> and</span><i><span style="font-family:Times,serif;font-size:9.963pt"> yacc</span></i><span style="font-family:Times,serif;font-size:9.963pt"> usage. There are a couple of points of interest here.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:307pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span><i><span style="font-family:Times,serif;font-size:9.963pt"> lex</span></i><span style="font-family:Times,serif;font-size:9.963pt"> speci&#xfb01;cation, in</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> rcfile_l.l</span></tt><span style="font-family:Times,serif;font-size:9.963pt">, is a very typical implementation of a shell-like syntax. Note</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:319pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">how two complementary rules support either single or double-quoted strings; this is a good idea in</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">general. The rules for accepting (possibly signed) integer literals and discarding comments are also</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">pretty generic.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The</span><i><span style="font-family:Times,serif;font-size:9.963pt"> yacc</span></i><span style="font-family:Times,serif;font-size:9.963pt"> speci&#xfb01;cation, in</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> rcfile_y.y</span></tt><span style="font-family:Times,serif;font-size:9.963pt">, is long but straightforward.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:365pt;left:367pt"><span style="font-family:Times,serif;font-size:9.963pt">It does not perform any</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:377pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> actions, just sets bits in a list of internal control blocks. After startup,</span><i><span style="font-family:Times,serif;font-size:9.963pt"> fetchmail</span></i><span style="font-family:Times,serif;font-size:9.963pt">&#x2019;s normal</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:389pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">mode of operation is just to repeatedly walk that list, using each record to drive a retrieval session</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with a remote site.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:423pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Case Study:</span></b><b><i><span style="font-family:Helvetica,sans-serif;font-size:13.948pt"> Glade</span></i></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:450pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We looked at</span><i><span style="font-family:Times,serif;font-size:9.963pt"> Glade</span></i><span style="font-family:Times,serif;font-size:9.963pt"> in Chapter 8 as a good example of a declarative minilanguage. We also noted</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:462pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that its back end produces a result by generating code in any one of several languages.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">Glade</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is a good modern example of an application-code generator.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:484pt;left:348pt"><span style="font-family:Times,serif;font-size:9.963pt">What makes it Unixy in spirit</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:495pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">are the following features, which most GUI builders (especially most proprietary GUI builders)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:507pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">don&#x2019;t have:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:525pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">135</span><span style="font-family:Times,serif;font-size:7.97pt">http://cm.bell-labs.com/cm/cs/upe/</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">395</span></p>
</div>
