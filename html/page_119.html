<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">All three of these programs are so bug-free that their correct functioning is taken utterly for granted,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">and compact enough to &#xfb01;t easily in a programmer&#x2019;s hand. Only a part of these good qualities are</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">due to the polishing that comes with a long service life and frequent use; most of it is that, having</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">been constructed around a strong and provably correct algorithmic core, they never needed much</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:148pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">polishing in the &#xfb01;rst place.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:169pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The opposite of a formal approach is using</span><i><span style="font-family:Times,serif;font-size:9.963pt"> heuristics</span></i><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;rules of thumb leading toward a solution</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">that is probabilistically, but not certainly, correct.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:282pt"><span style="font-family:Times,serif;font-size:9.963pt">Sometimes we use heuristics because a deter-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">ministically correct solution is impossible. Think of spam &#xfb01;ltering, for example; an algorithmically</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">perfect spam &#xfb01;lter would need a full solution to the problem of understanding natural language as</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a module. Other times, we use heuristics because known formally correct methods are impossibly</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">expensive. Virtual-memory management is an example of this; there are near-perfect solutions, but</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:241pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">they require so much runtime instrumentation that their overhead would swamp any theoretical gain</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:253pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">over heuristics.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The trouble with heuristics is that they proliferate special cases and edge cases.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:275pt;left:406pt"><span style="font-family:Times,serif;font-size:9.963pt">If nothing else,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">you usually have to backstop a heuristic with some sort of recovery mechanism when it fails.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:287pt;left:455pt"><span style="font-family:Times,serif;font-size:9.963pt">All</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:299pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the usual problems with escalating complexity follow. To manage the resulting tradeoffs, you have</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to start by being aware of them.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:311pt;left:210pt"><span style="font-family:Times,serif;font-size:9.963pt">Always ask if a heuristic actually pays off in performance what</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:323pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">it costs in code complexity &#x2014; and don&#x2019;t guess at the performance difference, actually measure it</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:335pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">before making a decision.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">The Value of Detachment</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:383pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">We began this book with a reference to Zen: &#x201c;a special transmission, outside the scriptures&#x201d;. This</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:395pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">was not mere exoticism for stylistic effect; the core concepts of Unix have always had a spare,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:407pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Zen-like simplicity that continues to shine through the layers of historical accidents that have</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:419pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">accreted around them.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:419pt;left:173pt"><span style="font-family:Times,serif;font-size:9.963pt">This quality is re&#xfb02;ected in the cornerstone documents of Unix, like</span><i><span style="font-family:Times,serif;font-size:9.963pt"> The</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:431pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">C Programming Language</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Kernighan-Ritchie] and the 1974 CACM paper that introduced Unix to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:443pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the world; one of the famous quotes from that paper observes &#x201c;...constraint has encouraged not only</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:455pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">economy, but also a certain elegance of design&#x201d;.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:455pt;left:281pt"><span style="font-family:Times,serif;font-size:9.963pt">That simplicity came from trying to think not</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:467pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">about how much a language or operating system could do, but of how</span><i><span style="font-family:Times,serif;font-size:9.963pt"> little</span></i><span style="font-family:Times,serif;font-size:9.963pt"> it could do &#x2014; not by</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:479pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">carrying assumptions but by starting from zero (what in Zen is called &#x201c;beginner&#x2019;s mind&#x201d; or &#x201c;empty</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:491pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">mind&#x201d;).</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:512pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">To design for compactness and orthogonality, start from zero. Zen teaches that attachment leads to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:524pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">suffering; experience with software design teaches that attachment to unnoticed assumptions leads</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:536pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">to non-orthogonality, noncompact designs, and projects that fail or become maintenance nightmares.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">118</span></p>
</div>
