<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:223pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 14. Languages</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Complex shellscripts often have portability problems, not so much because of the shell itself but</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">because they make assumptions about what other programs are available as components.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:443pt"><span style="font-family:Times,serif;font-size:9.963pt">While</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Bourne and Korn-shell clones have been sporadically available on non-Unix operating systems, shell</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:136pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">programs are not (practically speaking) at all portable off Unix.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Summing up: shell&#x2019;s best side is that it is very natural and quick for small scripts.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:413pt"><span style="font-family:Times,serif;font-size:9.963pt">Its worst side</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">is that large shellscripts depend on lots of auxiliary commands that aren&#x2019;t necessarily identically</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">behaved nor even present on all target machines.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:278pt"><span style="font-family:Times,serif;font-size:9.963pt">Nor is it easy to analyze the dependencies in a</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">large shellscript.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">It is almost never necessary to build or install a shell, since all Unix systems and Unix emulators</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">come equipped with them.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:190pt"><span style="font-family:Times,serif;font-size:9.963pt">The standard shell on Linux and other leading-edge Unix variants is</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">now</span><i><span style="font-family:Times,serif;font-size:9.963pt"> bash</span></i><span style="font-family:Times,serif;font-size:9.963pt">.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:261pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:11.955pt">Case Study:</span></b><b><i><span style="font-family:Helvetica,sans-serif;font-size:11.955pt"> xmlto</span></i></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">xmlto</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is a driver script that calls all the commands needed to render an XML-DocBook document</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">as HTML, PostScript, plain text, or in any one of several other formats (we&#x2019;ll take a closer look at</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">DocBook in Chapter 18). It is written in bash.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">xmlto</span></i><span style="font-family:Times,serif;font-size:9.963pt"> handles the details of calling an XSLT engine with appropriate stylesheet, then handing off</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the result to a postprocessor. For HTML and XHTML the XSLT transformation does the entire job.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">For plain text, the XML is also processed into HTML, but then handed to a postprocessor &#x2014; lynx(1)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">in its</span><tt><span style="font-family:Courier,monospace;font-size:8.966pt"> -dump</span></tt><span style="font-family:Times,serif;font-size:9.963pt"> mode, which renders HTML to &#xfb02;at text. For PostScript, the XML is transformed to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">XML FO (formatting objects) which a postprocessor then massages into</span><i><span style="font-family:Times,serif;font-size:9.963pt"> TeX</span></i><span style="font-family:Times,serif;font-size:9.963pt"> macros, to DVI format</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:391pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">via tex(1), and then &#xfb01;nally to PostScript via the well-known dvi2ps(1) tool.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">xmlto</span></i><span style="font-family:Times,serif;font-size:9.963pt"> consists of a single front-end shellscript. It calls any one of several script plugins, each named</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">after the target format. Each plugin is a shellscript. Depending on how it&#x2019;s called, it either supplies</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">a stylesheet for the front end to apply, or calls the appropriate postprocessor(s) with various canned</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:449pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">arguments.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:471pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">This architecture means that all the information about a given output format lives in one place (the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:483pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">corresponding script plugin), so adding new output types can be done without disturbing the front-</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:495pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">end code at all.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">xmlto</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is a good example of a medium-sized shell application. Neither C nor C++ would have made</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:529pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">sense because they are awkward for scripting. Any of the other scripting languages in this chapter</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">370</span></p>
</div>
