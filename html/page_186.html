<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:221pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 6. Transparency</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">After you&#x2019;ve done this, you may well discover that it&#x2019;s possible to apply the &#x201c;separated engine and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">interface&#x201d; pattern (see Chapter 11) using your textualizer/debugger as the engine.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:415pt"><span style="font-family:Times,serif;font-size:9.963pt">All the usual</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">bene&#xfb01;ts of this pattern will apply.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">It is desirable, although often dif&#xfb01;cult, for a textualizer to be able to read and write</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">even a damaged binary object.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:239pt"><span style="font-family:Times,serif;font-size:9.963pt">For one thing, it lets you generate damaged test</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:170pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">cases to stress-test software; for another, it can make emergency repairs a whole</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">lot easier.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:181pt;left:158pt"><span style="font-family:Times,serif;font-size:9.963pt">It may be hard to handle cases in which the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> structure</span></i><span style="font-family:Times,serif;font-size:9.963pt"> of the object</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:193pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">is messed up, but at least you should handle cases in which the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> content</span></i><span style="font-family:Times,serif;font-size:9.963pt"> of the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">structure is nonsense, e.g., by showing nonsense values in hex and converting the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:217pt;left:108pt"><span style="font-family:Times,serif;font-size:9.963pt">hex back to the values.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:229pt;left:422pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:241pt;left:298pt"><span style="font-family:Times,serif;font-size:9.963pt;color:#ff0000">&lt;author&gt;HenrySpencer&lt;/author&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><b><span style="font-family:Helvetica,sans-serif;font-size:13.948pt">Transparency, Fault Diagnosis, and Fault Recovery</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:300pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Yet another bene&#xfb01;t of transparency, related to ease of debugging, is that transparent systems are</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:312pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">easier to perform recovery actions on after a bug bites &#x2014; and, often, more resistant to damage from</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:324pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">bugs in the &#xfb01;rst place.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:346pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">In comparing the terminfo database with Windows registries we noted that registries are notoriously</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:358pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">subject to being corrupted by buggy application code.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:358pt;left:297pt"><span style="font-family:Times,serif;font-size:9.963pt">This can make the entire system unusable.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:370pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Even if it doesn&#x2019;t, recovery can be dif&#xfb01;cult if the corruption confuses the specialized registry-editing</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:382pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">tools.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Our Unix case studies illustrate ways that designing for transparency can prevent this class of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">problem.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:121pt"><span style="font-family:Times,serif;font-size:9.963pt">Because the terminfo database is not one big &#xfb01;le, botching one terminfo entry does</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">not make the whole terminfo data set unusable.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:427pt;left:278pt"><span style="font-family:Times,serif;font-size:9.963pt">Fully textual one-big-&#xfb01;le formats like termcap</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">are usually parsed with methods which (unlike block reads of binary structure dumps) can recover</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:451pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">from single-point errors. Syntax errors in an SNG &#xfb01;le can be corrected by hand without requiring</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:463pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">specialized editors that might refuse to load a damaged PNG image.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:485pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Going back to the</span><i><span style="font-family:Times,serif;font-size:9.963pt"> kmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> case study, that program makes fault diagnosis easier because it obeys</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:497pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">the Rule of Repair: SMTP failures are noisy, usefully so. You don&#x2019;t have to decode a layer of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:509pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">obfuscatory messages generated by</span><i><span style="font-family:Times,serif;font-size:9.963pt"> kmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> itself to see what the interaction with the SMTP server</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:521pt;left:71pt"><span style="font-family:Times,serif;font-size:9.963pt">looks like. All you have to do is look in the right place, because</span><i><span style="font-family:Times,serif;font-size:9.963pt"> kmail</span></i><span style="font-family:Times,serif;font-size:9.963pt"> is being transparent and not</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">185</span></p>
</div>
