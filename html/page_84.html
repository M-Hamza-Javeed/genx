<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Models</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 68 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Here, the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">server.json</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> file consists of the newly formatted data. In the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">parse()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">method, we are parsing the response and returning data that the Backbone model </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">can accept.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:171pt;left:186pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">Remember that the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">fetch()</span><span style="font-family:BookAntiqua,serif;font-size:9.5pt"> method will not clear your model, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:183pt;left:186pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">but will extend the attributes only. So if in our case, the server </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:194pt;left:186pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">sends only an e-mail in the response, the previous e-mail will get </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:205pt;left:186pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">updated, but the name will still be what it was.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:233pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">Similar to fetching data from the server, sending data to it can also face the same </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">problem, that is, the server may expect the exact format in which it sends data to the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:258pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">model. Now, if we call the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">save()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method on the model, it will send the data in the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:270pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">following format:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:292pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">{ </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:304pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      name : &apos;Swarnendu De&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:316pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      email: &apos;swarnendu@email.com&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:329pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:348pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">So, if the server expects the data in the same format as it is sending now, we need </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:360pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">to override the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">toJSON()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method, which is pretty straightforward. In the following </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:373pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">code, we create a new object with the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">user</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> property and return that object from the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:386pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">toJSON()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:407pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Add this method to model</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:419pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">toJSON: function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:432pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  return {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:444pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    user: _.clone(this.attributes)</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:456pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:468pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:493pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Let&apos;s set new data and send that to the server</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:505pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">user.set({</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:517pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  name: &apos;Swarnendu&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:529pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  email: &apos;swarnendu@email.com&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:542pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:566pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">user.save();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:585pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The request will be sent to the server with the following data, which is exactly what </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:598pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">we were looking for:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:619pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">{</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:632pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &quot;user&quot;: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:644pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &quot;name&quot;: &quot;Swarnendu&quot;,</span></p>
</div>
