<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Reducing Boilerplate with Plugin Development</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 18 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:139pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// DraggableMixin method is called passing the config object </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">DraggableMixin.call(UserItemView.prototype, {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  foo: &apos;bar&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:176pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">});</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:188pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// SortableMixin.call(UserItemView.prototype);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:213pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">new UserItemView().startDrag();</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:232pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The mixin here works as a verb, and this functional approach is well accepted in the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:245pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">community. The </span><span style="font-family:CourierStd,serif;font-size:9.5pt">this</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> function always refers to the receiver, that is, </span><span style="font-family:CourierStd,serif;font-size:9.5pt">UserItemView</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:257pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The functionality is exactly same but with a major difference&#x2014;the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">_.extend()</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:270pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">method is no longer needed and the mixin methods are not copied this time but  </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:282pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">are cloned instead. This is not a major problem&#x2014;just the functions are redefined </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:295pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">every time the mixin is used. However, this can also be minimized by caching the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:308pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">functions within the mixin. Let&apos;s see how we can achieve that in the next section.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:336pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:16pt">Caching mixin functions</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:357pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">We can </span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">cache the initial function definitions by wrapping up the mixin in a closure:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:378pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">// Functional mixin with cache</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:390pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var DraggableMixin = (function () {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:403pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var startDrag = function () {};</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:415pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  var onDrag = function () {};</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:439pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  return function (config) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:452pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this.startDrag = startDrag;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:464pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    this.onDrag = onDrag;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:488pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    return this;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:500pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  };</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:513pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">})(); </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:532pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The closure executes only once to define the methods even if the mixin is called </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:545pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">several times. However, it raises another concern&#x2014;inside the mixin methods, how </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:557pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">are we going to use the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">config</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> object that we are passing? This issue can be resolved </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:570pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">by using an interesting pattern named </span><span style="font-family:CourierStd,serif;font-size:9.5pt">curry</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">.</span></p>
</div>
