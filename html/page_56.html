<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Views</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 40 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      return this.cachedTemplates[tplName];</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:152pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    if (this.templates.hasOwnProperty(tplName)) {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:164pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      // Compile and store the template functions </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:176pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">      this.cachedTemplates[tplName] = _.template(this.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:187pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">templates[tplName]);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:199pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:224pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    return this.cachedTemplates[tplName];</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:236pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:248pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">};</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:260pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">TplManager.getCachedTemplate(&apos;userProfile&apos;); </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:279pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">So, we can access the compiled templates from the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">getCachedTemplate</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> method. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:292pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">This is a non-optimized solution without much error handling, but the concept can </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:305pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">be implemented for all your templates.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:336pt;left:174pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">The </span><span style="font-family:CourierStd,serif;font-size:9.5pt">_.template()</span><span style="font-family:BookAntiqua,serif;font-size:9.5pt"> method accepts two arguments in general. If you </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:347pt;left:174pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">pass both the template string and data, it will send you the complete </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:359pt;left:174pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">HTML string with data. However, if you pass only the template string, </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:370pt;left:174pt"><span style="font-family:BookAntiqua,serif;font-size:9.5pt">it will return the function that takes the data as a parameter.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:407pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:18pt">Avoiding evaluation in templates</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:429pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">I learned about many template best practices from the Sencha library. Sencha&apos;s </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:441pt;left:108pt"><span style="font-family:CourierStd,serif;font-size:9.5pt">XTemplate</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> functionality doesn&apos;t let you add any JavaScript code evaluation inside </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:454pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the template string, but it provides a number of variables and options to add the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:466pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">custom functions that help keep the templates clean; I never found any issues while </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:479pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">creating complex templates.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:500pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The Underscore.js template and most other template engines provide a functionality </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:513pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">to evaluate the JavaScript code inside the template. On one hand, this looks pretty </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:525pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">ugly, and on the other hand, it adds to the complexity as the number of templates </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:538pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">increase in the project. Placing some JavaScript logic inside your template makes it </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:551pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">very difficult to manage your code. So it is advisable to separate the JavaScript code </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:563pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">from your HTML markup:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:585pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;h3&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:597pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &lt;%= companyName %&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:609pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;/h3&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:621pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">&lt;ul&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:634pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &lt;% employees.forEach(function (employee) { %&gt;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:646pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    &lt;li&gt;</span></p>
</div>
