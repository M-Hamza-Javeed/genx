<div id="page0" style="position:relative;width:612pt;height:792pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:95pt;left:108pt"><i><span style="font-family:BookAntiqua,serif;font-size:9pt">Working with Models</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:666pt;left:295pt"><b><span style="font-family:Arial,sans-serif;font-size:9pt">[</span></b><b><span style="font-family:Arial,sans-serif;font-size:8pt"> 66 </span></b><b><span style="font-family:Arial,sans-serif;font-size:9pt">]</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:115pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">You can add the custom method to an attribute directly as a function or you can add </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:127pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the method name as a string, just like we did here. Every attribute can have one error </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:140pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">message for each validation rule, or it can have a single one for all its validation rules. </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:153pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">For example, in the following code, we provide separate messages for the </span><span style="font-family:CourierStd,serif;font-size:9.5pt">required</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:165pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and </span><span style="font-family:CourierStd,serif;font-size:9.5pt">format</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> validations of </span><span style="font-family:CourierStd,serif;font-size:9.5pt">email</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt">:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:187pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">{</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:198pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  name: {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:210pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    required: true,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:221pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    msg: &apos;Name is required&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:233pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  },</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:256pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  email: [{</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:267pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    required: true,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:279pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    msg: &apos;Email is required&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:290pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }, {</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:302pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    pattern: &apos;email&apos;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:313pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">    msg: &apos;Please provide a valid email&apos;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:325pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  }]</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:336pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:363pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:16pt">Prevalidating a model with the preValidate() method</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:383pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">This plugin provides another important functionality to prevalidate an attribute of </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:396pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">the model without touching the model itself, shown as follows:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:418pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">var errorMessage = model.preValidate(&apos;attributeName&apos;, &apos;Value&apos;);</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">So, the attribute will be validated against the set of validators assigned to it, and the </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:449pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">return value will be an error message if validation fails.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:471pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">The </span><span style="font-family:CourierStd,serif;font-size:9.5pt">Backbone.Validation</span><span style="font-family:BookAntiqua,serif;font-size:10.5pt"> plugin is very effective if your application needs several </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:483pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">form validations. It removes a lot of boilerplate from your code base and provides a </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:496pt;left:107pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">simple yet robust validation mechanism.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:529pt;left:108pt"><b><span style="font-family:Arial,sans-serif;font-size:20pt">Serializing models</span></b></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:553pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">So far, the model data we used in our examples in the previous chapters are all </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:566pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">simple data objects with attributes. However, there might be a case where the server </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:578pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">is sending a different data format and you need to extract the essential part from it </span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:591pt;left:108pt"><span style="font-family:BookAntiqua,serif;font-size:10.5pt">and apply it to the related model. For example, consider the following data:</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:613pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">{</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:624pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &quot;name&quot;: &quot;John Doe&quot;,</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:636pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">  &quot;email&quot;: &quot;johndoe@example.com&quot;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:647pt;left:126pt"><span style="font-family:CourierStd,serif;font-size:9pt">}</span></p>
</div>
