<div id="page0" style="position:relative;width:540pt;height:648pt;background-color:white">
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:32pt;left:225pt"><span style="font-family:Times,serif;font-size:9.963pt">Chapter 4. Modularity</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">have been any &#xfb01;le handle.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:100pt;left:184pt"><span style="font-family:Times,serif;font-size:9.963pt">If the conversion routine were designed orthogonally, e.g., without the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:112pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">side effect of opening a &#xfb01;le, it could save work later when the conversion has to be done on a data</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:124pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">stream supplied from standard input, a network socket, or any other source.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:146pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">Doug McIlroy&#x2019;s advice to &#x201c;Do one thing well&#x201d; is usually interpreted as being about simplicity. But</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:158pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">it&#x2019;s also, implicitly and at least as importantly, about orthogonality.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:179pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">It&#x2019;s not a problem for a program to do one thing well and other things as side effects, provided</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:191pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">supporting those other things doesn&#x2019;t raise the complexity of the program and its vulnerability to</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">bugs.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:203pt;left:103pt"><span style="font-family:Times,serif;font-size:9.963pt">In Chapter 9 we&#x2019;ll examine a program called</span><i><span style="font-family:Times,serif;font-size:9.963pt"> ascii</span></i><span style="font-family:Times,serif;font-size:9.963pt"> that prints synonyms for the names of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:215pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">ASCII characters, including hex, octal, and binary values; as a side effect, it can serve as a quick</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">base converter for numbers in the range 0&#x2013;255.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:227pt;left:271pt"><span style="font-family:Times,serif;font-size:9.963pt">This second use is not an orthogonality violation</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:239pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">because the features that support it are all necessary to the primary function; they do not make the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:251pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">program more dif&#xfb01;cult to document or maintain.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:273pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The problems with non-orthogonality arise when side effects complicate a programmer&#x2019;s or user&#x2019;s</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:285pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">mental model, and beg to be forgotten, with results ranging from inconvenient to dire. Even when</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:297pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">you do not forget the side effects, you&#x2019;re often forced to do extra work to suppress them or work</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:309pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">around them.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:331pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">There is an excellent discussion of orthogonality and how to achieve it in</span><i><span style="font-family:Times,serif;font-size:9.963pt"> The Pragmatic Program-</span></i></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:343pt;left:72pt"><i><span style="font-family:Times,serif;font-size:9.963pt">mer</span></i><span style="font-family:Times,serif;font-size:9.963pt"> [Hunt-Thomas]. As they point out, orthogonality reduces test and development time, because</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:355pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">it&#x2019;s easier to verify code that neither causes side effects nor depends on side effects from other code</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:367pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">&#x2014; there are fewer combinations to test. If it breaks, orthogonal code is more easily replaced without</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:379pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">disturbance to the rest of the system. Finally, orthogonal code is easier to document and reuse.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:401pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">The concept of</span><i><span style="font-family:Times,serif;font-size:9.963pt"> refactoring</span></i><span style="font-family:Times,serif;font-size:9.963pt">, which &#xfb01;rst emerged as an explicit idea from the &#x2018;Extreme Programming&#x2019;</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">school, is closely related to orthogonality.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:413pt;left:269pt"><span style="font-family:Times,serif;font-size:9.963pt">To refactor code is to change its structure and</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">organization without changing its observable behavior.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:425pt;left:303pt"><span style="font-family:Times,serif;font-size:9.963pt">Software engineers have been doing this</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:437pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">since the birth of the &#xfb01;eld, of course, but naming the practice and identifying a stock set of refactoring</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">techniques has helped concentrate peoples&#x2019; thinking in useful ways.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:448pt;left:365pt"><span style="font-family:Times,serif;font-size:9.963pt">Because these &#xfb01;t so well</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:460pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">with the central concerns of the Unix design tradition, Unix developers have quickly coopted the</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:472pt;left:72pt"><span style="font-family:Times,serif;font-size:9.963pt">terminology and ideas of refactoring.</span><sup><span style="font-family:Times,serif;font-size:6.273pt">43</span></sup></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:492pt;left:72pt"><span style="font-family:Times,serif;font-size:5.018pt">43</span><span style="font-family:Times,serif;font-size:7.97pt">In the foundation text on this topic,</span><i><span style="font-family:Times,serif;font-size:7.97pt"> Refactoring</span></i><span style="font-family:Times,serif;font-size:7.97pt"> [Fowler], the author comes very close to stating that the principal goal of</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:502pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">refactoring is to improve orthogonality. But lacking the concept, he can only approximate this idea from several different</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:511pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">directions: eliminating code duplication and various other &#x201c;bad smells&#x201d; many of which are some sort of orthogonality</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:521pt;left:72pt"><span style="font-family:Times,serif;font-size:7.97pt">violation.</span></p>
<p style="position:absolute;white-space:pre;margin:0;padding:0;top:581pt;left:262pt"><span style="font-family:Times,serif;font-size:9.963pt">114</span></p>
</div>
